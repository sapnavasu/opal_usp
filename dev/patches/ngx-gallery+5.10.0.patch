diff --git a/node_modules/ngx-gallery/bundles/ngx-gallery.umd.js b/node_modules/ngx-gallery/bundles/ngx-gallery.umd.js
index d3d3250..d398b1c 100644
--- a/node_modules/ngx-gallery/bundles/ngx-gallery.umd.js
+++ b/node_modules/ngx-gallery/bundles/ngx-gallery.umd.js
@@ -1,8 +1,267 @@
 (function (global, factory) {
-	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common'), require('@angular/platform-browser')) :
-	typeof define === 'function' && define.amd ? define(['exports', '@angular/core', '@angular/common', '@angular/platform-browser'], factory) :
-	(factory((global['ngx-gallery'] = {}),global.core,global.common,global.platformBrowser));
-}(this, (function (exports,core,common,platformBrowser) { 'use strict';
+	typeof exports === 'object' && typeof module !== 'undefined' ? factory(require('@angular/core'),require('@angular/common'),require('@angular/platform-browser'),exports, require('@angular/core'), require('@angular/common'), require('@angular/platform-browser')) :
+	typeof define === 'function' && define.amd ? define(['@angular/core','@angular/common','@angular/platform-browser','exports', '@angular/core', '@angular/common', '@angular/platform-browser'], factory) :
+	(factory(global.ng.core,global.ng.common,global.ng.platformBrowser,(global['ngx-gallery'] = {}),global.core,global.common,global.platformBrowser));
+}(this, (function (ɵngcc0,ɵngcc1,ɵngcc2,exports,core,common,platformBrowser) { 
+var _c0 = function (a0) { return { "ngx-gallery-active": a0 }; };
+function NgxGalleryBulletsComponent_div_1_Template(rf, ctx) { if (rf & 1) {
+    var _r4 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "div", 1);
+    ɵngcc0.ɵɵlistener("click", function NgxGalleryBulletsComponent_div_1_Template_div_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); var i_r2 = ctx.index; var ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.handleChange($event, i_r2); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var i_r2 = ctx.index;
+    var ctx_r0 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(1, _c0, i_r2 == ctx_r0.active));
+} }
+function NgxGalleryImageComponent_div_3_ngx_gallery_action_4_Template(rf, ctx) { if (rf & 1) {
+    var _r9 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-action", 7);
+    ɵngcc0.ɵɵlistener("onClick", function NgxGalleryImageComponent_div_3_ngx_gallery_action_4_Template_ngx_gallery_action_onClick_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r9); var action_r7 = ctx.$implicit; var image_r3 = ɵngcc0.ɵɵnextContext().$implicit; return action_r7.onClick($event, image_r3.index); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var action_r7 = ctx.$implicit;
+    ɵngcc0.ɵɵproperty("icon", action_r7.icon)("disabled", action_r7.disabled)("titleText", action_r7.titleText);
+} }
+function NgxGalleryImageComponent_div_3_div_7_Template(rf, ctx) { if (rf & 1) {
+    var _r12 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "div", 8);
+    ɵngcc0.ɵɵlistener("click", function NgxGalleryImageComponent_div_3_div_7_Template_div_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r12); return $event.stopPropagation(); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var image_r3 = ɵngcc0.ɵɵnextContext().$implicit;
+    var ctx_r6 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("innerHTML", ctx_r6.descriptions[image_r3.index], ɵngcc0.ɵɵsanitizeHtml);
+} }
+var _c1 = function (a0, a1, a2, a3) { return { "ngx-gallery-active": a0, "ngx-gallery-inactive-left": a1, "ngx-gallery-inactive-right": a2, "ngx-gallery-clickable": a3 }; };
+function NgxGalleryImageComponent_div_3_Template(rf, ctx) { if (rf & 1) {
+    var _r15 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "div", 3);
+    ɵngcc0.ɵɵlistener("click", function NgxGalleryImageComponent_div_3_Template_div_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r15); var image_r3 = ctx.$implicit; var ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.handleClick($event, image_r3.index); });
+    ɵngcc0.ɵɵtext(1, "\n                ");
+    ɵngcc0.ɵɵelementStart(2, "div", 4);
+    ɵngcc0.ɵɵtext(3, "\n                    ");
+    ɵngcc0.ɵɵtemplate(4, NgxGalleryImageComponent_div_3_ngx_gallery_action_4_Template, 1, 3, "ngx-gallery-action", 5);
+    ɵngcc0.ɵɵtext(5, "\n                ");
+    ɵngcc0.ɵɵelementEnd();
+    ɵngcc0.ɵɵtext(6, "\n                ");
+    ɵngcc0.ɵɵtemplate(7, NgxGalleryImageComponent_div_3_div_7_Template, 1, 1, "div", 6);
+    ɵngcc0.ɵɵtext(8, "\n            ");
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var image_r3 = ctx.$implicit;
+    var ctx_r0 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵstyleProp("background-image", ctx_r0.getSafeUrl(image_r3.src), ɵngcc0.ɵɵdefaultStyleSanitizer);
+    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction4(5, _c1, ctx_r0.selectedIndex == image_r3.index, ctx_r0.selectedIndex > image_r3.index, ctx_r0.selectedIndex < image_r3.index, ctx_r0.clickable));
+    ɵngcc0.ɵɵadvance(4);
+    ɵngcc0.ɵɵproperty("ngForOf", ctx_r0.actions);
+    ɵngcc0.ɵɵadvance(3);
+    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.showDescription && ctx_r0.descriptions[image_r3.index]);
+} }
+function NgxGalleryImageComponent_ngx_gallery_bullets_6_Template(rf, ctx) { if (rf & 1) {
+    var _r17 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-bullets", 9);
+    ɵngcc0.ɵɵlistener("onChange", function NgxGalleryImageComponent_ngx_gallery_bullets_6_Template_ngx_gallery_bullets_onChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r17); var ctx_r16 = ɵngcc0.ɵɵnextContext(); return ctx_r16.show($event); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r1 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("count", ctx_r1.images.length)("active", ctx_r1.selectedIndex);
+} }
+function NgxGalleryImageComponent_ngx_gallery_arrows_8_Template(rf, ctx) { if (rf & 1) {
+    var _r19 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-arrows", 10);
+    ɵngcc0.ɵɵlistener("onPrevClick", function NgxGalleryImageComponent_ngx_gallery_arrows_8_Template_ngx_gallery_arrows_onPrevClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); var ctx_r18 = ɵngcc0.ɵɵnextContext(); return ctx_r18.showPrev(); })("onNextClick", function NgxGalleryImageComponent_ngx_gallery_arrows_8_Template_ngx_gallery_arrows_onNextClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); var ctx_r20 = ɵngcc0.ɵɵnextContext(); return ctx_r20.showNext(); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r2 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵclassMapInterpolate1("ngx-gallery-image-size-", ctx_r2.size, "");
+    ɵngcc0.ɵɵproperty("prevDisabled", !ctx_r2.canShowPrev())("nextDisabled", !ctx_r2.canShowNext())("arrowPrevIcon", ctx_r2.arrowPrevIcon)("arrowNextIcon", ctx_r2.arrowNextIcon);
+} }
+function NgxGalleryThumbnailsComponent_a_5_ngx_gallery_action_4_Template(rf, ctx) { if (rf & 1) {
+    var _r8 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-action", 7);
+    ɵngcc0.ɵɵlistener("onClick", function NgxGalleryThumbnailsComponent_a_5_ngx_gallery_action_4_Template_ngx_gallery_action_onClick_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); var action_r6 = ctx.$implicit; var i_r3 = ɵngcc0.ɵɵnextContext().index; return action_r6.onClick($event, i_r3); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var action_r6 = ctx.$implicit;
+    ɵngcc0.ɵɵproperty("icon", action_r6.icon)("disabled", action_r6.disabled)("titleText", action_r6.titleText);
+} }
+function NgxGalleryThumbnailsComponent_a_5_div_7_Template(rf, ctx) { if (rf & 1) {
+    ɵngcc0.ɵɵelementStart(0, "div", 8);
+    ɵngcc0.ɵɵtext(1, "\n                    ");
+    ɵngcc0.ɵɵelementStart(2, "span", 9);
+    ɵngcc0.ɵɵtext(3);
+    ɵngcc0.ɵɵelementEnd();
+    ɵngcc0.ɵɵtext(4, "\n                ");
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r5 = ɵngcc0.ɵɵnextContext(2);
+    ɵngcc0.ɵɵadvance(3);
+    ɵngcc0.ɵɵtextInterpolate1("+", ctx_r5.remainingCountValue, "");
+} }
+var _c2 = function (a0, a1) { return { "ngx-gallery-active": a0, "ngx-gallery-clickable": a1 }; };
+function NgxGalleryThumbnailsComponent_a_5_Template(rf, ctx) { if (rf & 1) {
+    var _r11 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "a", 3);
+    ɵngcc0.ɵɵlistener("click", function NgxGalleryThumbnailsComponent_a_5_Template_a_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r11); var i_r3 = ctx.index; var ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.handleClick($event, i_r3); });
+    ɵngcc0.ɵɵtext(1, "\n                ");
+    ɵngcc0.ɵɵelementStart(2, "div", 4);
+    ɵngcc0.ɵɵtext(3, "\n                    ");
+    ɵngcc0.ɵɵtemplate(4, NgxGalleryThumbnailsComponent_a_5_ngx_gallery_action_4_Template, 1, 3, "ngx-gallery-action", 5);
+    ɵngcc0.ɵɵtext(5, "\n                ");
+    ɵngcc0.ɵɵelementEnd();
+    ɵngcc0.ɵɵtext(6, "\n                ");
+    ɵngcc0.ɵɵtemplate(7, NgxGalleryThumbnailsComponent_a_5_div_7_Template, 5, 1, "div", 6);
+    ɵngcc0.ɵɵtext(8, "\n            ");
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var image_r2 = ctx.$implicit;
+    var i_r3 = ctx.index;
+    var ctx_r0 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵstyleProp("background-image", ctx_r0.getSafeUrl(image_r2), ɵngcc0.ɵɵdefaultStyleSanitizer)("width", ctx_r0.getThumbnailWidth())("height", ctx_r0.getThumbnailHeight())("left", ctx_r0.getThumbnailLeft(i_r3))("top", ctx_r0.getThumbnailTop(i_r3));
+    ɵngcc0.ɵɵproperty("href", ctx_r0.hasLink(i_r3) ? ctx_r0.links[i_r3] : "#", ɵngcc0.ɵɵsanitizeUrl)("target", ctx_r0.linkTarget)("ngClass", ɵngcc0.ɵɵpureFunction2(16, _c2, i_r3 == ctx_r0.selectedIndex, ctx_r0.clickable));
+    ɵngcc0.ɵɵattribute("aria-label", ctx_r0.labels[i_r3]);
+    ɵngcc0.ɵɵadvance(4);
+    ɵngcc0.ɵɵproperty("ngForOf", ctx_r0.actions);
+    ɵngcc0.ɵɵadvance(3);
+    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.remainingCount && ctx_r0.remainingCountValue && i_r3 == ctx_r0.rows * ctx_r0.columns - 1);
+} }
+function NgxGalleryThumbnailsComponent_ngx_gallery_arrows_9_Template(rf, ctx) { if (rf & 1) {
+    var _r13 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-arrows", 10);
+    ɵngcc0.ɵɵlistener("onPrevClick", function NgxGalleryThumbnailsComponent_ngx_gallery_arrows_9_Template_ngx_gallery_arrows_onPrevClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); var ctx_r12 = ɵngcc0.ɵɵnextContext(); return ctx_r12.moveLeft(); })("onNextClick", function NgxGalleryThumbnailsComponent_ngx_gallery_arrows_9_Template_ngx_gallery_arrows_onNextClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); var ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.moveRight(); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r1 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("prevDisabled", !ctx_r1.canMoveLeft())("nextDisabled", !ctx_r1.canMoveRight())("arrowPrevIcon", ctx_r1.arrowPrevIcon)("arrowNextIcon", ctx_r1.arrowNextIcon);
+} }
+var _c3 = ["previewImage"];
+function NgxGalleryPreviewComponent_ngx_gallery_arrows_1_Template(rf, ctx) { if (rf & 1) {
+    var _r12 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-arrows", 15);
+    ɵngcc0.ɵɵlistener("onPrevClick", function NgxGalleryPreviewComponent_ngx_gallery_arrows_1_Template_ngx_gallery_arrows_onPrevClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r12); var ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.showPrev(); })("onNextClick", function NgxGalleryPreviewComponent_ngx_gallery_arrows_1_Template_ngx_gallery_arrows_onNextClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r12); var ctx_r13 = ɵngcc0.ɵɵnextContext(); return ctx_r13.showNext(); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r0 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("prevDisabled", !ctx_r0.canShowPrev())("nextDisabled", !ctx_r0.canShowNext())("arrowPrevIcon", ctx_r0.arrowPrevIcon)("arrowNextIcon", ctx_r0.arrowNextIcon);
+} }
+function NgxGalleryPreviewComponent_ngx_gallery_action_7_Template(rf, ctx) { if (rf & 1) {
+    var _r16 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-action", 16);
+    ɵngcc0.ɵɵlistener("onClick", function NgxGalleryPreviewComponent_ngx_gallery_action_7_Template_ngx_gallery_action_onClick_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r16); var action_r14 = ctx.$implicit; var ctx_r15 = ɵngcc0.ɵɵnextContext(); return action_r14.onClick($event, ctx_r15.index); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var action_r14 = ctx.$implicit;
+    ɵngcc0.ɵɵproperty("icon", action_r14.icon)("disabled", action_r14.disabled)("titleText", action_r14.titleText);
+} }
+function NgxGalleryPreviewComponent_a_9_Template(rf, ctx) { if (rf & 1) {
+    ɵngcc0.ɵɵelementStart(0, "a", 17);
+    ɵngcc0.ɵɵtext(1, "\n                    ");
+    ɵngcc0.ɵɵelement(2, "i");
+    ɵngcc0.ɵɵtext(3, "\n                ");
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r2 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("href", ctx_r2.src, ɵngcc0.ɵɵsanitizeUrl);
+    ɵngcc0.ɵɵadvance(2);
+    ɵngcc0.ɵɵclassMapInterpolate1("ngx-gallery-icon-content ", ctx_r2.downloadIcon, "");
+} }
+function NgxGalleryPreviewComponent_ngx_gallery_action_11_Template(rf, ctx) { if (rf & 1) {
+    var _r18 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-action", 18);
+    ɵngcc0.ɵɵlistener("onClick", function NgxGalleryPreviewComponent_ngx_gallery_action_11_Template_ngx_gallery_action_onClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r18); var ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.zoomOut(); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r3 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("icon", ctx_r3.zoomOutIcon)("disabled", !ctx_r3.canZoomOut());
+} }
+function NgxGalleryPreviewComponent_ngx_gallery_action_13_Template(rf, ctx) { if (rf & 1) {
+    var _r20 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-action", 18);
+    ɵngcc0.ɵɵlistener("onClick", function NgxGalleryPreviewComponent_ngx_gallery_action_13_Template_ngx_gallery_action_onClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); var ctx_r19 = ɵngcc0.ɵɵnextContext(); return ctx_r19.zoomIn(); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r4 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("icon", ctx_r4.zoomInIcon)("disabled", !ctx_r4.canZoomIn());
+} }
+function NgxGalleryPreviewComponent_ngx_gallery_action_15_Template(rf, ctx) { if (rf & 1) {
+    var _r22 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-action", 7);
+    ɵngcc0.ɵɵlistener("onClick", function NgxGalleryPreviewComponent_ngx_gallery_action_15_Template_ngx_gallery_action_onClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r22); var ctx_r21 = ɵngcc0.ɵɵnextContext(); return ctx_r21.rotateLeft(); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r5 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("icon", ctx_r5.rotateLeftIcon);
+} }
+function NgxGalleryPreviewComponent_ngx_gallery_action_17_Template(rf, ctx) { if (rf & 1) {
+    var _r24 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-action", 7);
+    ɵngcc0.ɵɵlistener("onClick", function NgxGalleryPreviewComponent_ngx_gallery_action_17_Template_ngx_gallery_action_onClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r24); var ctx_r23 = ɵngcc0.ɵɵnextContext(); return ctx_r23.rotateRight(); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r6 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("icon", ctx_r6.rotateRightIcon);
+} }
+function NgxGalleryPreviewComponent_ngx_gallery_action_19_Template(rf, ctx) { if (rf & 1) {
+    var _r26 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-action", 7);
+    ɵngcc0.ɵɵlistener("onClick", function NgxGalleryPreviewComponent_ngx_gallery_action_19_Template_ngx_gallery_action_onClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r26); var ctx_r25 = ɵngcc0.ɵɵnextContext(); return ctx_r25.manageFullscreen(); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r7 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("icon", "ngx-gallery-fullscreen " + ctx_r7.fullscreenIcon);
+} }
+function NgxGalleryPreviewComponent_img_34_Template(rf, ctx) { if (rf & 1) {
+    var _r29 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "img", 19, 20);
+    ɵngcc0.ɵɵlistener("click", function NgxGalleryPreviewComponent_img_34_Template_img_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r29); return $event.stopPropagation(); })("mouseenter", function NgxGalleryPreviewComponent_img_34_Template_img_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r29); var ctx_r30 = ɵngcc0.ɵɵnextContext(); return ctx_r30.imageMouseEnter(); })("mouseleave", function NgxGalleryPreviewComponent_img_34_Template_img_mouseleave_0_listener() { ɵngcc0.ɵɵrestoreView(_r29); var ctx_r31 = ɵngcc0.ɵɵnextContext(); return ctx_r31.imageMouseLeave(); })("mousedown", function NgxGalleryPreviewComponent_img_34_Template_img_mousedown_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r29); var ctx_r32 = ɵngcc0.ɵɵnextContext(); return ctx_r32.mouseDownHandler($event); })("touchstart", function NgxGalleryPreviewComponent_img_34_Template_img_touchstart_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r29); var ctx_r33 = ɵngcc0.ɵɵnextContext(); return ctx_r33.mouseDownHandler($event); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r8 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵstyleProp("transform", ctx_r8.getTransform())("left", ctx_r8.positionLeft + "px")("top", ctx_r8.positionTop + "px");
+    ɵngcc0.ɵɵclassProp("ngx-gallery-active", !ctx_r8.loading)("animation", ctx_r8.animation)("ngx-gallery-grab", ctx_r8.canDragOnZoom());
+    ɵngcc0.ɵɵproperty("src", ctx_r8.src, ɵngcc0.ɵɵsanitizeUrl);
+} }
+function NgxGalleryPreviewComponent_ngx_gallery_bullets_36_Template(rf, ctx) { if (rf & 1) {
+    var _r35 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-bullets", 21);
+    ɵngcc0.ɵɵlistener("onChange", function NgxGalleryPreviewComponent_ngx_gallery_bullets_36_Template_ngx_gallery_bullets_onChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r35); var ctx_r34 = ɵngcc0.ɵɵnextContext(); return ctx_r34.showAtIndex($event); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r9 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("count", ctx_r9.images.length)("active", ctx_r9.index);
+} }
+function NgxGalleryPreviewComponent_div_39_Template(rf, ctx) { if (rf & 1) {
+    var _r37 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "div", 22);
+    ɵngcc0.ɵɵlistener("click", function NgxGalleryPreviewComponent_div_39_Template_div_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r37); return $event.stopPropagation(); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r10 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵproperty("innerHTML", ctx_r10.description, ɵngcc0.ɵɵsanitizeHtml);
+} }
+function NgxGalleryComponent_ngx_gallery_image_3_Template(rf, ctx) { if (rf & 1) {
+    var _r3 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-image", 3);
+    ɵngcc0.ɵɵlistener("onClick", function NgxGalleryComponent_ngx_gallery_image_3_Template_ngx_gallery_image_onClick_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r3); var ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.openPreview($event); })("onActiveChange", function NgxGalleryComponent_ngx_gallery_image_3_Template_ngx_gallery_image_onActiveChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r3); var ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.selectFromImage($event); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r0 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵstyleProp("height", ctx_r0.getImageHeight());
+    ɵngcc0.ɵɵproperty("images", ctx_r0.mediumImages)("clickable", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.preview)("selectedIndex", ctx_r0.selectedIndex)("arrows", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageArrows)("arrowsAutoHide", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageArrowsAutoHide)("arrowPrevIcon", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.arrowPrevIcon)("arrowNextIcon", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.arrowNextIcon)("swipe", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageSwipe)("animation", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageAnimation)("size", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageSize)("autoPlay", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageAutoPlay)("autoPlayInterval", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageAutoPlayInterval)("autoPlayPauseOnHover", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageAutoPlayPauseOnHover)("infinityMove", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageInfinityMove)("lazyLoading", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.lazyLoading)("actions", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageActions)("descriptions", ctx_r0.descriptions)("showDescription", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageDescription)("bullets", ctx_r0.currentOptions == null ? null : ctx_r0.currentOptions.imageBullets);
+} }
+var _c4 = function () { return []; };
+function NgxGalleryComponent_ngx_gallery_thumbnails_5_Template(rf, ctx) { if (rf & 1) {
+    var _r6 = ɵngcc0.ɵɵgetCurrentView();
+    ɵngcc0.ɵɵelementStart(0, "ngx-gallery-thumbnails", 4);
+    ɵngcc0.ɵɵlistener("onActiveChange", function NgxGalleryComponent_ngx_gallery_thumbnails_5_Template_ngx_gallery_thumbnails_onActiveChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); var ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.selectFromThumbnails($event); });
+    ɵngcc0.ɵɵelementEnd();
+} if (rf & 2) {
+    var ctx_r1 = ɵngcc0.ɵɵnextContext();
+    ɵngcc0.ɵɵstyleProp("margin-top", ctx_r1.getThumbnailsMarginTop())("margin-bottom", ctx_r1.getThumbnailsMarginBottom())("height", ctx_r1.getThumbnailsHeight());
+    ɵngcc0.ɵɵproperty("images", ctx_r1.smallImages)("links", (ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailsAsLinks) ? ctx_r1.links : ɵngcc0.ɵɵpureFunction0(26, _c4))("labels", ctx_r1.labels)("linkTarget", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.linkTarget)("selectedIndex", ctx_r1.selectedIndex)("columns", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailsColumns)("rows", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailsRows)("margin", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailMargin)("arrows", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailsArrows)("arrowsAutoHide", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailsArrowsAutoHide)("arrowPrevIcon", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.arrowPrevIcon)("arrowNextIcon", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.arrowNextIcon)("clickable", (ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.image) || (ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.preview))("swipe", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailsSwipe)("size", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailSize)("moveSize", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailsMoveSize)("order", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailsOrder)("remainingCount", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailsRemainingCount)("lazyLoading", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.lazyLoading)("actions", ctx_r1.currentOptions == null ? null : ctx_r1.currentOptions.thumbnailActions);
+} }
+'use strict';
 
 var NgxGalleryActionComponent = /** @class */ (function () {
     function NgxGalleryActionComponent() {
@@ -21,13 +280,6 @@ var NgxGalleryActionComponent = /** @class */ (function () {
         event.stopPropagation();
         event.preventDefault();
     };
-    NgxGalleryActionComponent.decorators = [
-        { type: core.Component, args: [{
-                    selector: 'ngx-gallery-action',
-                    template: "\n        <div class=\"ngx-gallery-icon\" [class.ngx-gallery-icon-disabled]=\"disabled\"\n            aria-hidden=\"true\"\n            title=\"{{ titleText }}\"\n            (click)=\"handleClick($event)\">\n                <i class=\"ngx-gallery-icon-content {{ icon }}\"></i>\n        </div>",
-                    changeDetection: core.ChangeDetectionStrategy.OnPush
-                },] },
-    ];
     /**
      * @nocollapse
      */
@@ -38,6 +290,38 @@ var NgxGalleryActionComponent = /** @class */ (function () {
         'titleText': [{ type: core.Input },],
         'onClick': [{ type: core.Output },],
     };
+NgxGalleryActionComponent.ɵfac = function NgxGalleryActionComponent_Factory(t) { return new (t || NgxGalleryActionComponent)(); };
+NgxGalleryActionComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgxGalleryActionComponent, selectors: [["ngx-gallery-action"]], inputs: { disabled: "disabled", titleText: "titleText", icon: "icon" }, outputs: { onClick: "onClick" }, decls: 5, vars: 6, consts: [["aria-hidden", "true", 1, "ngx-gallery-icon", 3, "title", "click"]], template: function NgxGalleryActionComponent_Template(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵtext(0, "\n        ");
+        ɵngcc0.ɵɵelementStart(1, "div", 0);
+        ɵngcc0.ɵɵlistener("click", function NgxGalleryActionComponent_Template_div_click_1_listener($event) { return ctx.handleClick($event); });
+        ɵngcc0.ɵɵtext(2, "\n                ");
+        ɵngcc0.ɵɵelement(3, "i");
+        ɵngcc0.ɵɵtext(4, "\n        ");
+        ɵngcc0.ɵɵelementEnd();
+    } if (rf & 2) {
+        ɵngcc0.ɵɵadvance(1);
+        ɵngcc0.ɵɵclassProp("ngx-gallery-icon-disabled", ctx.disabled);
+        ɵngcc0.ɵɵpropertyInterpolate("title", ctx.titleText);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵclassMapInterpolate1("ngx-gallery-icon-content ", ctx.icon, "");
+    } }, encapsulation: 2, changeDetection: 0 });
+/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxGalleryActionComponent, [{
+        type: core.Component,
+        args: [{
+                selector: 'ngx-gallery-action',
+                template: "\n        <div class=\"ngx-gallery-icon\" [class.ngx-gallery-icon-disabled]=\"disabled\"\n            aria-hidden=\"true\"\n            title=\"{{ titleText }}\"\n            (click)=\"handleClick($event)\">\n                <i class=\"ngx-gallery-icon-content {{ icon }}\"></i>\n        </div>",
+                changeDetection: core.ChangeDetectionStrategy.OnPush
+            }]
+    }], function () { return []; }, { disabled: [{
+            type: core.Input
+        }], titleText: [{
+            type: core.Input
+        }], onClick: [{
+            type: core.Output
+        }], icon: [{
+            type: core.Input
+        }] }); })();
     return NgxGalleryActionComponent;
 }());
 
@@ -58,13 +342,6 @@ var NgxGalleryArrowsComponent = /** @class */ (function () {
     NgxGalleryArrowsComponent.prototype.handleNextClick = function () {
         this.onNextClick.emit();
     };
-    NgxGalleryArrowsComponent.decorators = [
-        { type: core.Component, args: [{
-                    selector: 'ngx-gallery-arrows',
-                    template: "\n        <div class=\"ngx-gallery-arrow-wrapper ngx-gallery-arrow-left\">\n            <div class=\"ngx-gallery-icon ngx-gallery-arrow\" aria-hidden=\"true\" (click)=\"handlePrevClick()\" [class.ngx-gallery-disabled]=\"prevDisabled\">\n                <i class=\"ngx-gallery-icon-content {{arrowPrevIcon}}\"></i>\n            </div>\n        </div>\n        <div class=\"ngx-gallery-arrow-wrapper ngx-gallery-arrow-right\">\n            <div class=\"ngx-gallery-icon ngx-gallery-arrow\" aria-hidden=\"true\" (click)=\"handleNextClick()\" [class.ngx-gallery-disabled]=\"nextDisabled\">\n                <i class=\"ngx-gallery-icon-content {{arrowNextIcon}}\"></i>\n            </div>\n        </div>\n    ",
-                    styles: [".ngx-gallery-arrow-wrapper { position: absolute; height: 100%; width: 1px; display: table; z-index: 2000; table-layout: fixed; } .ngx-gallery-arrow-left { left: 0px; } .ngx-gallery-arrow-right { right: 0px; } .ngx-gallery-arrow { top: 50%; transform: translateY(-50%); cursor: pointer; } .ngx-gallery-arrow.ngx-gallery-disabled { opacity: 0.6; cursor: default; } .ngx-gallery-arrow-left .ngx-gallery-arrow { left: 10px; } .ngx-gallery-arrow-right .ngx-gallery-arrow { right: 10px; } "]
-                },] },
-    ];
     /**
      * @nocollapse
      */
@@ -77,6 +354,61 @@ var NgxGalleryArrowsComponent = /** @class */ (function () {
         'onPrevClick': [{ type: core.Output },],
         'onNextClick': [{ type: core.Output },],
     };
+NgxGalleryArrowsComponent.ɵfac = function NgxGalleryArrowsComponent_Factory(t) { return new (t || NgxGalleryArrowsComponent)(); };
+NgxGalleryArrowsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgxGalleryArrowsComponent, selectors: [["ngx-gallery-arrows"]], inputs: { prevDisabled: "prevDisabled", nextDisabled: "nextDisabled", arrowPrevIcon: "arrowPrevIcon", arrowNextIcon: "arrowNextIcon" }, outputs: { onPrevClick: "onPrevClick", onNextClick: "onNextClick" }, decls: 17, vars: 10, consts: [[1, "ngx-gallery-arrow-wrapper", "ngx-gallery-arrow-left"], ["aria-hidden", "true", 1, "ngx-gallery-icon", "ngx-gallery-arrow", 3, "click"], [1, "ngx-gallery-arrow-wrapper", "ngx-gallery-arrow-right"]], template: function NgxGalleryArrowsComponent_Template(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵtext(0, "\n        ");
+        ɵngcc0.ɵɵelementStart(1, "div", 0);
+        ɵngcc0.ɵɵtext(2, "\n            ");
+        ɵngcc0.ɵɵelementStart(3, "div", 1);
+        ɵngcc0.ɵɵlistener("click", function NgxGalleryArrowsComponent_Template_div_click_3_listener() { return ctx.handlePrevClick(); });
+        ɵngcc0.ɵɵtext(4, "\n                ");
+        ɵngcc0.ɵɵelement(5, "i");
+        ɵngcc0.ɵɵtext(6, "\n            ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(7, "\n        ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(8, "\n        ");
+        ɵngcc0.ɵɵelementStart(9, "div", 2);
+        ɵngcc0.ɵɵtext(10, "\n            ");
+        ɵngcc0.ɵɵelementStart(11, "div", 1);
+        ɵngcc0.ɵɵlistener("click", function NgxGalleryArrowsComponent_Template_div_click_11_listener() { return ctx.handleNextClick(); });
+        ɵngcc0.ɵɵtext(12, "\n                ");
+        ɵngcc0.ɵɵelement(13, "i");
+        ɵngcc0.ɵɵtext(14, "\n            ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(15, "\n        ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(16, "\n    ");
+    } if (rf & 2) {
+        ɵngcc0.ɵɵadvance(3);
+        ɵngcc0.ɵɵclassProp("ngx-gallery-disabled", ctx.prevDisabled);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵclassMapInterpolate1("ngx-gallery-icon-content ", ctx.arrowPrevIcon, "");
+        ɵngcc0.ɵɵadvance(6);
+        ɵngcc0.ɵɵclassProp("ngx-gallery-disabled", ctx.nextDisabled);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵclassMapInterpolate1("ngx-gallery-icon-content ", ctx.arrowNextIcon, "");
+    } }, styles: [".ngx-gallery-arrow-wrapper[_ngcontent-%COMP%] { position: absolute; height: 100%; width: 1px; display: table; z-index: 2000; table-layout: fixed; } .ngx-gallery-arrow-left[_ngcontent-%COMP%] { left: 0px; } .ngx-gallery-arrow-right[_ngcontent-%COMP%] { right: 0px; } .ngx-gallery-arrow[_ngcontent-%COMP%] { top: 50%; transform: translateY(-50%); cursor: pointer; } .ngx-gallery-arrow.ngx-gallery-disabled[_ngcontent-%COMP%] { opacity: 0.6; cursor: default; } .ngx-gallery-arrow-left[_ngcontent-%COMP%]   .ngx-gallery-arrow[_ngcontent-%COMP%] { left: 10px; } .ngx-gallery-arrow-right[_ngcontent-%COMP%]   .ngx-gallery-arrow[_ngcontent-%COMP%] { right: 10px; }"] });
+/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxGalleryArrowsComponent, [{
+        type: core.Component,
+        args: [{
+                selector: 'ngx-gallery-arrows',
+                template: "\n        <div class=\"ngx-gallery-arrow-wrapper ngx-gallery-arrow-left\">\n            <div class=\"ngx-gallery-icon ngx-gallery-arrow\" aria-hidden=\"true\" (click)=\"handlePrevClick()\" [class.ngx-gallery-disabled]=\"prevDisabled\">\n                <i class=\"ngx-gallery-icon-content {{arrowPrevIcon}}\"></i>\n            </div>\n        </div>\n        <div class=\"ngx-gallery-arrow-wrapper ngx-gallery-arrow-right\">\n            <div class=\"ngx-gallery-icon ngx-gallery-arrow\" aria-hidden=\"true\" (click)=\"handleNextClick()\" [class.ngx-gallery-disabled]=\"nextDisabled\">\n                <i class=\"ngx-gallery-icon-content {{arrowNextIcon}}\"></i>\n            </div>\n        </div>\n    ",
+                styles: [".ngx-gallery-arrow-wrapper { position: absolute; height: 100%; width: 1px; display: table; z-index: 2000; table-layout: fixed; } .ngx-gallery-arrow-left { left: 0px; } .ngx-gallery-arrow-right { right: 0px; } .ngx-gallery-arrow { top: 50%; transform: translateY(-50%); cursor: pointer; } .ngx-gallery-arrow.ngx-gallery-disabled { opacity: 0.6; cursor: default; } .ngx-gallery-arrow-left .ngx-gallery-arrow { left: 10px; } .ngx-gallery-arrow-right .ngx-gallery-arrow { right: 10px; } "]
+            }]
+    }], function () { return []; }, { onPrevClick: [{
+            type: core.Output
+        }], onNextClick: [{
+            type: core.Output
+        }], prevDisabled: [{
+            type: core.Input
+        }], nextDisabled: [{
+            type: core.Input
+        }], arrowPrevIcon: [{
+            type: core.Input
+        }], arrowNextIcon: [{
+            type: core.Input
+        }] }); })();
     return NgxGalleryArrowsComponent;
 }());
 
@@ -99,13 +431,6 @@ var NgxGalleryBulletsComponent = /** @class */ (function () {
     NgxGalleryBulletsComponent.prototype.handleChange = function (event, index) {
         this.onChange.emit(index);
     };
-    NgxGalleryBulletsComponent.decorators = [
-        { type: core.Component, args: [{
-                    selector: 'ngx-gallery-bullets',
-                    template: "\n        <div class=\"ngx-gallery-bullet\" *ngFor=\"let bullet of getBullets(); let i = index;\" (click)=\"handleChange($event, i)\" [ngClass]=\"{ 'ngx-gallery-active': i == active }\"></div>\n    ",
-                    styles: [":host { position: absolute; z-index: 2000; display: inline-flex; left: 50%; transform: translateX(-50%); bottom: 0px; padding: 10px; } .ngx-gallery-bullet { width: 10px; height: 10px; border-radius: 50%; cursor: pointer; background: white; } .ngx-gallery-bullet:not(:first-child) { margin-left: 5px; } .ngx-gallery-bullet:hover, .ngx-gallery-bullet.ngx-gallery-active { background: black; } "]
-                },] },
-    ];
     /**
      * @nocollapse
      */
@@ -115,6 +440,29 @@ var NgxGalleryBulletsComponent = /** @class */ (function () {
         'active': [{ type: core.Input },],
         'onChange': [{ type: core.Output },],
     };
+NgxGalleryBulletsComponent.ɵfac = function NgxGalleryBulletsComponent_Factory(t) { return new (t || NgxGalleryBulletsComponent)(); };
+NgxGalleryBulletsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgxGalleryBulletsComponent, selectors: [["ngx-gallery-bullets"]], inputs: { active: "active", count: "count" }, outputs: { onChange: "onChange" }, decls: 3, vars: 1, consts: [["class", "ngx-gallery-bullet", 3, "ngClass", "click", 4, "ngFor", "ngForOf"], [1, "ngx-gallery-bullet", 3, "ngClass", "click"]], template: function NgxGalleryBulletsComponent_Template(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵtext(0, "\n        ");
+        ɵngcc0.ɵɵtemplate(1, NgxGalleryBulletsComponent_div_1_Template, 1, 3, "div", 0);
+        ɵngcc0.ɵɵtext(2, "\n    ");
+    } if (rf & 2) {
+        ɵngcc0.ɵɵadvance(1);
+        ɵngcc0.ɵɵproperty("ngForOf", ctx.getBullets());
+    } }, directives: [ɵngcc1.NgForOf, ɵngcc1.NgClass], styles: ["[_nghost-%COMP%] { position: absolute; z-index: 2000; display: inline-flex; left: 50%; transform: translateX(-50%); bottom: 0px; padding: 10px; } .ngx-gallery-bullet[_ngcontent-%COMP%] { width: 10px; height: 10px; border-radius: 50%; cursor: pointer; background: white; } .ngx-gallery-bullet[_ngcontent-%COMP%]:not(:first-child) { margin-left: 5px; } .ngx-gallery-bullet[_ngcontent-%COMP%]:hover, .ngx-gallery-bullet.ngx-gallery-active[_ngcontent-%COMP%] { background: black; }"] });
+/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxGalleryBulletsComponent, [{
+        type: core.Component,
+        args: [{
+                selector: 'ngx-gallery-bullets',
+                template: "\n        <div class=\"ngx-gallery-bullet\" *ngFor=\"let bullet of getBullets(); let i = index;\" (click)=\"handleChange($event, i)\" [ngClass]=\"{ 'ngx-gallery-active': i == active }\"></div>\n    ",
+                styles: [":host { position: absolute; z-index: 2000; display: inline-flex; left: 50%; transform: translateX(-50%); bottom: 0px; padding: 10px; } .ngx-gallery-bullet { width: 10px; height: 10px; border-radius: 50%; cursor: pointer; background: white; } .ngx-gallery-bullet:not(:first-child) { margin-left: 5px; } .ngx-gallery-bullet:hover, .ngx-gallery-bullet.ngx-gallery-active { background: black; } "]
+            }]
+    }], function () { return []; }, { active: [{
+            type: core.Input
+        }], onChange: [{
+            type: core.Output
+        }], count: [{
+            type: core.Input
+        }] }); })();
     return NgxGalleryBulletsComponent;
 }());
 
@@ -185,15 +533,17 @@ var NgxGalleryHelperService = /** @class */ (function () {
     NgxGalleryHelperService.prototype.removeSwipeHandlers = function (id) {
         this.swipeHandlers.delete(id);
     };
-    NgxGalleryHelperService.decorators = [
-        { type: core.Injectable },
-    ];
     /**
      * @nocollapse
      */
     NgxGalleryHelperService.ctorParameters = function () { return [
         { type: core.Renderer, },
     ]; };
+NgxGalleryHelperService.ɵfac = function NgxGalleryHelperService_Factory(t) { return new (t || NgxGalleryHelperService)(ɵngcc0.ɵɵinject(core.Renderer)); };
+NgxGalleryHelperService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NgxGalleryHelperService, factory: function (t) { return NgxGalleryHelperService.ɵfac(t); } });
+/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxGalleryHelperService, [{
+        type: core.Injectable
+    }], function () { return [{ type: core.Renderer }]; }, null); })();
     return NgxGalleryHelperService;
 }());
 
@@ -417,13 +767,6 @@ var NgxGalleryImageComponent = /** @class */ (function () {
     NgxGalleryImageComponent.prototype.getSafeUrl = function (image) {
         return this.sanitization.bypassSecurityTrustStyle(this.helperService.getBackgroundUrl(image));
     };
-    NgxGalleryImageComponent.decorators = [
-        { type: core.Component, args: [{
-                    selector: 'ngx-gallery-image',
-                    template: "\n        <div class=\"ngx-gallery-image-wrapper ngx-gallery-animation-{{animation}} ngx-gallery-image-size-{{size}}\">\n            <div class=\"ngx-gallery-image\" *ngFor=\"let image of getImages(); let i = index;\" [ngClass]=\"{ 'ngx-gallery-active': selectedIndex == image.index, 'ngx-gallery-inactive-left': selectedIndex > image.index, 'ngx-gallery-inactive-right': selectedIndex < image.index, 'ngx-gallery-clickable': clickable }\" [style.background-image]=\"getSafeUrl(image.src)\" (click)=\"handleClick($event, image.index)\">\n                <div class=\"ngx-gallery-icons-wrapper\">\n                    <ngx-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, image.index)\"></ngx-gallery-action>\n                </div>\n                <div class=\"ngx-gallery-image-text\" *ngIf=\"showDescription && descriptions[image.index]\" [innerHTML]=\"descriptions[image.index]\" (click)=\"$event.stopPropagation()\"></div>\n            </div>\n        </div>\n        <ngx-gallery-bullets *ngIf=\"bullets\" [count]=\"images.length\" [active]=\"selectedIndex\" (onChange)=\"show($event)\"></ngx-gallery-bullets>\n        <ngx-gallery-arrows class=\"ngx-gallery-image-size-{{size}}\" *ngIf=\"arrows\" (onPrevClick)=\"showPrev()\" (onNextClick)=\"showNext()\" [prevDisabled]=\"!canShowPrev()\" [nextDisabled]=\"!canShowNext()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></ngx-gallery-arrows>\n    ",
-                    styles: [":host { width: 100%; display: inline-block; position: relative; } .ngx-gallery-image-wrapper { width: 100%; height: 100%; position: absolute; left: 0px; top: 0px; overflow: hidden; } .ngx-gallery-image { background-position: center; background-repeat: no-repeat; height: 100%; width: 100%; position: absolute; top: 0px; } .ngx-gallery-image.ngx-gallery-active { z-index: 1000; } .ngx-gallery-image-size-cover .ngx-gallery-image { background-size: cover; } .ngx-gallery-image-size-contain .ngx-gallery-image { background-size: contain; } .ngx-gallery-animation-fade .ngx-gallery-image { left: 0px; opacity: 0; transition: 0.5s ease-in-out; } .ngx-gallery-animation-fade .ngx-gallery-image.ngx-gallery-active { opacity: 1; } .ngx-gallery-animation-slide .ngx-gallery-image { transition: 0.5s ease-in-out; } .ngx-gallery-animation-slide .ngx-gallery-image.ngx-gallery-active { left: 0px; } .ngx-gallery-animation-slide .ngx-gallery-image.ngx-gallery-inactive-left { left: -100%; } .ngx-gallery-animation-slide .ngx-gallery-image.ngx-gallery-inactive-right { left: 100%; } .ngx-gallery-animation-rotate .ngx-gallery-image { transition: 1s ease; transform: scale(3.5, 3.5) rotate(90deg); left: 0px; opacity: 0; } .ngx-gallery-animation-rotate .ngx-gallery-image.ngx-gallery-active { transform: scale(1, 1) rotate(0deg); opacity: 1; } .ngx-gallery-animation-zoom .ngx-gallery-image { transition: 1s ease; transform: scale(2.5, 2.5); left: 0px; opacity: 0; } .ngx-gallery-animation-zoom .ngx-gallery-image.ngx-gallery-active { transform: scale(1, 1); opacity: 1; } .ngx-gallery-image-text { width: 100%; background: rgba(0, 0, 0, 0.7); padding: 10px; text-align: center; color: white; font-size: 16px; position: absolute; bottom: 0px; z-index: 10; } "]
-                },] },
-    ];
     /**
      * @nocollapse
      */
@@ -457,6 +800,89 @@ var NgxGalleryImageComponent = /** @class */ (function () {
         'onMouseEnter': [{ type: core.HostListener, args: ['mouseenter',] },],
         'onMouseLeave': [{ type: core.HostListener, args: ['mouseleave',] },],
     };
+NgxGalleryImageComponent.ɵfac = function NgxGalleryImageComponent_Factory(t) { return new (t || NgxGalleryImageComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NgxGalleryHelperService)); };
+NgxGalleryImageComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgxGalleryImageComponent, selectors: [["ngx-gallery-image"]], hostBindings: function NgxGalleryImageComponent_HostBindings(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵlistener("mouseenter", function NgxGalleryImageComponent_mouseenter_HostBindingHandler() { return ctx.onMouseEnter(); })("mouseleave", function NgxGalleryImageComponent_mouseleave_HostBindingHandler() { return ctx.onMouseLeave(); });
+    } }, inputs: { arrows: "arrows", selectedIndex: "selectedIndex", images: "images", clickable: "clickable", arrowsAutoHide: "arrowsAutoHide", swipe: "swipe", animation: "animation", size: "size", arrowPrevIcon: "arrowPrevIcon", arrowNextIcon: "arrowNextIcon", autoPlay: "autoPlay", autoPlayInterval: "autoPlayInterval", autoPlayPauseOnHover: "autoPlayPauseOnHover", infinityMove: "infinityMove", lazyLoading: "lazyLoading", actions: "actions", descriptions: "descriptions", showDescription: "showDescription", bullets: "bullets" }, outputs: { onClick: "onClick", onActiveChange: "onActiveChange" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 10, vars: 7, consts: [["class", "ngx-gallery-image", 3, "ngClass", "background-image", "click", 4, "ngFor", "ngForOf"], [3, "count", "active", "onChange", 4, "ngIf"], [3, "class", "prevDisabled", "nextDisabled", "arrowPrevIcon", "arrowNextIcon", "onPrevClick", "onNextClick", 4, "ngIf"], [1, "ngx-gallery-image", 3, "ngClass", "click"], [1, "ngx-gallery-icons-wrapper"], [3, "icon", "disabled", "titleText", "onClick", 4, "ngFor", "ngForOf"], ["class", "ngx-gallery-image-text", 3, "innerHTML", "click", 4, "ngIf"], [3, "icon", "disabled", "titleText", "onClick"], [1, "ngx-gallery-image-text", 3, "innerHTML", "click"], [3, "count", "active", "onChange"], [3, "prevDisabled", "nextDisabled", "arrowPrevIcon", "arrowNextIcon", "onPrevClick", "onNextClick"]], template: function NgxGalleryImageComponent_Template(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵtext(0, "\n        ");
+        ɵngcc0.ɵɵelementStart(1, "div");
+        ɵngcc0.ɵɵtext(2, "\n            ");
+        ɵngcc0.ɵɵtemplate(3, NgxGalleryImageComponent_div_3_Template, 9, 10, "div", 0);
+        ɵngcc0.ɵɵtext(4, "\n        ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(5, "\n        ");
+        ɵngcc0.ɵɵtemplate(6, NgxGalleryImageComponent_ngx_gallery_bullets_6_Template, 1, 2, "ngx-gallery-bullets", 1);
+        ɵngcc0.ɵɵtext(7, "\n        ");
+        ɵngcc0.ɵɵtemplate(8, NgxGalleryImageComponent_ngx_gallery_arrows_8_Template, 1, 7, "ngx-gallery-arrows", 2);
+        ɵngcc0.ɵɵtext(9, "\n    ");
+    } if (rf & 2) {
+        ɵngcc0.ɵɵadvance(1);
+        ɵngcc0.ɵɵclassMapInterpolate2("ngx-gallery-image-wrapper ngx-gallery-animation-", ctx.animation, " ngx-gallery-image-size-", ctx.size, "");
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngForOf", ctx.getImages());
+        ɵngcc0.ɵɵadvance(3);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.bullets);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.arrows);
+    } }, directives: [ɵngcc1.NgForOf, ɵngcc1.NgIf, ɵngcc1.NgClass, NgxGalleryActionComponent,
+        NgxGalleryBulletsComponent,
+        NgxGalleryArrowsComponent], styles: ["[_nghost-%COMP%] { width: 100%; display: inline-block; position: relative; } .ngx-gallery-image-wrapper[_ngcontent-%COMP%] { width: 100%; height: 100%; position: absolute; left: 0px; top: 0px; overflow: hidden; } .ngx-gallery-image[_ngcontent-%COMP%] { background-position: center; background-repeat: no-repeat; height: 100%; width: 100%; position: absolute; top: 0px; } .ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%] { z-index: 1000; } .ngx-gallery-image-size-cover[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%] { background-size: cover; } .ngx-gallery-image-size-contain[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%] { background-size: contain; } .ngx-gallery-animation-fade[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%] { left: 0px; opacity: 0; transition: 0.5s ease-in-out; } .ngx-gallery-animation-fade[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%] { opacity: 1; } .ngx-gallery-animation-slide[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%] { transition: 0.5s ease-in-out; } .ngx-gallery-animation-slide[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%] { left: 0px; } .ngx-gallery-animation-slide[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-inactive-left[_ngcontent-%COMP%] { left: -100%; } .ngx-gallery-animation-slide[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-inactive-right[_ngcontent-%COMP%] { left: 100%; } .ngx-gallery-animation-rotate[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%] { transition: 1s ease; transform: scale(3.5, 3.5) rotate(90deg); left: 0px; opacity: 0; } .ngx-gallery-animation-rotate[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%] { transform: scale(1, 1) rotate(0deg); opacity: 1; } .ngx-gallery-animation-zoom[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%] { transition: 1s ease; transform: scale(2.5, 2.5); left: 0px; opacity: 0; } .ngx-gallery-animation-zoom[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%] { transform: scale(1, 1); opacity: 1; } .ngx-gallery-image-text[_ngcontent-%COMP%] { width: 100%; background: rgba(0, 0, 0, 0.7); padding: 10px; text-align: center; color: white; font-size: 16px; position: absolute; bottom: 0px; z-index: 10; }"] });
+/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxGalleryImageComponent, [{
+        type: core.Component,
+        args: [{
+                selector: 'ngx-gallery-image',
+                template: "\n        <div class=\"ngx-gallery-image-wrapper ngx-gallery-animation-{{animation}} ngx-gallery-image-size-{{size}}\">\n            <div class=\"ngx-gallery-image\" *ngFor=\"let image of getImages(); let i = index;\" [ngClass]=\"{ 'ngx-gallery-active': selectedIndex == image.index, 'ngx-gallery-inactive-left': selectedIndex > image.index, 'ngx-gallery-inactive-right': selectedIndex < image.index, 'ngx-gallery-clickable': clickable }\" [style.background-image]=\"getSafeUrl(image.src)\" (click)=\"handleClick($event, image.index)\">\n                <div class=\"ngx-gallery-icons-wrapper\">\n                    <ngx-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, image.index)\"></ngx-gallery-action>\n                </div>\n                <div class=\"ngx-gallery-image-text\" *ngIf=\"showDescription && descriptions[image.index]\" [innerHTML]=\"descriptions[image.index]\" (click)=\"$event.stopPropagation()\"></div>\n            </div>\n        </div>\n        <ngx-gallery-bullets *ngIf=\"bullets\" [count]=\"images.length\" [active]=\"selectedIndex\" (onChange)=\"show($event)\"></ngx-gallery-bullets>\n        <ngx-gallery-arrows class=\"ngx-gallery-image-size-{{size}}\" *ngIf=\"arrows\" (onPrevClick)=\"showPrev()\" (onNextClick)=\"showNext()\" [prevDisabled]=\"!canShowPrev()\" [nextDisabled]=\"!canShowNext()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></ngx-gallery-arrows>\n    ",
+                styles: [":host { width: 100%; display: inline-block; position: relative; } .ngx-gallery-image-wrapper { width: 100%; height: 100%; position: absolute; left: 0px; top: 0px; overflow: hidden; } .ngx-gallery-image { background-position: center; background-repeat: no-repeat; height: 100%; width: 100%; position: absolute; top: 0px; } .ngx-gallery-image.ngx-gallery-active { z-index: 1000; } .ngx-gallery-image-size-cover .ngx-gallery-image { background-size: cover; } .ngx-gallery-image-size-contain .ngx-gallery-image { background-size: contain; } .ngx-gallery-animation-fade .ngx-gallery-image { left: 0px; opacity: 0; transition: 0.5s ease-in-out; } .ngx-gallery-animation-fade .ngx-gallery-image.ngx-gallery-active { opacity: 1; } .ngx-gallery-animation-slide .ngx-gallery-image { transition: 0.5s ease-in-out; } .ngx-gallery-animation-slide .ngx-gallery-image.ngx-gallery-active { left: 0px; } .ngx-gallery-animation-slide .ngx-gallery-image.ngx-gallery-inactive-left { left: -100%; } .ngx-gallery-animation-slide .ngx-gallery-image.ngx-gallery-inactive-right { left: 100%; } .ngx-gallery-animation-rotate .ngx-gallery-image { transition: 1s ease; transform: scale(3.5, 3.5) rotate(90deg); left: 0px; opacity: 0; } .ngx-gallery-animation-rotate .ngx-gallery-image.ngx-gallery-active { transform: scale(1, 1) rotate(0deg); opacity: 1; } .ngx-gallery-animation-zoom .ngx-gallery-image { transition: 1s ease; transform: scale(2.5, 2.5); left: 0px; opacity: 0; } .ngx-gallery-animation-zoom .ngx-gallery-image.ngx-gallery-active { transform: scale(1, 1); opacity: 1; } .ngx-gallery-image-text { width: 100%; background: rgba(0, 0, 0, 0.7); padding: 10px; text-align: center; color: white; font-size: 16px; position: absolute; bottom: 0px; z-index: 10; } "]
+            }]
+    }], function () { return [{ type: ɵngcc2.DomSanitizer }, { type: ɵngcc0.ElementRef }, { type: NgxGalleryHelperService }]; }, { onClick: [{
+            type: core.Output
+        }], onActiveChange: [{
+            type: core.Output
+        }], arrows: [{
+            type: core.Input
+        }], onMouseEnter: [{
+            type: core.HostListener,
+            args: ['mouseenter']
+        }], onMouseLeave: [{
+            type: core.HostListener,
+            args: ['mouseleave']
+        }], selectedIndex: [{
+            type: core.Input
+        }], images: [{
+            type: core.Input
+        }], clickable: [{
+            type: core.Input
+        }], arrowsAutoHide: [{
+            type: core.Input
+        }], swipe: [{
+            type: core.Input
+        }], animation: [{
+            type: core.Input
+        }], size: [{
+            type: core.Input
+        }], arrowPrevIcon: [{
+            type: core.Input
+        }], arrowNextIcon: [{
+            type: core.Input
+        }], autoPlay: [{
+            type: core.Input
+        }], autoPlayInterval: [{
+            type: core.Input
+        }], autoPlayPauseOnHover: [{
+            type: core.Input
+        }], infinityMove: [{
+            type: core.Input
+        }], lazyLoading: [{
+            type: core.Input
+        }], actions: [{
+            type: core.Input
+        }], descriptions: [{
+            type: core.Input
+        }], showDescription: [{
+            type: core.Input
+        }], bullets: [{
+            type: core.Input
+        }] }); })();
     return NgxGalleryImageComponent;
 }());
 
@@ -773,13 +1199,6 @@ var NgxGalleryThumbnailsComponent = /** @class */ (function () {
     NgxGalleryThumbnailsComponent.prototype.getSafeStyle = function (value) {
         return this.sanitization.bypassSecurityTrustStyle(value);
     };
-    NgxGalleryThumbnailsComponent.decorators = [
-        { type: core.Component, args: [{
-                    selector: 'ngx-gallery-thumbnails',
-                    template: "\n    <div class=\"ngx-gallery-thumbnails-wrapper ngx-gallery-thumbnail-size-{{size}}\">\n        <div class=\"ngx-gallery-thumbnails\" [style.transform]=\"'translateX(' + thumbnailsLeft + ')'\" [style.marginLeft]=\"thumbnailsMarginLeft\">\n            <a [href]=\"hasLink(i) ? links[i] : '#'\" [target]=\"linkTarget\" class=\"ngx-gallery-thumbnail\" *ngFor=\"let image of getImages(); let i = index;\" [style.background-image]=\"getSafeUrl(image)\" (click)=\"handleClick($event, i)\" [style.width]=\"getThumbnailWidth()\" [style.height]=\"getThumbnailHeight()\" [style.left]=\"getThumbnailLeft(i)\" [style.top]=\"getThumbnailTop(i)\" [ngClass]=\"{ 'ngx-gallery-active': i == selectedIndex, 'ngx-gallery-clickable': clickable }\" [attr.aria-label]=\"labels[i]\">\n                <div class=\"ngx-gallery-icons-wrapper\">\n                    <ngx-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, i)\"></ngx-gallery-action>\n                </div>\n                <div class=\"ngx-gallery-remaining-count-overlay\" *ngIf=\"remainingCount && remainingCountValue && (i == (rows * columns) - 1)\">\n                    <span class=\"ngx-gallery-remaining-count\">+{{remainingCountValue}}</span>\n                </div>\n            </a>\n        </div>\n    </div>\n    <ngx-gallery-arrows *ngIf=\"canShowArrows()\" (onPrevClick)=\"moveLeft()\" (onNextClick)=\"moveRight()\" [prevDisabled]=\"!canMoveLeft()\" [nextDisabled]=\"!canMoveRight()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></ngx-gallery-arrows>\n    ",
-                    styles: [":host { width: 100%; display: inline-block; position: relative; } .ngx-gallery-thumbnails-wrapper { width: 100%; height: 100%; position: absolute; overflow: hidden; } .ngx-gallery-thumbnails { height: 100%; width: 100%; position: absolute; left: 0px; transform: translateX(0); transition: transform 0.5s ease-in-out; will-change: transform; } .ngx-gallery-thumbnails .ngx-gallery-thumbnail { position: absolute; height: 100%; background-position: center; background-repeat: no-repeat; text-decoration: none; } .ngx-gallery-thumbnail-size-cover .ngx-gallery-thumbnails .ngx-gallery-thumbnail { background-size: cover; } .ngx-gallery-thumbnail-size-contain .ngx-gallery-thumbnails .ngx-gallery-thumbnail { background-size: contain; } .ngx-gallery-remaining-count-overlay { width: 100%; height: 100%; position: absolute; left: 0px; top: 0px; background-color: rgba(0, 0, 0, 0.4); } .ngx-gallery-remaining-count { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 30px; } "]
-                },] },
-    ];
     /**
      * @nocollapse
      */
@@ -813,6 +1232,90 @@ var NgxGalleryThumbnailsComponent = /** @class */ (function () {
         'onMouseEnter': [{ type: core.HostListener, args: ['mouseenter',] },],
         'onMouseLeave': [{ type: core.HostListener, args: ['mouseleave',] },],
     };
+NgxGalleryThumbnailsComponent.ɵfac = function NgxGalleryThumbnailsComponent_Factory(t) { return new (t || NgxGalleryThumbnailsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NgxGalleryHelperService)); };
+NgxGalleryThumbnailsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgxGalleryThumbnailsComponent, selectors: [["ngx-gallery-thumbnails"]], hostBindings: function NgxGalleryThumbnailsComponent_HostBindings(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵlistener("mouseenter", function NgxGalleryThumbnailsComponent_mouseenter_HostBindingHandler() { return ctx.onMouseEnter(); })("mouseleave", function NgxGalleryThumbnailsComponent_mouseleave_HostBindingHandler() { return ctx.onMouseLeave(); });
+    } }, inputs: { selectedIndex: "selectedIndex", images: "images", links: "links", labels: "labels", linkTarget: "linkTarget", columns: "columns", rows: "rows", arrows: "arrows", arrowsAutoHide: "arrowsAutoHide", margin: "margin", clickable: "clickable", swipe: "swipe", size: "size", arrowPrevIcon: "arrowPrevIcon", arrowNextIcon: "arrowNextIcon", moveSize: "moveSize", order: "order", remainingCount: "remainingCount", lazyLoading: "lazyLoading", actions: "actions" }, outputs: { onActiveChange: "onActiveChange" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 11, vars: 9, consts: [[1, "ngx-gallery-thumbnails"], ["class", "ngx-gallery-thumbnail", 3, "href", "target", "background-image", "width", "height", "left", "top", "ngClass", "click", 4, "ngFor", "ngForOf"], [3, "prevDisabled", "nextDisabled", "arrowPrevIcon", "arrowNextIcon", "onPrevClick", "onNextClick", 4, "ngIf"], [1, "ngx-gallery-thumbnail", 3, "href", "target", "ngClass", "click"], [1, "ngx-gallery-icons-wrapper"], [3, "icon", "disabled", "titleText", "onClick", 4, "ngFor", "ngForOf"], ["class", "ngx-gallery-remaining-count-overlay", 4, "ngIf"], [3, "icon", "disabled", "titleText", "onClick"], [1, "ngx-gallery-remaining-count-overlay"], [1, "ngx-gallery-remaining-count"], [3, "prevDisabled", "nextDisabled", "arrowPrevIcon", "arrowNextIcon", "onPrevClick", "onNextClick"]], template: function NgxGalleryThumbnailsComponent_Template(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵtext(0, "\n    ");
+        ɵngcc0.ɵɵelementStart(1, "div");
+        ɵngcc0.ɵɵtext(2, "\n        ");
+        ɵngcc0.ɵɵelementStart(3, "div", 0);
+        ɵngcc0.ɵɵtext(4, "\n            ");
+        ɵngcc0.ɵɵtemplate(5, NgxGalleryThumbnailsComponent_a_5_Template, 9, 19, "a", 1);
+        ɵngcc0.ɵɵtext(6, "\n        ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(7, "\n    ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(8, "\n    ");
+        ɵngcc0.ɵɵtemplate(9, NgxGalleryThumbnailsComponent_ngx_gallery_arrows_9_Template, 1, 4, "ngx-gallery-arrows", 2);
+        ɵngcc0.ɵɵtext(10, "\n    ");
+    } if (rf & 2) {
+        ɵngcc0.ɵɵadvance(1);
+        ɵngcc0.ɵɵclassMapInterpolate1("ngx-gallery-thumbnails-wrapper ngx-gallery-thumbnail-size-", ctx.size, "");
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵstyleProp("transform", "translateX(" + ctx.thumbnailsLeft + ")")("margin-left", ctx.thumbnailsMarginLeft);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngForOf", ctx.getImages());
+        ɵngcc0.ɵɵadvance(4);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.canShowArrows());
+    } }, directives: [ɵngcc1.NgForOf, ɵngcc1.NgIf, ɵngcc1.NgClass, NgxGalleryActionComponent,
+        NgxGalleryArrowsComponent], styles: ["[_nghost-%COMP%] { width: 100%; display: inline-block; position: relative; } .ngx-gallery-thumbnails-wrapper[_ngcontent-%COMP%] { width: 100%; height: 100%; position: absolute; overflow: hidden; } .ngx-gallery-thumbnails[_ngcontent-%COMP%] { height: 100%; width: 100%; position: absolute; left: 0px; transform: translateX(0); transition: transform 0.5s ease-in-out; will-change: transform; } .ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%] { position: absolute; height: 100%; background-position: center; background-repeat: no-repeat; text-decoration: none; } .ngx-gallery-thumbnail-size-cover[_ngcontent-%COMP%]   .ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%] { background-size: cover; } .ngx-gallery-thumbnail-size-contain[_ngcontent-%COMP%]   .ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%] { background-size: contain; } .ngx-gallery-remaining-count-overlay[_ngcontent-%COMP%] { width: 100%; height: 100%; position: absolute; left: 0px; top: 0px; background-color: rgba(0, 0, 0, 0.4); } .ngx-gallery-remaining-count[_ngcontent-%COMP%] { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 30px; }"] });
+/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxGalleryThumbnailsComponent, [{
+        type: core.Component,
+        args: [{
+                selector: 'ngx-gallery-thumbnails',
+                template: "\n    <div class=\"ngx-gallery-thumbnails-wrapper ngx-gallery-thumbnail-size-{{size}}\">\n        <div class=\"ngx-gallery-thumbnails\" [style.transform]=\"'translateX(' + thumbnailsLeft + ')'\" [style.marginLeft]=\"thumbnailsMarginLeft\">\n            <a [href]=\"hasLink(i) ? links[i] : '#'\" [target]=\"linkTarget\" class=\"ngx-gallery-thumbnail\" *ngFor=\"let image of getImages(); let i = index;\" [style.background-image]=\"getSafeUrl(image)\" (click)=\"handleClick($event, i)\" [style.width]=\"getThumbnailWidth()\" [style.height]=\"getThumbnailHeight()\" [style.left]=\"getThumbnailLeft(i)\" [style.top]=\"getThumbnailTop(i)\" [ngClass]=\"{ 'ngx-gallery-active': i == selectedIndex, 'ngx-gallery-clickable': clickable }\" [attr.aria-label]=\"labels[i]\">\n                <div class=\"ngx-gallery-icons-wrapper\">\n                    <ngx-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, i)\"></ngx-gallery-action>\n                </div>\n                <div class=\"ngx-gallery-remaining-count-overlay\" *ngIf=\"remainingCount && remainingCountValue && (i == (rows * columns) - 1)\">\n                    <span class=\"ngx-gallery-remaining-count\">+{{remainingCountValue}}</span>\n                </div>\n            </a>\n        </div>\n    </div>\n    <ngx-gallery-arrows *ngIf=\"canShowArrows()\" (onPrevClick)=\"moveLeft()\" (onNextClick)=\"moveRight()\" [prevDisabled]=\"!canMoveLeft()\" [nextDisabled]=\"!canMoveRight()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></ngx-gallery-arrows>\n    ",
+                styles: [":host { width: 100%; display: inline-block; position: relative; } .ngx-gallery-thumbnails-wrapper { width: 100%; height: 100%; position: absolute; overflow: hidden; } .ngx-gallery-thumbnails { height: 100%; width: 100%; position: absolute; left: 0px; transform: translateX(0); transition: transform 0.5s ease-in-out; will-change: transform; } .ngx-gallery-thumbnails .ngx-gallery-thumbnail { position: absolute; height: 100%; background-position: center; background-repeat: no-repeat; text-decoration: none; } .ngx-gallery-thumbnail-size-cover .ngx-gallery-thumbnails .ngx-gallery-thumbnail { background-size: cover; } .ngx-gallery-thumbnail-size-contain .ngx-gallery-thumbnails .ngx-gallery-thumbnail { background-size: contain; } .ngx-gallery-remaining-count-overlay { width: 100%; height: 100%; position: absolute; left: 0px; top: 0px; background-color: rgba(0, 0, 0, 0.4); } .ngx-gallery-remaining-count { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 30px; } "]
+            }]
+    }], function () { return [{ type: ɵngcc2.DomSanitizer }, { type: ɵngcc0.ElementRef }, { type: NgxGalleryHelperService }]; }, { onActiveChange: [{
+            type: core.Output
+        }], onMouseEnter: [{
+            type: core.HostListener,
+            args: ['mouseenter']
+        }], onMouseLeave: [{
+            type: core.HostListener,
+            args: ['mouseleave']
+        }], selectedIndex: [{
+            type: core.Input
+        }], images: [{
+            type: core.Input
+        }], links: [{
+            type: core.Input
+        }], labels: [{
+            type: core.Input
+        }], linkTarget: [{
+            type: core.Input
+        }], columns: [{
+            type: core.Input
+        }], rows: [{
+            type: core.Input
+        }], arrows: [{
+            type: core.Input
+        }], arrowsAutoHide: [{
+            type: core.Input
+        }], margin: [{
+            type: core.Input
+        }], clickable: [{
+            type: core.Input
+        }], swipe: [{
+            type: core.Input
+        }], size: [{
+            type: core.Input
+        }], arrowPrevIcon: [{
+            type: core.Input
+        }], arrowNextIcon: [{
+            type: core.Input
+        }], moveSize: [{
+            type: core.Input
+        }], order: [{
+            type: core.Input
+        }], remainingCount: [{
+            type: core.Input
+        }], lazyLoading: [{
+            type: core.Input
+        }], actions: [{
+            type: core.Input
+        }] }); })();
     return NgxGalleryThumbnailsComponent;
 }());
 
@@ -1308,13 +1811,6 @@ var NgxGalleryPreviewComponent = /** @class */ (function () {
         }
         return true;
     };
-    NgxGalleryPreviewComponent.decorators = [
-        { type: core.Component, args: [{
-                    selector: 'ngx-gallery-preview',
-                    template: "\n        <ngx-gallery-arrows *ngIf=\"arrows\" (onPrevClick)=\"showPrev()\" (onNextClick)=\"showNext()\" [prevDisabled]=\"!canShowPrev()\" [nextDisabled]=\"!canShowNext()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></ngx-gallery-arrows>\n        <div class=\"ngx-gallery-preview-top\">\n            <div class=\"ngx-gallery-preview-icons\">\n                <ngx-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, index)\"></ngx-gallery-action>\n                <a *ngIf=\"download && src\" [href]=\"src\" class=\"ngx-gallery-icon\" aria-hidden=\"true\" download>\n                    <i class=\"ngx-gallery-icon-content {{ downloadIcon }}\"></i>\n                </a>\n                <ngx-gallery-action *ngIf=\"zoom\" [icon]=\"zoomOutIcon\" [disabled]=\"!canZoomOut()\" (onClick)=\"zoomOut()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"zoom\" [icon]=\"zoomInIcon\" [disabled]=\"!canZoomIn()\" (onClick)=\"zoomIn()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"rotate\" [icon]=\"rotateLeftIcon\" (onClick)=\"rotateLeft()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"rotate\" [icon]=\"rotateRightIcon\" (onClick)=\"rotateRight()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"fullscreen\" [icon]=\"'ngx-gallery-fullscreen ' + fullscreenIcon\" (onClick)=\"manageFullscreen()\"></ngx-gallery-action>\n                <ngx-gallery-action [icon]=\"'ngx-gallery-close ' + closeIcon\" (onClick)=\"close()\"></ngx-gallery-action>\n            </div>\n        </div>\n        <div class=\"ngx-spinner-wrapper ngx-gallery-center\" [class.ngx-gallery-active]=\"showSpinner\">\n            <i class=\"ngx-gallery-icon ngx-gallery-spinner {{spinnerIcon}}\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"ngx-gallery-preview-wrapper\" (click)=\"closeOnClick && close()\" (mouseup)=\"mouseUpHandler($event)\" (mousemove)=\"mouseMoveHandler($event)\" (touchend)=\"mouseUpHandler($event)\" (touchmove)=\"mouseMoveHandler($event)\">\n            <div class=\"ngx-gallery-preview-img-wrapper\">\n                <img *ngIf=\"src\" #previewImage class=\"ngx-gallery-preview-img ngx-gallery-center\" [src]=\"src\" (click)=\"$event.stopPropagation()\" (mouseenter)=\"imageMouseEnter()\" (mouseleave)=\"imageMouseLeave()\" (mousedown)=\"mouseDownHandler($event)\" (touchstart)=\"mouseDownHandler($event)\" [class.ngx-gallery-active]=\"!loading\" [class.animation]=\"animation\" [class.ngx-gallery-grab]=\"canDragOnZoom()\" [style.transform]=\"getTransform()\" [style.left]=\"positionLeft + 'px'\" [style.top]=\"positionTop + 'px'\"/>\n                <ngx-gallery-bullets *ngIf=\"bullets\" [count]=\"images.length\" [active]=\"index\" (onChange)=\"showAtIndex($event)\"></ngx-gallery-bullets>\n            </div>\n            <div class=\"ngx-gallery-preview-text\" *ngIf=\"showDescription && description\" [innerHTML]=\"description\" (click)=\"$event.stopPropagation()\"></div>\n        </div>\n    ",
-                    styles: [":host(.ngx-gallery-active) { width: 100%; height: 100%; position: fixed; left: 0; top: 0; background: rgba(0, 0, 0, 0.7); z-index: 10000; display: inline-block; } :host { display: none; } :host /deep/ .ngx-gallery-arrow { font-size: 50px; } :host /deep/ ngx-gallery-bullets { height: 5%; align-items: center; padding: 0px; } .ngx-gallery-preview-img { opacity: 0; max-width: 90%; max-height: 90%; user-select: none; transition: transform .5s; } .ngx-gallery-preview-img.animation { transition: opacity 0.5s linear, transform .5s; } .ngx-gallery-preview-img.ngx-gallery-active { opacity: 1; } .ngx-gallery-preview-img.ngx-gallery-grab { cursor: grab; cursor: -webkit-grab; } .ngx-gallery-icon.ngx-gallery-spinner { font-size: 50px; left: 0; display: inline-block; } :host /deep/ .ngx-gallery-preview-top { position: absolute; width: 100%; user-select: none; } :host /deep/ .ngx-gallery-preview-icons { float: right; } :host /deep/ .ngx-gallery-preview-icons .ngx-gallery-icon { position: relative; margin-right: 10px; margin-top: 10px; font-size: 25px; cursor: pointer; text-decoration: none; } :host /deep/ .ngx-gallery-preview-icons .ngx-gallery-icon.ngx-gallery-icon-disabled { cursor: default; opacity: 0.4; } .ngx-spinner-wrapper { width: 50px; height: 50px; display: none; } .ngx-spinner-wrapper.ngx-gallery-active { display: inline-block; } .ngx-gallery-center { position: absolute; left: 0; right: 0; bottom: 0; margin: auto; top: 0; } .ngx-gallery-preview-text { width: 100%; background: rgba(0, 0, 0, 0.7); padding: 10px; text-align: center; color: white; font-size: 16px; flex: 0 1 auto; z-index: 10; } .ngx-gallery-preview-wrapper { width: 100%; height: 100%; display: flex; flex-flow: column; } .ngx-gallery-preview-img-wrapper { flex: 1 1 auto; position: relative; } "]
-                },] },
-    ];
     /**
      * @nocollapse
      */
@@ -1367,6 +1863,188 @@ var NgxGalleryPreviewComponent = /** @class */ (function () {
         'onMouseEnter': [{ type: core.HostListener, args: ['mouseenter',] },],
         'onMouseLeave': [{ type: core.HostListener, args: ['mouseleave',] },],
     };
+NgxGalleryPreviewComponent.ɵfac = function NgxGalleryPreviewComponent_Factory(t) { return new (t || NgxGalleryPreviewComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NgxGalleryHelperService), ɵngcc0.ɵɵdirectiveInject(core.Renderer), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
+NgxGalleryPreviewComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgxGalleryPreviewComponent, selectors: [["ngx-gallery-preview"]], viewQuery: function NgxGalleryPreviewComponent_Query(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵviewQuery(_c3, true);
+    } if (rf & 2) {
+        var _t;
+        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.previewImage = _t.first);
+    } }, hostBindings: function NgxGalleryPreviewComponent_HostBindings(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵlistener("mouseenter", function NgxGalleryPreviewComponent_mouseenter_HostBindingHandler() { return ctx.onMouseEnter(); })("mouseleave", function NgxGalleryPreviewComponent_mouseleave_HostBindingHandler() { return ctx.onMouseLeave(); });
+    } }, inputs: { arrows: "arrows", images: "images", descriptions: "descriptions", showDescription: "showDescription", arrowsAutoHide: "arrowsAutoHide", swipe: "swipe", fullscreen: "fullscreen", forceFullscreen: "forceFullscreen", closeOnClick: "closeOnClick", closeOnEsc: "closeOnEsc", keyboardNavigation: "keyboardNavigation", arrowPrevIcon: "arrowPrevIcon", arrowNextIcon: "arrowNextIcon", closeIcon: "closeIcon", fullscreenIcon: "fullscreenIcon", spinnerIcon: "spinnerIcon", autoPlay: "autoPlay", autoPlayInterval: "autoPlayInterval", autoPlayPauseOnHover: "autoPlayPauseOnHover", infinityMove: "infinityMove", zoom: "zoom", zoomStep: "zoomStep", zoomMax: "zoomMax", zoomMin: "zoomMin", zoomInIcon: "zoomInIcon", zoomOutIcon: "zoomOutIcon", animation: "animation", actions: "actions", rotate: "rotate", rotateLeftIcon: "rotateLeftIcon", rotateRightIcon: "rotateRightIcon", download: "download", downloadIcon: "downloadIcon", bullets: "bullets" }, outputs: { onOpen: "onOpen", onClose: "onClose", onActiveChange: "onActiveChange" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 42, vars: 17, consts: [[3, "prevDisabled", "nextDisabled", "arrowPrevIcon", "arrowNextIcon", "onPrevClick", "onNextClick", 4, "ngIf"], [1, "ngx-gallery-preview-top"], [1, "ngx-gallery-preview-icons"], [3, "icon", "disabled", "titleText", "onClick", 4, "ngFor", "ngForOf"], ["class", "ngx-gallery-icon", "aria-hidden", "true", "download", "", 3, "href", 4, "ngIf"], [3, "icon", "disabled", "onClick", 4, "ngIf"], [3, "icon", "onClick", 4, "ngIf"], [3, "icon", "onClick"], [1, "ngx-spinner-wrapper", "ngx-gallery-center"], ["aria-hidden", "true"], [1, "ngx-gallery-preview-wrapper", 3, "click", "mouseup", "mousemove", "touchend", "touchmove"], [1, "ngx-gallery-preview-img-wrapper"], ["class", "ngx-gallery-preview-img ngx-gallery-center", 3, "src", "ngx-gallery-active", "animation", "ngx-gallery-grab", "transform", "left", "top", "click", "mouseenter", "mouseleave", "mousedown", "touchstart", 4, "ngIf"], [3, "count", "active", "onChange", 4, "ngIf"], ["class", "ngx-gallery-preview-text", 3, "innerHTML", "click", 4, "ngIf"], [3, "prevDisabled", "nextDisabled", "arrowPrevIcon", "arrowNextIcon", "onPrevClick", "onNextClick"], [3, "icon", "disabled", "titleText", "onClick"], ["aria-hidden", "true", "download", "", 1, "ngx-gallery-icon", 3, "href"], [3, "icon", "disabled", "onClick"], [1, "ngx-gallery-preview-img", "ngx-gallery-center", 3, "src", "click", "mouseenter", "mouseleave", "mousedown", "touchstart"], ["previewImage", ""], [3, "count", "active", "onChange"], [1, "ngx-gallery-preview-text", 3, "innerHTML", "click"]], template: function NgxGalleryPreviewComponent_Template(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵtext(0, "\n        ");
+        ɵngcc0.ɵɵtemplate(1, NgxGalleryPreviewComponent_ngx_gallery_arrows_1_Template, 1, 4, "ngx-gallery-arrows", 0);
+        ɵngcc0.ɵɵtext(2, "\n        ");
+        ɵngcc0.ɵɵelementStart(3, "div", 1);
+        ɵngcc0.ɵɵtext(4, "\n            ");
+        ɵngcc0.ɵɵelementStart(5, "div", 2);
+        ɵngcc0.ɵɵtext(6, "\n                ");
+        ɵngcc0.ɵɵtemplate(7, NgxGalleryPreviewComponent_ngx_gallery_action_7_Template, 1, 3, "ngx-gallery-action", 3);
+        ɵngcc0.ɵɵtext(8, "\n                ");
+        ɵngcc0.ɵɵtemplate(9, NgxGalleryPreviewComponent_a_9_Template, 4, 4, "a", 4);
+        ɵngcc0.ɵɵtext(10, "\n                ");
+        ɵngcc0.ɵɵtemplate(11, NgxGalleryPreviewComponent_ngx_gallery_action_11_Template, 1, 2, "ngx-gallery-action", 5);
+        ɵngcc0.ɵɵtext(12, "\n                ");
+        ɵngcc0.ɵɵtemplate(13, NgxGalleryPreviewComponent_ngx_gallery_action_13_Template, 1, 2, "ngx-gallery-action", 5);
+        ɵngcc0.ɵɵtext(14, "\n                ");
+        ɵngcc0.ɵɵtemplate(15, NgxGalleryPreviewComponent_ngx_gallery_action_15_Template, 1, 1, "ngx-gallery-action", 6);
+        ɵngcc0.ɵɵtext(16, "\n                ");
+        ɵngcc0.ɵɵtemplate(17, NgxGalleryPreviewComponent_ngx_gallery_action_17_Template, 1, 1, "ngx-gallery-action", 6);
+        ɵngcc0.ɵɵtext(18, "\n                ");
+        ɵngcc0.ɵɵtemplate(19, NgxGalleryPreviewComponent_ngx_gallery_action_19_Template, 1, 1, "ngx-gallery-action", 6);
+        ɵngcc0.ɵɵtext(20, "\n                ");
+        ɵngcc0.ɵɵelementStart(21, "ngx-gallery-action", 7);
+        ɵngcc0.ɵɵlistener("onClick", function NgxGalleryPreviewComponent_Template_ngx_gallery_action_onClick_21_listener() { return ctx.close(); });
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(22, "\n            ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(23, "\n        ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(24, "\n        ");
+        ɵngcc0.ɵɵelementStart(25, "div", 8);
+        ɵngcc0.ɵɵtext(26, "\n            ");
+        ɵngcc0.ɵɵelement(27, "i", 9);
+        ɵngcc0.ɵɵtext(28, "\n        ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(29, "\n        ");
+        ɵngcc0.ɵɵelementStart(30, "div", 10);
+        ɵngcc0.ɵɵlistener("click", function NgxGalleryPreviewComponent_Template_div_click_30_listener() { return ctx.closeOnClick && ctx.close(); })("mouseup", function NgxGalleryPreviewComponent_Template_div_mouseup_30_listener($event) { return ctx.mouseUpHandler($event); })("mousemove", function NgxGalleryPreviewComponent_Template_div_mousemove_30_listener($event) { return ctx.mouseMoveHandler($event); })("touchend", function NgxGalleryPreviewComponent_Template_div_touchend_30_listener($event) { return ctx.mouseUpHandler($event); })("touchmove", function NgxGalleryPreviewComponent_Template_div_touchmove_30_listener($event) { return ctx.mouseMoveHandler($event); });
+        ɵngcc0.ɵɵtext(31, "\n            ");
+        ɵngcc0.ɵɵelementStart(32, "div", 11);
+        ɵngcc0.ɵɵtext(33, "\n                ");
+        ɵngcc0.ɵɵtemplate(34, NgxGalleryPreviewComponent_img_34_Template, 2, 13, "img", 12);
+        ɵngcc0.ɵɵtext(35, "\n                ");
+        ɵngcc0.ɵɵtemplate(36, NgxGalleryPreviewComponent_ngx_gallery_bullets_36_Template, 1, 2, "ngx-gallery-bullets", 13);
+        ɵngcc0.ɵɵtext(37, "\n            ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(38, "\n            ");
+        ɵngcc0.ɵɵtemplate(39, NgxGalleryPreviewComponent_div_39_Template, 1, 1, "div", 14);
+        ɵngcc0.ɵɵtext(40, "\n        ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(41, "\n    ");
+    } if (rf & 2) {
+        ɵngcc0.ɵɵadvance(1);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.arrows);
+        ɵngcc0.ɵɵadvance(6);
+        ɵngcc0.ɵɵproperty("ngForOf", ctx.actions);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.download && ctx.src);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.zoom);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.zoom);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.rotate);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.rotate);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.fullscreen);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("icon", "ngx-gallery-close " + ctx.closeIcon);
+        ɵngcc0.ɵɵadvance(4);
+        ɵngcc0.ɵɵclassProp("ngx-gallery-active", ctx.showSpinner);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵclassMapInterpolate1("ngx-gallery-icon ngx-gallery-spinner ", ctx.spinnerIcon, "");
+        ɵngcc0.ɵɵadvance(7);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.src);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.bullets);
+        ɵngcc0.ɵɵadvance(3);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.showDescription && ctx.description);
+    } }, directives: [ɵngcc1.NgIf, ɵngcc1.NgForOf, NgxGalleryActionComponent,
+        NgxGalleryArrowsComponent,
+        NgxGalleryBulletsComponent], styles: [".ngx-gallery-active[_nghost-%COMP%] { width: 100%; height: 100%; position: fixed; left: 0; top: 0; background: rgba(0, 0, 0, 0.7); z-index: 10000; display: inline-block; } [_nghost-%COMP%] { display: none; } [_nghost-%COMP%]     .ngx-gallery-arrow { font-size: 50px; } [_nghost-%COMP%]     ngx-gallery-bullets { height: 5%; align-items: center; padding: 0px; } .ngx-gallery-preview-img[_ngcontent-%COMP%] { opacity: 0; max-width: 90%; max-height: 90%; user-select: none; transition: transform .5s; } .ngx-gallery-preview-img.animation[_ngcontent-%COMP%] { transition: opacity 0.5s linear, transform .5s; } .ngx-gallery-preview-img.ngx-gallery-active[_ngcontent-%COMP%] { opacity: 1; } .ngx-gallery-preview-img.ngx-gallery-grab[_ngcontent-%COMP%] { cursor: grab; cursor: -webkit-grab; } .ngx-gallery-icon.ngx-gallery-spinner[_ngcontent-%COMP%] { font-size: 50px; left: 0; display: inline-block; } [_nghost-%COMP%]     .ngx-gallery-preview-top { position: absolute; width: 100%; user-select: none; } [_nghost-%COMP%]     .ngx-gallery-preview-icons { float: right; } [_nghost-%COMP%]     .ngx-gallery-preview-icons .ngx-gallery-icon { position: relative; margin-right: 10px; margin-top: 10px; font-size: 25px; cursor: pointer; text-decoration: none; } [_nghost-%COMP%]     .ngx-gallery-preview-icons .ngx-gallery-icon.ngx-gallery-icon-disabled { cursor: default; opacity: 0.4; } .ngx-spinner-wrapper[_ngcontent-%COMP%] { width: 50px; height: 50px; display: none; } .ngx-spinner-wrapper.ngx-gallery-active[_ngcontent-%COMP%] { display: inline-block; } .ngx-gallery-center[_ngcontent-%COMP%] { position: absolute; left: 0; right: 0; bottom: 0; margin: auto; top: 0; } .ngx-gallery-preview-text[_ngcontent-%COMP%] { width: 100%; background: rgba(0, 0, 0, 0.7); padding: 10px; text-align: center; color: white; font-size: 16px; flex: 0 1 auto; z-index: 10; } .ngx-gallery-preview-wrapper[_ngcontent-%COMP%] { width: 100%; height: 100%; display: flex; flex-flow: column; } .ngx-gallery-preview-img-wrapper[_ngcontent-%COMP%] { flex: 1 1 auto; position: relative; }"] });
+/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxGalleryPreviewComponent, [{
+        type: core.Component,
+        args: [{
+                selector: 'ngx-gallery-preview',
+                template: "\n        <ngx-gallery-arrows *ngIf=\"arrows\" (onPrevClick)=\"showPrev()\" (onNextClick)=\"showNext()\" [prevDisabled]=\"!canShowPrev()\" [nextDisabled]=\"!canShowNext()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></ngx-gallery-arrows>\n        <div class=\"ngx-gallery-preview-top\">\n            <div class=\"ngx-gallery-preview-icons\">\n                <ngx-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, index)\"></ngx-gallery-action>\n                <a *ngIf=\"download && src\" [href]=\"src\" class=\"ngx-gallery-icon\" aria-hidden=\"true\" download>\n                    <i class=\"ngx-gallery-icon-content {{ downloadIcon }}\"></i>\n                </a>\n                <ngx-gallery-action *ngIf=\"zoom\" [icon]=\"zoomOutIcon\" [disabled]=\"!canZoomOut()\" (onClick)=\"zoomOut()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"zoom\" [icon]=\"zoomInIcon\" [disabled]=\"!canZoomIn()\" (onClick)=\"zoomIn()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"rotate\" [icon]=\"rotateLeftIcon\" (onClick)=\"rotateLeft()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"rotate\" [icon]=\"rotateRightIcon\" (onClick)=\"rotateRight()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"fullscreen\" [icon]=\"'ngx-gallery-fullscreen ' + fullscreenIcon\" (onClick)=\"manageFullscreen()\"></ngx-gallery-action>\n                <ngx-gallery-action [icon]=\"'ngx-gallery-close ' + closeIcon\" (onClick)=\"close()\"></ngx-gallery-action>\n            </div>\n        </div>\n        <div class=\"ngx-spinner-wrapper ngx-gallery-center\" [class.ngx-gallery-active]=\"showSpinner\">\n            <i class=\"ngx-gallery-icon ngx-gallery-spinner {{spinnerIcon}}\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"ngx-gallery-preview-wrapper\" (click)=\"closeOnClick && close()\" (mouseup)=\"mouseUpHandler($event)\" (mousemove)=\"mouseMoveHandler($event)\" (touchend)=\"mouseUpHandler($event)\" (touchmove)=\"mouseMoveHandler($event)\">\n            <div class=\"ngx-gallery-preview-img-wrapper\">\n                <img *ngIf=\"src\" #previewImage class=\"ngx-gallery-preview-img ngx-gallery-center\" [src]=\"src\" (click)=\"$event.stopPropagation()\" (mouseenter)=\"imageMouseEnter()\" (mouseleave)=\"imageMouseLeave()\" (mousedown)=\"mouseDownHandler($event)\" (touchstart)=\"mouseDownHandler($event)\" [class.ngx-gallery-active]=\"!loading\" [class.animation]=\"animation\" [class.ngx-gallery-grab]=\"canDragOnZoom()\" [style.transform]=\"getTransform()\" [style.left]=\"positionLeft + 'px'\" [style.top]=\"positionTop + 'px'\"/>\n                <ngx-gallery-bullets *ngIf=\"bullets\" [count]=\"images.length\" [active]=\"index\" (onChange)=\"showAtIndex($event)\"></ngx-gallery-bullets>\n            </div>\n            <div class=\"ngx-gallery-preview-text\" *ngIf=\"showDescription && description\" [innerHTML]=\"description\" (click)=\"$event.stopPropagation()\"></div>\n        </div>\n    ",
+                styles: [":host(.ngx-gallery-active) { width: 100%; height: 100%; position: fixed; left: 0; top: 0; background: rgba(0, 0, 0, 0.7); z-index: 10000; display: inline-block; } :host { display: none; } :host /deep/ .ngx-gallery-arrow { font-size: 50px; } :host /deep/ ngx-gallery-bullets { height: 5%; align-items: center; padding: 0px; } .ngx-gallery-preview-img { opacity: 0; max-width: 90%; max-height: 90%; user-select: none; transition: transform .5s; } .ngx-gallery-preview-img.animation { transition: opacity 0.5s linear, transform .5s; } .ngx-gallery-preview-img.ngx-gallery-active { opacity: 1; } .ngx-gallery-preview-img.ngx-gallery-grab { cursor: grab; cursor: -webkit-grab; } .ngx-gallery-icon.ngx-gallery-spinner { font-size: 50px; left: 0; display: inline-block; } :host /deep/ .ngx-gallery-preview-top { position: absolute; width: 100%; user-select: none; } :host /deep/ .ngx-gallery-preview-icons { float: right; } :host /deep/ .ngx-gallery-preview-icons .ngx-gallery-icon { position: relative; margin-right: 10px; margin-top: 10px; font-size: 25px; cursor: pointer; text-decoration: none; } :host /deep/ .ngx-gallery-preview-icons .ngx-gallery-icon.ngx-gallery-icon-disabled { cursor: default; opacity: 0.4; } .ngx-spinner-wrapper { width: 50px; height: 50px; display: none; } .ngx-spinner-wrapper.ngx-gallery-active { display: inline-block; } .ngx-gallery-center { position: absolute; left: 0; right: 0; bottom: 0; margin: auto; top: 0; } .ngx-gallery-preview-text { width: 100%; background: rgba(0, 0, 0, 0.7); padding: 10px; text-align: center; color: white; font-size: 16px; flex: 0 1 auto; z-index: 10; } .ngx-gallery-preview-wrapper { width: 100%; height: 100%; display: flex; flex-flow: column; } .ngx-gallery-preview-img-wrapper { flex: 1 1 auto; position: relative; } "]
+            }]
+    }], function () { return [{ type: ɵngcc2.DomSanitizer }, { type: ɵngcc0.ElementRef }, { type: NgxGalleryHelperService }, { type: core.Renderer }, { type: ɵngcc0.ChangeDetectorRef }]; }, { onOpen: [{
+            type: core.Output
+        }], onClose: [{
+            type: core.Output
+        }], onActiveChange: [{
+            type: core.Output
+        }], arrows: [{
+            type: core.Input
+        }], onMouseEnter: [{
+            type: core.HostListener,
+            args: ['mouseenter']
+        }], onMouseLeave: [{
+            type: core.HostListener,
+            args: ['mouseleave']
+        }], images: [{
+            type: core.Input
+        }], descriptions: [{
+            type: core.Input
+        }], showDescription: [{
+            type: core.Input
+        }], arrowsAutoHide: [{
+            type: core.Input
+        }], swipe: [{
+            type: core.Input
+        }], fullscreen: [{
+            type: core.Input
+        }], forceFullscreen: [{
+            type: core.Input
+        }], closeOnClick: [{
+            type: core.Input
+        }], closeOnEsc: [{
+            type: core.Input
+        }], keyboardNavigation: [{
+            type: core.Input
+        }], arrowPrevIcon: [{
+            type: core.Input
+        }], arrowNextIcon: [{
+            type: core.Input
+        }], closeIcon: [{
+            type: core.Input
+        }], fullscreenIcon: [{
+            type: core.Input
+        }], spinnerIcon: [{
+            type: core.Input
+        }], autoPlay: [{
+            type: core.Input
+        }], autoPlayInterval: [{
+            type: core.Input
+        }], autoPlayPauseOnHover: [{
+            type: core.Input
+        }], infinityMove: [{
+            type: core.Input
+        }], zoom: [{
+            type: core.Input
+        }], zoomStep: [{
+            type: core.Input
+        }], zoomMax: [{
+            type: core.Input
+        }], zoomMin: [{
+            type: core.Input
+        }], zoomInIcon: [{
+            type: core.Input
+        }], zoomOutIcon: [{
+            type: core.Input
+        }], animation: [{
+            type: core.Input
+        }], actions: [{
+            type: core.Input
+        }], rotate: [{
+            type: core.Input
+        }], rotateLeftIcon: [{
+            type: core.Input
+        }], rotateRightIcon: [{
+            type: core.Input
+        }], download: [{
+            type: core.Input
+        }], downloadIcon: [{
+            type: core.Input
+        }], bullets: [{
+            type: core.Input
+        }], previewImage: [{
+            type: core.ViewChild,
+            args: ['previewImage']
+        }] }); })();
     return NgxGalleryPreviewComponent;
 }());
 
@@ -1834,14 +2512,6 @@ var NgxGalleryComponent = /** @class */ (function () {
     NgxGalleryComponent.prototype.combineOptions = function (first, second) {
         Object.keys(second).map(function (val) { return first[val] = second[val] !== undefined ? second[val] : first[val]; });
     };
-    NgxGalleryComponent.decorators = [
-        { type: core.Component, args: [{
-                    selector: 'ngx-gallery',
-                    template: "\n    <div class=\"ngx-gallery-layout {{currentOptions?.layout}}\">\n        <ngx-gallery-image *ngIf=\"currentOptions?.image\" [style.height]=\"getImageHeight()\" [images]=\"mediumImages\" [clickable]=\"currentOptions?.preview\" [selectedIndex]=\"selectedIndex\" [arrows]=\"currentOptions?.imageArrows\" [arrowsAutoHide]=\"currentOptions?.imageArrowsAutoHide\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [swipe]=\"currentOptions?.imageSwipe\" [animation]=\"currentOptions?.imageAnimation\" [size]=\"currentOptions?.imageSize\" [autoPlay]=\"currentOptions?.imageAutoPlay\" [autoPlayInterval]=\"currentOptions?.imageAutoPlayInterval\" [autoPlayPauseOnHover]=\"currentOptions?.imageAutoPlayPauseOnHover\" [infinityMove]=\"currentOptions?.imageInfinityMove\"  [lazyLoading]=\"currentOptions?.lazyLoading\" [actions]=\"currentOptions?.imageActions\" [descriptions]=\"descriptions\" [showDescription]=\"currentOptions?.imageDescription\" [bullets]=\"currentOptions?.imageBullets\" (onClick)=\"openPreview($event)\" (onActiveChange)=\"selectFromImage($event)\"></ngx-gallery-image>\n\n        <ngx-gallery-thumbnails *ngIf=\"currentOptions?.thumbnails\" [style.marginTop]=\"getThumbnailsMarginTop()\" [style.marginBottom]=\"getThumbnailsMarginBottom()\" [style.height]=\"getThumbnailsHeight()\" [images]=\"smallImages\" [links]=\"currentOptions?.thumbnailsAsLinks ? links : []\" [labels]=\"labels\" [linkTarget]=\"currentOptions?.linkTarget\" [selectedIndex]=\"selectedIndex\" [columns]=\"currentOptions?.thumbnailsColumns\" [rows]=\"currentOptions?.thumbnailsRows\" [margin]=\"currentOptions?.thumbnailMargin\" [arrows]=\"currentOptions?.thumbnailsArrows\" [arrowsAutoHide]=\"currentOptions?.thumbnailsArrowsAutoHide\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [clickable]=\"currentOptions?.image || currentOptions?.preview\" [swipe]=\"currentOptions?.thumbnailsSwipe\" [size]=\"currentOptions?.thumbnailSize\" [moveSize]=\"currentOptions?.thumbnailsMoveSize\" [order]=\"currentOptions?.thumbnailsOrder\" [remainingCount]=\"currentOptions?.thumbnailsRemainingCount\" [lazyLoading]=\"currentOptions?.lazyLoading\" [actions]=\"currentOptions?.thumbnailActions\"  (onActiveChange)=\"selectFromThumbnails($event)\"></ngx-gallery-thumbnails>\n\n        <ngx-gallery-preview [images]=\"bigImages\" [descriptions]=\"descriptions\" [showDescription]=\"currentOptions?.previewDescription\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [closeIcon]=\"currentOptions?.closeIcon\" [fullscreenIcon]=\"currentOptions?.fullscreenIcon\" [spinnerIcon]=\"currentOptions?.spinnerIcon\" [arrows]=\"currentOptions?.previewArrows\" [arrowsAutoHide]=\"currentOptions?.previewArrowsAutoHide\" [swipe]=\"currentOptions?.previewSwipe\" [fullscreen]=\"currentOptions?.previewFullscreen\" [forceFullscreen]=\"currentOptions?.previewForceFullscreen\" [closeOnClick]=\"currentOptions?.previewCloseOnClick\" [closeOnEsc]=\"currentOptions?.previewCloseOnEsc\" [keyboardNavigation]=\"currentOptions?.previewKeyboardNavigation\" [animation]=\"currentOptions?.previewAnimation\" [autoPlay]=\"currentOptions?.previewAutoPlay\" [autoPlayInterval]=\"currentOptions?.previewAutoPlayInterval\" [autoPlayPauseOnHover]=\"currentOptions?.previewAutoPlayPauseOnHover\" [infinityMove]=\"currentOptions?.previewInfinityMove\" [zoom]=\"currentOptions?.previewZoom\" [zoomStep]=\"currentOptions?.previewZoomStep\" [zoomMax]=\"currentOptions?.previewZoomMax\" [zoomMin]=\"currentOptions?.previewZoomMin\" [zoomInIcon]=\"currentOptions?.zoomInIcon\" [zoomOutIcon]=\"currentOptions?.zoomOutIcon\" [actions]=\"currentOptions?.actions\" [rotate]=\"currentOptions?.previewRotate\" [rotateLeftIcon]=\"currentOptions?.rotateLeftIcon\" [rotateRightIcon]=\"currentOptions?.rotateRightIcon\" [download]=\"currentOptions?.previewDownload\" [downloadIcon]=\"currentOptions?.downloadIcon\" [bullets]=\"currentOptions?.previewBullets\" (onClose)=\"onPreviewClose()\" (onOpen)=\"onPreviewOpen()\" (onActiveChange)=\"previewSelect($event)\" [class.ngx-gallery-active]=\"previewEnabled\"></ngx-gallery-preview>\n    </div>\n    ",
-                    styles: [":host { display: inline-block; } :host > * { float: left; } :host /deep/ * { box-sizing: border-box; } :host /deep/ .ngx-gallery-icon { color: white; font-size: 25px; position: absolute; z-index: 2000; display: inline-block; } :host /deep/ .ngx-gallery-icon .ngx-gallery-icon-content { display: block; } :host /deep/ .ngx-gallery-clickable { cursor: pointer; } :host /deep/ .ngx-gallery-icons-wrapper .ngx-gallery-icon { position: relative; margin-right: 5px; margin-top: 5px; font-size: 20px; cursor: pointer; } :host /deep/ .ngx-gallery-icons-wrapper { float: right; } :host .ngx-gallery-layout { width: 100%; height: 100%; display: flex; flex-direction: column; } :host .ngx-gallery-layout.thumbnails-top ngx-gallery-image { order: 2; } :host .ngx-gallery-layout.thumbnails-top ngx-gallery-thumbnails { order: 1; } :host .ngx-gallery-layout.thumbnails-bottom ngx-gallery-image { order: 1; } :host .ngx-gallery-layout.thumbnails-bottom ngx-gallery-thumbnails { order: 2; } "],
-                    providers: [NgxGalleryHelperService]
-                },] },
-    ];
     /**
      * @nocollapse
      */
@@ -1864,6 +2534,91 @@ var NgxGalleryComponent = /** @class */ (function () {
         'left': [{ type: core.HostBinding, args: ['style.left',] },],
         'onResize': [{ type: core.HostListener, args: ['window:resize',] },],
     };
+NgxGalleryComponent.ɵfac = function NgxGalleryComponent_Factory(t) { return new (t || NgxGalleryComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
+NgxGalleryComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgxGalleryComponent, selectors: [["ngx-gallery"]], viewQuery: function NgxGalleryComponent_Query(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵviewQuery(NgxGalleryPreviewComponent, true);
+        ɵngcc0.ɵɵviewQuery(NgxGalleryImageComponent, true);
+        ɵngcc0.ɵɵviewQuery(NgxGalleryThumbnailsComponent, true);
+    } if (rf & 2) {
+        var _t;
+        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.preview = _t.first);
+        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.image = _t.first);
+        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.thubmnails = _t.first);
+    } }, hostVars: 6, hostBindings: function NgxGalleryComponent_HostBindings(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵlistener("resize", function NgxGalleryComponent_resize_HostBindingHandler() { return ctx.onResize(); }, false, ɵngcc0.ɵɵresolveWindow);
+    } if (rf & 2) {
+        ɵngcc0.ɵɵstyleProp("width", ctx.width)("left", ctx.left)("height", ctx.height);
+    } }, inputs: { options: "options", images: "images" }, outputs: { imagesReady: "imagesReady", change: "change", previewOpen: "previewOpen", previewClose: "previewClose", previewChange: "previewChange" }, features: [ɵngcc0.ɵɵProvidersFeature([NgxGalleryHelperService])], decls: 10, vars: 41, consts: [[3, "height", "images", "clickable", "selectedIndex", "arrows", "arrowsAutoHide", "arrowPrevIcon", "arrowNextIcon", "swipe", "animation", "size", "autoPlay", "autoPlayInterval", "autoPlayPauseOnHover", "infinityMove", "lazyLoading", "actions", "descriptions", "showDescription", "bullets", "onClick", "onActiveChange", 4, "ngIf"], [3, "marginTop", "marginBottom", "height", "images", "links", "labels", "linkTarget", "selectedIndex", "columns", "rows", "margin", "arrows", "arrowsAutoHide", "arrowPrevIcon", "arrowNextIcon", "clickable", "swipe", "size", "moveSize", "order", "remainingCount", "lazyLoading", "actions", "onActiveChange", 4, "ngIf"], [3, "images", "descriptions", "showDescription", "arrowPrevIcon", "arrowNextIcon", "closeIcon", "fullscreenIcon", "spinnerIcon", "arrows", "arrowsAutoHide", "swipe", "fullscreen", "forceFullscreen", "closeOnClick", "closeOnEsc", "keyboardNavigation", "animation", "autoPlay", "autoPlayInterval", "autoPlayPauseOnHover", "infinityMove", "zoom", "zoomStep", "zoomMax", "zoomMin", "zoomInIcon", "zoomOutIcon", "actions", "rotate", "rotateLeftIcon", "rotateRightIcon", "download", "downloadIcon", "bullets", "onClose", "onOpen", "onActiveChange"], [3, "images", "clickable", "selectedIndex", "arrows", "arrowsAutoHide", "arrowPrevIcon", "arrowNextIcon", "swipe", "animation", "size", "autoPlay", "autoPlayInterval", "autoPlayPauseOnHover", "infinityMove", "lazyLoading", "actions", "descriptions", "showDescription", "bullets", "onClick", "onActiveChange"], [3, "images", "links", "labels", "linkTarget", "selectedIndex", "columns", "rows", "margin", "arrows", "arrowsAutoHide", "arrowPrevIcon", "arrowNextIcon", "clickable", "swipe", "size", "moveSize", "order", "remainingCount", "lazyLoading", "actions", "onActiveChange"]], template: function NgxGalleryComponent_Template(rf, ctx) { if (rf & 1) {
+        ɵngcc0.ɵɵtext(0, "\n    ");
+        ɵngcc0.ɵɵelementStart(1, "div");
+        ɵngcc0.ɵɵtext(2, "\n        ");
+        ɵngcc0.ɵɵtemplate(3, NgxGalleryComponent_ngx_gallery_image_3_Template, 1, 21, "ngx-gallery-image", 0);
+        ɵngcc0.ɵɵtext(4, "\n\n        ");
+        ɵngcc0.ɵɵtemplate(5, NgxGalleryComponent_ngx_gallery_thumbnails_5_Template, 1, 27, "ngx-gallery-thumbnails", 1);
+        ɵngcc0.ɵɵtext(6, "\n\n        ");
+        ɵngcc0.ɵɵelementStart(7, "ngx-gallery-preview", 2);
+        ɵngcc0.ɵɵlistener("onClose", function NgxGalleryComponent_Template_ngx_gallery_preview_onClose_7_listener() { return ctx.onPreviewClose(); })("onOpen", function NgxGalleryComponent_Template_ngx_gallery_preview_onOpen_7_listener() { return ctx.onPreviewOpen(); })("onActiveChange", function NgxGalleryComponent_Template_ngx_gallery_preview_onActiveChange_7_listener($event) { return ctx.previewSelect($event); });
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(8, "\n    ");
+        ɵngcc0.ɵɵelementEnd();
+        ɵngcc0.ɵɵtext(9, "\n    ");
+    } if (rf & 2) {
+        ɵngcc0.ɵɵadvance(1);
+        ɵngcc0.ɵɵclassMapInterpolate1("ngx-gallery-layout ", ctx.currentOptions == null ? null : ctx.currentOptions.layout, "");
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.currentOptions == null ? null : ctx.currentOptions.image);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵproperty("ngIf", ctx.currentOptions == null ? null : ctx.currentOptions.thumbnails);
+        ɵngcc0.ɵɵadvance(2);
+        ɵngcc0.ɵɵclassProp("ngx-gallery-active", ctx.previewEnabled);
+        ɵngcc0.ɵɵproperty("images", ctx.bigImages)("descriptions", ctx.descriptions)("showDescription", ctx.currentOptions == null ? null : ctx.currentOptions.previewDescription)("arrowPrevIcon", ctx.currentOptions == null ? null : ctx.currentOptions.arrowPrevIcon)("arrowNextIcon", ctx.currentOptions == null ? null : ctx.currentOptions.arrowNextIcon)("closeIcon", ctx.currentOptions == null ? null : ctx.currentOptions.closeIcon)("fullscreenIcon", ctx.currentOptions == null ? null : ctx.currentOptions.fullscreenIcon)("spinnerIcon", ctx.currentOptions == null ? null : ctx.currentOptions.spinnerIcon)("arrows", ctx.currentOptions == null ? null : ctx.currentOptions.previewArrows)("arrowsAutoHide", ctx.currentOptions == null ? null : ctx.currentOptions.previewArrowsAutoHide)("swipe", ctx.currentOptions == null ? null : ctx.currentOptions.previewSwipe)("fullscreen", ctx.currentOptions == null ? null : ctx.currentOptions.previewFullscreen)("forceFullscreen", ctx.currentOptions == null ? null : ctx.currentOptions.previewForceFullscreen)("closeOnClick", ctx.currentOptions == null ? null : ctx.currentOptions.previewCloseOnClick)("closeOnEsc", ctx.currentOptions == null ? null : ctx.currentOptions.previewCloseOnEsc)("keyboardNavigation", ctx.currentOptions == null ? null : ctx.currentOptions.previewKeyboardNavigation)("animation", ctx.currentOptions == null ? null : ctx.currentOptions.previewAnimation)("autoPlay", ctx.currentOptions == null ? null : ctx.currentOptions.previewAutoPlay)("autoPlayInterval", ctx.currentOptions == null ? null : ctx.currentOptions.previewAutoPlayInterval)("autoPlayPauseOnHover", ctx.currentOptions == null ? null : ctx.currentOptions.previewAutoPlayPauseOnHover)("infinityMove", ctx.currentOptions == null ? null : ctx.currentOptions.previewInfinityMove)("zoom", ctx.currentOptions == null ? null : ctx.currentOptions.previewZoom)("zoomStep", ctx.currentOptions == null ? null : ctx.currentOptions.previewZoomStep)("zoomMax", ctx.currentOptions == null ? null : ctx.currentOptions.previewZoomMax)("zoomMin", ctx.currentOptions == null ? null : ctx.currentOptions.previewZoomMin)("zoomInIcon", ctx.currentOptions == null ? null : ctx.currentOptions.zoomInIcon)("zoomOutIcon", ctx.currentOptions == null ? null : ctx.currentOptions.zoomOutIcon)("actions", ctx.currentOptions == null ? null : ctx.currentOptions.actions)("rotate", ctx.currentOptions == null ? null : ctx.currentOptions.previewRotate)("rotateLeftIcon", ctx.currentOptions == null ? null : ctx.currentOptions.rotateLeftIcon)("rotateRightIcon", ctx.currentOptions == null ? null : ctx.currentOptions.rotateRightIcon)("download", ctx.currentOptions == null ? null : ctx.currentOptions.previewDownload)("downloadIcon", ctx.currentOptions == null ? null : ctx.currentOptions.downloadIcon)("bullets", ctx.currentOptions == null ? null : ctx.currentOptions.previewBullets);
+    } }, directives: [ɵngcc1.NgIf, NgxGalleryPreviewComponent,
+        NgxGalleryImageComponent,
+        NgxGalleryThumbnailsComponent], styles: ["[_nghost-%COMP%] { display: inline-block; } [_nghost-%COMP%]    > *[_ngcontent-%COMP%] { float: left; } [_nghost-%COMP%]     * { box-sizing: border-box; } [_nghost-%COMP%]     .ngx-gallery-icon { color: white; font-size: 25px; position: absolute; z-index: 2000; display: inline-block; } [_nghost-%COMP%]     .ngx-gallery-icon .ngx-gallery-icon-content { display: block; } [_nghost-%COMP%]     .ngx-gallery-clickable { cursor: pointer; } [_nghost-%COMP%]     .ngx-gallery-icons-wrapper .ngx-gallery-icon { position: relative; margin-right: 5px; margin-top: 5px; font-size: 20px; cursor: pointer; } [_nghost-%COMP%]     .ngx-gallery-icons-wrapper { float: right; } [_nghost-%COMP%]   .ngx-gallery-layout[_ngcontent-%COMP%] { width: 100%; height: 100%; display: flex; flex-direction: column; } [_nghost-%COMP%]   .ngx-gallery-layout.thumbnails-top[_ngcontent-%COMP%]   ngx-gallery-image[_ngcontent-%COMP%] { order: 2; } [_nghost-%COMP%]   .ngx-gallery-layout.thumbnails-top[_ngcontent-%COMP%]   ngx-gallery-thumbnails[_ngcontent-%COMP%] { order: 1; } [_nghost-%COMP%]   .ngx-gallery-layout.thumbnails-bottom[_ngcontent-%COMP%]   ngx-gallery-image[_ngcontent-%COMP%] { order: 1; } [_nghost-%COMP%]   .ngx-gallery-layout.thumbnails-bottom[_ngcontent-%COMP%]   ngx-gallery-thumbnails[_ngcontent-%COMP%] { order: 2; }"] });
+/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxGalleryComponent, [{
+        type: core.Component,
+        args: [{
+                selector: 'ngx-gallery',
+                template: "\n    <div class=\"ngx-gallery-layout {{currentOptions?.layout}}\">\n        <ngx-gallery-image *ngIf=\"currentOptions?.image\" [style.height]=\"getImageHeight()\" [images]=\"mediumImages\" [clickable]=\"currentOptions?.preview\" [selectedIndex]=\"selectedIndex\" [arrows]=\"currentOptions?.imageArrows\" [arrowsAutoHide]=\"currentOptions?.imageArrowsAutoHide\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [swipe]=\"currentOptions?.imageSwipe\" [animation]=\"currentOptions?.imageAnimation\" [size]=\"currentOptions?.imageSize\" [autoPlay]=\"currentOptions?.imageAutoPlay\" [autoPlayInterval]=\"currentOptions?.imageAutoPlayInterval\" [autoPlayPauseOnHover]=\"currentOptions?.imageAutoPlayPauseOnHover\" [infinityMove]=\"currentOptions?.imageInfinityMove\"  [lazyLoading]=\"currentOptions?.lazyLoading\" [actions]=\"currentOptions?.imageActions\" [descriptions]=\"descriptions\" [showDescription]=\"currentOptions?.imageDescription\" [bullets]=\"currentOptions?.imageBullets\" (onClick)=\"openPreview($event)\" (onActiveChange)=\"selectFromImage($event)\"></ngx-gallery-image>\n\n        <ngx-gallery-thumbnails *ngIf=\"currentOptions?.thumbnails\" [style.marginTop]=\"getThumbnailsMarginTop()\" [style.marginBottom]=\"getThumbnailsMarginBottom()\" [style.height]=\"getThumbnailsHeight()\" [images]=\"smallImages\" [links]=\"currentOptions?.thumbnailsAsLinks ? links : []\" [labels]=\"labels\" [linkTarget]=\"currentOptions?.linkTarget\" [selectedIndex]=\"selectedIndex\" [columns]=\"currentOptions?.thumbnailsColumns\" [rows]=\"currentOptions?.thumbnailsRows\" [margin]=\"currentOptions?.thumbnailMargin\" [arrows]=\"currentOptions?.thumbnailsArrows\" [arrowsAutoHide]=\"currentOptions?.thumbnailsArrowsAutoHide\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [clickable]=\"currentOptions?.image || currentOptions?.preview\" [swipe]=\"currentOptions?.thumbnailsSwipe\" [size]=\"currentOptions?.thumbnailSize\" [moveSize]=\"currentOptions?.thumbnailsMoveSize\" [order]=\"currentOptions?.thumbnailsOrder\" [remainingCount]=\"currentOptions?.thumbnailsRemainingCount\" [lazyLoading]=\"currentOptions?.lazyLoading\" [actions]=\"currentOptions?.thumbnailActions\"  (onActiveChange)=\"selectFromThumbnails($event)\"></ngx-gallery-thumbnails>\n\n        <ngx-gallery-preview [images]=\"bigImages\" [descriptions]=\"descriptions\" [showDescription]=\"currentOptions?.previewDescription\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [closeIcon]=\"currentOptions?.closeIcon\" [fullscreenIcon]=\"currentOptions?.fullscreenIcon\" [spinnerIcon]=\"currentOptions?.spinnerIcon\" [arrows]=\"currentOptions?.previewArrows\" [arrowsAutoHide]=\"currentOptions?.previewArrowsAutoHide\" [swipe]=\"currentOptions?.previewSwipe\" [fullscreen]=\"currentOptions?.previewFullscreen\" [forceFullscreen]=\"currentOptions?.previewForceFullscreen\" [closeOnClick]=\"currentOptions?.previewCloseOnClick\" [closeOnEsc]=\"currentOptions?.previewCloseOnEsc\" [keyboardNavigation]=\"currentOptions?.previewKeyboardNavigation\" [animation]=\"currentOptions?.previewAnimation\" [autoPlay]=\"currentOptions?.previewAutoPlay\" [autoPlayInterval]=\"currentOptions?.previewAutoPlayInterval\" [autoPlayPauseOnHover]=\"currentOptions?.previewAutoPlayPauseOnHover\" [infinityMove]=\"currentOptions?.previewInfinityMove\" [zoom]=\"currentOptions?.previewZoom\" [zoomStep]=\"currentOptions?.previewZoomStep\" [zoomMax]=\"currentOptions?.previewZoomMax\" [zoomMin]=\"currentOptions?.previewZoomMin\" [zoomInIcon]=\"currentOptions?.zoomInIcon\" [zoomOutIcon]=\"currentOptions?.zoomOutIcon\" [actions]=\"currentOptions?.actions\" [rotate]=\"currentOptions?.previewRotate\" [rotateLeftIcon]=\"currentOptions?.rotateLeftIcon\" [rotateRightIcon]=\"currentOptions?.rotateRightIcon\" [download]=\"currentOptions?.previewDownload\" [downloadIcon]=\"currentOptions?.downloadIcon\" [bullets]=\"currentOptions?.previewBullets\" (onClose)=\"onPreviewClose()\" (onOpen)=\"onPreviewOpen()\" (onActiveChange)=\"previewSelect($event)\" [class.ngx-gallery-active]=\"previewEnabled\"></ngx-gallery-preview>\n    </div>\n    ",
+                styles: [":host { display: inline-block; } :host > * { float: left; } :host /deep/ * { box-sizing: border-box; } :host /deep/ .ngx-gallery-icon { color: white; font-size: 25px; position: absolute; z-index: 2000; display: inline-block; } :host /deep/ .ngx-gallery-icon .ngx-gallery-icon-content { display: block; } :host /deep/ .ngx-gallery-clickable { cursor: pointer; } :host /deep/ .ngx-gallery-icons-wrapper .ngx-gallery-icon { position: relative; margin-right: 5px; margin-top: 5px; font-size: 20px; cursor: pointer; } :host /deep/ .ngx-gallery-icons-wrapper { float: right; } :host .ngx-gallery-layout { width: 100%; height: 100%; display: flex; flex-direction: column; } :host .ngx-gallery-layout.thumbnails-top ngx-gallery-image { order: 2; } :host .ngx-gallery-layout.thumbnails-top ngx-gallery-thumbnails { order: 1; } :host .ngx-gallery-layout.thumbnails-bottom ngx-gallery-image { order: 1; } :host .ngx-gallery-layout.thumbnails-bottom ngx-gallery-thumbnails { order: 2; } "],
+                providers: [NgxGalleryHelperService]
+            }]
+    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { imagesReady: [{
+            type: core.Output
+        }], change: [{
+            type: core.Output
+        }], previewOpen: [{
+            type: core.Output
+        }], previewClose: [{
+            type: core.Output
+        }], previewChange: [{
+            type: core.Output
+        }], options: [{
+            type: core.Input
+        }], onResize: [{
+            type: core.HostListener,
+            args: ['window:resize']
+        }], width: [{
+            type: core.HostBinding,
+            args: ['style.width']
+        }], left: [{
+            type: core.HostBinding,
+            args: ['style.left']
+        }], height: [{
+            type: core.HostBinding,
+            args: ['style.height']
+        }], images: [{
+            type: core.Input
+        }], preview: [{
+            type: core.ViewChild,
+            args: [NgxGalleryPreviewComponent]
+        }], image: [{
+            type: core.ViewChild,
+            args: [NgxGalleryImageComponent]
+        }], thubmnails: [{
+            type: core.ViewChild,
+            args: [NgxGalleryThumbnailsComponent]
+        }] }); })();
     return NgxGalleryComponent;
 }());
 
@@ -1902,37 +2657,54 @@ var CustomHammerConfig = /** @class */ (function (_super) {
         });
         return _this;
     }
+CustomHammerConfig.ɵfac = function CustomHammerConfig_Factory(t) { return ɵCustomHammerConfig_BaseFactory(t || CustomHammerConfig); };
+CustomHammerConfig.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: CustomHammerConfig, factory: function (t) { return CustomHammerConfig.ɵfac(t); } });
+var ɵCustomHammerConfig_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(CustomHammerConfig);
     return CustomHammerConfig;
 }(platformBrowser.HammerGestureConfig));
 var NgxGalleryModule = /** @class */ (function () {
     function NgxGalleryModule() {
     }
-    NgxGalleryModule.decorators = [
-        { type: core.NgModule, args: [{
-                    imports: [
-                        common.CommonModule
-                    ],
-                    declarations: [
-                        NgxGalleryActionComponent,
-                        NgxGalleryArrowsComponent,
-                        NgxGalleryBulletsComponent,
-                        NgxGalleryImageComponent,
-                        NgxGalleryThumbnailsComponent,
-                        NgxGalleryPreviewComponent,
-                        NgxGalleryComponent
-                    ],
-                    exports: [
-                        NgxGalleryComponent
-                    ],
-                    providers: [
-                        { provide: platformBrowser.HAMMER_GESTURE_CONFIG, useClass: CustomHammerConfig }
-                    ]
-                },] },
-    ];
     /**
      * @nocollapse
      */
     NgxGalleryModule.ctorParameters = function () { return []; };
+NgxGalleryModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NgxGalleryModule });
+NgxGalleryModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NgxGalleryModule_Factory(t) { return new (t || NgxGalleryModule)(); }, providers: [
+        { provide: platformBrowser.HAMMER_GESTURE_CONFIG, useClass: CustomHammerConfig }
+    ], imports: [[
+            common.CommonModule
+        ]] });
+(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NgxGalleryModule, { declarations: [NgxGalleryActionComponent,
+        NgxGalleryArrowsComponent,
+        NgxGalleryBulletsComponent,
+        NgxGalleryImageComponent,
+        NgxGalleryThumbnailsComponent,
+        NgxGalleryPreviewComponent,
+        NgxGalleryComponent], imports: [ɵngcc1.CommonModule], exports: [NgxGalleryComponent] }); })();
+/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxGalleryModule, [{
+        type: core.NgModule,
+        args: [{
+                imports: [
+                    common.CommonModule
+                ],
+                declarations: [
+                    NgxGalleryActionComponent,
+                    NgxGalleryArrowsComponent,
+                    NgxGalleryBulletsComponent,
+                    NgxGalleryImageComponent,
+                    NgxGalleryThumbnailsComponent,
+                    NgxGalleryPreviewComponent,
+                    NgxGalleryComponent
+                ],
+                exports: [
+                    NgxGalleryComponent
+                ],
+                providers: [
+                    { provide: platformBrowser.HAMMER_GESTURE_CONFIG, useClass: CustomHammerConfig }
+                ]
+            }]
+    }], function () { return []; }, null); })();
     return NgxGalleryModule;
 }());
 
@@ -1958,3 +2730,5 @@ exports.NgxGalleryAction = NgxGalleryAction;
 Object.defineProperty(exports, '__esModule', { value: true });
 
 })));
+
+//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWdhbGxlcnkudW1kLmpzIiwic291cmNlcyI6WyJuZ3gtZ2FsbGVyeS51bWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxpS0FBd0U7QUFDeEUsb0hBQXNEO0FBQ3RELG9FQUFVO0FBQ1Ysd0NBQW1COzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXVDO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQU9NO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQU9NO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFPTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUdNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozt1RUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BT007QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFPTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BT007QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BUU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozt1RkFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FzQk07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQUFpRTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgnQGFuZ3VsYXIvY29yZScpLCByZXF1aXJlKCdAYW5ndWxhci9jb21tb24nKSwgcmVxdWlyZSgnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3NlcicpKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnLCAnQGFuZ3VsYXIvY29yZScsICdAYW5ndWxhci9jb21tb24nLCAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3NlciddLCBmYWN0b3J5KSA6XG5cdChmYWN0b3J5KChnbG9iYWxbJ25neC1nYWxsZXJ5J10gPSB7fSksZ2xvYmFsLmNvcmUsZ2xvYmFsLmNvbW1vbixnbG9iYWwucGxhdGZvcm1Ccm93c2VyKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cyxjb3JlLGNvbW1vbixwbGF0Zm9ybUJyb3dzZXIpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgTmd4R2FsbGVyeUFjdGlvbkNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5neEdhbGxlcnlBY3Rpb25Db21wb25lbnQoKSB7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudGl0bGVUZXh0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZXZlbnRcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlBY3Rpb25Db21wb25lbnQucHJvdG90eXBlLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DbGljay5lbWl0KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH07XHJcbiAgICBOZ3hHYWxsZXJ5QWN0aW9uQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgeyB0eXBlOiBjb3JlLkNvbXBvbmVudCwgYXJnczogW3tcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25neC1nYWxsZXJ5LWFjdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJuZ3gtZ2FsbGVyeS1pY29uXFxcIiBbY2xhc3Mubmd4LWdhbGxlcnktaWNvbi1kaXNhYmxlZF09XFxcImRpc2FibGVkXFxcIlxcbiAgICAgICAgICAgIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIlxcbiAgICAgICAgICAgIHRpdGxlPVxcXCJ7eyB0aXRsZVRleHQgfX1cXFwiXFxuICAgICAgICAgICAgKGNsaWNrKT1cXFwiaGFuZGxlQ2xpY2soJGV2ZW50KVxcXCI+XFxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJuZ3gtZ2FsbGVyeS1pY29uLWNvbnRlbnQge3sgaWNvbiB9fVxcXCI+PC9pPlxcbiAgICAgICAgPC9kaXY+XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBjb3JlLkNoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxyXG4gICAgICAgICAgICAgICAgfSxdIH0sXHJcbiAgICBdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAbm9jb2xsYXBzZVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5QWN0aW9uQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XHJcbiAgICBOZ3hHYWxsZXJ5QWN0aW9uQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xyXG4gICAgICAgICdpY29uJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2Rpc2FibGVkJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ3RpdGxlVGV4dCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdvbkNsaWNrJzogW3sgdHlwZTogY29yZS5PdXRwdXQgfSxdLFxyXG4gICAgfTtcclxuICAgIHJldHVybiBOZ3hHYWxsZXJ5QWN0aW9uQ29tcG9uZW50O1xyXG59KCkpO1xuXG52YXIgTmd4R2FsbGVyeUFycm93c0NvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5neEdhbGxlcnlBcnJvd3NDb21wb25lbnQoKSB7XHJcbiAgICAgICAgdGhpcy5vblByZXZDbGljayA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMub25OZXh0Q2xpY2sgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUFycm93c0NvbXBvbmVudC5wcm90b3R5cGUuaGFuZGxlUHJldkNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMub25QcmV2Q2xpY2suZW1pdCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUFycm93c0NvbXBvbmVudC5wcm90b3R5cGUuaGFuZGxlTmV4dENsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMub25OZXh0Q2xpY2suZW1pdCgpO1xyXG4gICAgfTtcclxuICAgIE5neEdhbGxlcnlBcnJvd3NDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcclxuICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmd4LWdhbGxlcnktYXJyb3dzJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LWFycm93LXdyYXBwZXIgbmd4LWdhbGxlcnktYXJyb3ctbGVmdFxcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibmd4LWdhbGxlcnktaWNvbiBuZ3gtZ2FsbGVyeS1hcnJvd1xcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiIChjbGljayk9XFxcImhhbmRsZVByZXZDbGljaygpXFxcIiBbY2xhc3Mubmd4LWdhbGxlcnktZGlzYWJsZWRdPVxcXCJwcmV2RGlzYWJsZWRcXFwiPlxcbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwibmd4LWdhbGxlcnktaWNvbi1jb250ZW50IHt7YXJyb3dQcmV2SWNvbn19XFxcIj48L2k+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LWFycm93LXdyYXBwZXIgbmd4LWdhbGxlcnktYXJyb3ctcmlnaHRcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LWljb24gbmd4LWdhbGxlcnktYXJyb3dcXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiAoY2xpY2spPVxcXCJoYW5kbGVOZXh0Q2xpY2soKVxcXCIgW2NsYXNzLm5neC1nYWxsZXJ5LWRpc2FibGVkXT1cXFwibmV4dERpc2FibGVkXFxcIj5cXG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LWljb24tY29udGVudCB7e2Fycm93TmV4dEljb259fVxcXCI+PC9pPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczogW1wiLm5neC1nYWxsZXJ5LWFycm93LXdyYXBwZXIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IGhlaWdodDogMTAwJTsgd2lkdGg6IDFweDsgZGlzcGxheTogdGFibGU7IHotaW5kZXg6IDIwMDA7IHRhYmxlLWxheW91dDogZml4ZWQ7IH0gLm5neC1nYWxsZXJ5LWFycm93LWxlZnQgeyBsZWZ0OiAwcHg7IH0gLm5neC1nYWxsZXJ5LWFycm93LXJpZ2h0IHsgcmlnaHQ6IDBweDsgfSAubmd4LWdhbGxlcnktYXJyb3cgeyB0b3A6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOyBjdXJzb3I6IHBvaW50ZXI7IH0gLm5neC1nYWxsZXJ5LWFycm93Lm5neC1nYWxsZXJ5LWRpc2FibGVkIHsgb3BhY2l0eTogMC42OyBjdXJzb3I6IGRlZmF1bHQ7IH0gLm5neC1nYWxsZXJ5LWFycm93LWxlZnQgLm5neC1nYWxsZXJ5LWFycm93IHsgbGVmdDogMTBweDsgfSAubmd4LWdhbGxlcnktYXJyb3ctcmlnaHQgLm5neC1nYWxsZXJ5LWFycm93IHsgcmlnaHQ6IDEwcHg7IH0gXCJdXHJcbiAgICAgICAgICAgICAgICB9LF0gfSxcclxuICAgIF07XHJcbiAgICAvKipcclxuICAgICAqIEBub2NvbGxhcHNlXHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlBcnJvd3NDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfTtcclxuICAgIE5neEdhbGxlcnlBcnJvd3NDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XHJcbiAgICAgICAgJ3ByZXZEaXNhYmxlZCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICduZXh0RGlzYWJsZWQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYXJyb3dQcmV2SWNvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdhcnJvd05leHRJY29uJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ29uUHJldkNsaWNrJzogW3sgdHlwZTogY29yZS5PdXRwdXQgfSxdLFxyXG4gICAgICAgICdvbk5leHRDbGljayc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gTmd4R2FsbGVyeUFycm93c0NvbXBvbmVudDtcclxufSgpKTtcblxudmFyIE5neEdhbGxlcnlCdWxsZXRzQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTmd4R2FsbGVyeUJ1bGxldHNDb21wb25lbnQoKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xyXG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUJ1bGxldHNDb21wb25lbnQucHJvdG90eXBlLmdldEJ1bGxldHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5KHRoaXMuY291bnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBldmVudFxyXG4gICAgICogQHBhcmFtIHs/fSBpbmRleFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUJ1bGxldHNDb21wb25lbnQucHJvdG90eXBlLmhhbmRsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCwgaW5kZXgpIHtcclxuICAgICAgICB0aGlzLm9uQ2hhbmdlLmVtaXQoaW5kZXgpO1xyXG4gICAgfTtcclxuICAgIE5neEdhbGxlcnlCdWxsZXRzQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgeyB0eXBlOiBjb3JlLkNvbXBvbmVudCwgYXJnczogW3tcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25neC1nYWxsZXJ5LWJ1bGxldHMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwibmd4LWdhbGxlcnktYnVsbGV0XFxcIiAqbmdGb3I9XFxcImxldCBidWxsZXQgb2YgZ2V0QnVsbGV0cygpOyBsZXQgaSA9IGluZGV4O1xcXCIgKGNsaWNrKT1cXFwiaGFuZGxlQ2hhbmdlKCRldmVudCwgaSlcXFwiIFtuZ0NsYXNzXT1cXFwieyAnbmd4LWdhbGxlcnktYWN0aXZlJzogaSA9PSBhY3RpdmUgfVxcXCI+PC9kaXY+XFxuICAgIFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3QgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHotaW5kZXg6IDIwMDA7IGRpc3BsYXk6IGlubGluZS1mbGV4OyBsZWZ0OiA1MCU7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsgYm90dG9tOiAwcHg7IHBhZGRpbmc6IDEwcHg7IH0gLm5neC1nYWxsZXJ5LWJ1bGxldCB7IHdpZHRoOiAxMHB4OyBoZWlnaHQ6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgY3Vyc29yOiBwb2ludGVyOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfSAubmd4LWdhbGxlcnktYnVsbGV0Om5vdCg6Zmlyc3QtY2hpbGQpIHsgbWFyZ2luLWxlZnQ6IDVweDsgfSAubmd4LWdhbGxlcnktYnVsbGV0OmhvdmVyLCAubmd4LWdhbGxlcnktYnVsbGV0Lm5neC1nYWxsZXJ5LWFjdGl2ZSB7IGJhY2tncm91bmQ6IGJsYWNrOyB9IFwiXVxyXG4gICAgICAgICAgICAgICAgfSxdIH0sXHJcbiAgICBdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAbm9jb2xsYXBzZVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5QnVsbGV0c0NvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtdOyB9O1xyXG4gICAgTmd4R2FsbGVyeUJ1bGxldHNDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XHJcbiAgICAgICAgJ2NvdW50JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2FjdGl2ZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdvbkNoYW5nZSc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gTmd4R2FsbGVyeUJ1bGxldHNDb21wb25lbnQ7XHJcbn0oKSk7XG5cbnZhciBOZ3hHYWxsZXJ5SGVscGVyU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSByZW5kZXJlclxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBOZ3hHYWxsZXJ5SGVscGVyU2VydmljZShyZW5kZXJlcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLnN3aXBlSGFuZGxlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gc3RhdHVzXHJcbiAgICAgKiBAcGFyYW0gez99IGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7P30gaWRcclxuICAgICAqIEBwYXJhbSB7P30gbmV4dEhhbmRsZXJcclxuICAgICAqIEBwYXJhbSB7P30gcHJldkhhbmRsZXJcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlIZWxwZXJTZXJ2aWNlLnByb3RvdHlwZS5tYW5hZ2VTd2lwZSA9IGZ1bmN0aW9uIChzdGF0dXMsIGVsZW1lbnQsIGlkLCBuZXh0SGFuZGxlciwgcHJldkhhbmRsZXIpIHtcclxuICAgICAgICB2YXIgLyoqIEB0eXBlIHs/fSAqLyBoYW5kbGVycyA9IHRoaXMuZ2V0U3dpcGVIYW5kbGVycyhpZCk7XHJcbiAgICAgICAgLy8gc3dpcGVsZWZ0IGFuZCBzd2lwZXJpZ2h0IGFyZSBhdmFpbGFibGUgb25seSBpZiBoYW1tZXJqcyBpcyBpbmNsdWRlZFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgJiYgIWhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXBlSGFuZGxlcnMuc2V0KGlkLCBbXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oZWxlbWVudC5uYXRpdmVFbGVtZW50LCAnc3dpcGVsZWZ0JywgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV4dEhhbmRsZXIoKTsgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oZWxlbWVudC5uYXRpdmVFbGVtZW50LCAnc3dpcGVyaWdodCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByZXZIYW5kbGVyKCk7IH0pXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghc3RhdHVzICYmIGhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVycy5tYXAoZnVuY3Rpb24gKGhhbmRsZXIpIHsgcmV0dXJuIGhhbmRsZXIoKTsgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN3aXBlSGFuZGxlcnMoaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gdXJsXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5SGVscGVyU2VydmljZS5wcm90b3R5cGUudmFsaWRhdGVVcmwgPSBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgaWYgKHVybC5yZXBsYWNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmwucmVwbGFjZShuZXcgUmVnRXhwKCcgJywgJ2cnKSwgJyUyMCcpXHJcbiAgICAgICAgICAgICAgICAucmVwbGFjZShuZXcgUmVnRXhwKCdcXCcnLCAnZycpLCAnJTI3Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gaW1hZ2VcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlIZWxwZXJTZXJ2aWNlLnByb3RvdHlwZS5nZXRCYWNrZ3JvdW5kVXJsID0gZnVuY3Rpb24gKGltYWdlKSB7XHJcbiAgICAgICAgcmV0dXJuICd1cmwoXFwnJyArIHRoaXMudmFsaWRhdGVVcmwoaW1hZ2UpICsgJ1xcJyknO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBpZFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUhlbHBlclNlcnZpY2UucHJvdG90eXBlLmdldFN3aXBlSGFuZGxlcnMgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zd2lwZUhhbmRsZXJzLmdldChpZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGlkXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5SGVscGVyU2VydmljZS5wcm90b3R5cGUucmVtb3ZlU3dpcGVIYW5kbGVycyA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHRoaXMuc3dpcGVIYW5kbGVycy5kZWxldGUoaWQpO1xyXG4gICAgfTtcclxuICAgIE5neEdhbGxlcnlIZWxwZXJTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgeyB0eXBlOiBjb3JlLkluamVjdGFibGUgfSxcclxuICAgIF07XHJcbiAgICAvKipcclxuICAgICAqIEBub2NvbGxhcHNlXHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlIZWxwZXJTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xyXG4gICAgICAgIHsgdHlwZTogY29yZS5SZW5kZXJlciwgfSxcclxuICAgIF07IH07XHJcbiAgICByZXR1cm4gTmd4R2FsbGVyeUhlbHBlclNlcnZpY2U7XHJcbn0oKSk7XG5cbnZhciBOZ3hHYWxsZXJ5QW5pbWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTmd4R2FsbGVyeUFuaW1hdGlvbigpIHtcclxuICAgIH1cclxuICAgIE5neEdhbGxlcnlBbmltYXRpb24uRmFkZSA9ICdmYWRlJztcclxuICAgIE5neEdhbGxlcnlBbmltYXRpb24uU2xpZGUgPSAnc2xpZGUnO1xyXG4gICAgTmd4R2FsbGVyeUFuaW1hdGlvbi5Sb3RhdGUgPSAncm90YXRlJztcclxuICAgIE5neEdhbGxlcnlBbmltYXRpb24uWm9vbSA9ICd6b29tJztcclxuICAgIHJldHVybiBOZ3hHYWxsZXJ5QW5pbWF0aW9uO1xyXG59KCkpO1xuXG52YXIgTmd4R2FsbGVyeUltYWdlQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IHNhbml0aXphdGlvblxyXG4gICAgICogQHBhcmFtIHs/fSBlbGVtZW50UmVmXHJcbiAgICAgKiBAcGFyYW0gez99IGhlbHBlclNlcnZpY2VcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gTmd4R2FsbGVyeUltYWdlQ29tcG9uZW50KHNhbml0aXphdGlvbiwgZWxlbWVudFJlZiwgaGVscGVyU2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuc2FuaXRpemF0aW9uID0gc2FuaXRpemF0aW9uO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudFJlZiA9IGVsZW1lbnRSZWY7XHJcbiAgICAgICAgdGhpcy5oZWxwZXJTZXJ2aWNlID0gaGVscGVyU2VydmljZTtcclxuICAgICAgICB0aGlzLm9uQ2xpY2sgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLm9uQWN0aXZlQ2hhbmdlID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy5jYW5DaGFuZ2VJbWFnZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlJbWFnZUNvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXJyb3dzICYmIHRoaXMuYXJyb3dzQXV0b0hpZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5hcnJvd3MgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b1BsYXkpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydEF1dG9QbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBjaGFuZ2VzXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5SW1hZ2VDb21wb25lbnQucHJvdG90eXBlLm5nT25DaGFuZ2VzID0gZnVuY3Rpb24gKGNoYW5nZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChjaGFuZ2VzWydzd2lwZSddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVscGVyU2VydmljZS5tYW5hZ2VTd2lwZSh0aGlzLnN3aXBlLCB0aGlzLmVsZW1lbnRSZWYsICdpbWFnZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNob3dOZXh0KCk7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNob3dQcmV2KCk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlJbWFnZUNvbXBvbmVudC5wcm90b3R5cGUub25Nb3VzZUVudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmFycm93c0F1dG9IaWRlICYmICF0aGlzLmFycm93cykge1xyXG4gICAgICAgICAgICB0aGlzLmFycm93cyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmF1dG9QbGF5ICYmIHRoaXMuYXV0b1BsYXlQYXVzZU9uSG92ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wQXV0b1BsYXkoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5SW1hZ2VDb21wb25lbnQucHJvdG90eXBlLm9uTW91c2VMZWF2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5hcnJvd3NBdXRvSGlkZSAmJiB0aGlzLmFycm93cykge1xyXG4gICAgICAgICAgICB0aGlzLmFycm93cyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hdXRvUGxheSAmJiB0aGlzLmF1dG9QbGF5UGF1c2VPbkhvdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRBdXRvUGxheSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gaW5kZXhcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlJbWFnZUNvbXBvbmVudC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBpbmRleDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlJbWFnZUNvbXBvbmVudC5wcm90b3R5cGUuZ2V0SW1hZ2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pbWFnZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5sYXp5TG9hZGluZykge1xyXG4gICAgICAgICAgICB2YXIgLyoqIEB0eXBlIHs/fSAqLyBpbmRleGVzXzEgPSBbdGhpcy5zZWxlY3RlZEluZGV4XTtcclxuICAgICAgICAgICAgdmFyIC8qKiBAdHlwZSB7P30gKi8gcHJldkluZGV4ID0gdGhpcy5zZWxlY3RlZEluZGV4IC0gMTtcclxuICAgICAgICAgICAgaWYgKHByZXZJbmRleCA9PT0gLTEgJiYgdGhpcy5pbmZpbml0eU1vdmUpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4ZXNfMS5wdXNoKHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHByZXZJbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleGVzXzEucHVzaChwcmV2SW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciAvKiogQHR5cGUgez99ICovIG5leHRJbmRleCA9IHRoaXMuc2VsZWN0ZWRJbmRleCArIDE7XHJcbiAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPT0gdGhpcy5pbWFnZXMubGVuZ3RoICYmIHRoaXMuaW5maW5pdHlNb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleGVzXzEucHVzaCgwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChuZXh0SW5kZXggPCB0aGlzLmltYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4ZXNfMS5wdXNoKG5leHRJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VzLmZpbHRlcihmdW5jdGlvbiAoaW1nLCBpKSB7IHJldHVybiBpbmRleGVzXzEuaW5kZXhPZihpKSAhPSAtMTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbWFnZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUltYWdlQ29tcG9uZW50LnByb3RvdHlwZS5zdGFydEF1dG9QbGF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zdG9wQXV0b1BsYXkoKTtcclxuICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLnNob3dOZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNob3dOZXh0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLmF1dG9QbGF5SW50ZXJ2YWwpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUltYWdlQ29tcG9uZW50LnByb3RvdHlwZS5zdG9wQXV0b1BsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGV2ZW50XHJcbiAgICAgKiBAcGFyYW0gez99IGluZGV4XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5SW1hZ2VDb21wb25lbnQucHJvdG90eXBlLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gKGV2ZW50LCBpbmRleCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNsaWNrYWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xpY2suZW1pdChpbmRleCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gaW5kZXhcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlJbWFnZUNvbXBvbmVudC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMub25BY3RpdmVDaGFuZ2UuZW1pdCh0aGlzLnNlbGVjdGVkSW5kZXgpO1xyXG4gICAgICAgIHRoaXMuc2V0Q2hhbmdlVGltZW91dCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUltYWdlQ29tcG9uZW50LnByb3RvdHlwZS5zaG93TmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jYW5TaG93TmV4dCgpICYmIHRoaXMuY2FuQ2hhbmdlSW1hZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4Kys7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPT09IHRoaXMuaW1hZ2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm9uQWN0aXZlQ2hhbmdlLmVtaXQodGhpcy5zZWxlY3RlZEluZGV4KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRDaGFuZ2VUaW1lb3V0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlJbWFnZUNvbXBvbmVudC5wcm90b3R5cGUuc2hvd1ByZXYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FuU2hvd1ByZXYoKSAmJiB0aGlzLmNhbkNoYW5nZUltYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleC0tO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEluZGV4IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGhpcy5pbWFnZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm9uQWN0aXZlQ2hhbmdlLmVtaXQodGhpcy5zZWxlY3RlZEluZGV4KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRDaGFuZ2VUaW1lb3V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUltYWdlQ29tcG9uZW50LnByb3RvdHlwZS5zZXRDaGFuZ2VUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jYW5DaGFuZ2VJbWFnZSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciAvKiogQHR5cGUgez99ICovIHRpbWVvdXQgPSAxMDAwO1xyXG4gICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbiA9PT0gTmd4R2FsbGVyeUFuaW1hdGlvbi5TbGlkZVxyXG4gICAgICAgICAgICB8fCB0aGlzLmFuaW1hdGlvbiA9PT0gTmd4R2FsbGVyeUFuaW1hdGlvbi5GYWRlKSB7XHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSA1MDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jYW5DaGFuZ2VJbWFnZSA9IHRydWU7XHJcbiAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5SW1hZ2VDb21wb25lbnQucHJvdG90eXBlLmNhblNob3dOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmltYWdlcykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmZpbml0eU1vdmUgfHwgdGhpcy5zZWxlY3RlZEluZGV4IDwgdGhpcy5pbWFnZXMubGVuZ3RoIC0gMVxyXG4gICAgICAgICAgICAgICAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUltYWdlQ29tcG9uZW50LnByb3RvdHlwZS5jYW5TaG93UHJldiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pbWFnZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5maW5pdHlNb3ZlIHx8IHRoaXMuc2VsZWN0ZWRJbmRleCA+IDAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBpbWFnZVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUltYWdlQ29tcG9uZW50LnByb3RvdHlwZS5nZXRTYWZlVXJsID0gZnVuY3Rpb24gKGltYWdlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2FuaXRpemF0aW9uLmJ5cGFzc1NlY3VyaXR5VHJ1c3RTdHlsZSh0aGlzLmhlbHBlclNlcnZpY2UuZ2V0QmFja2dyb3VuZFVybChpbWFnZSkpO1xyXG4gICAgfTtcclxuICAgIE5neEdhbGxlcnlJbWFnZUNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xyXG4gICAgICAgIHsgdHlwZTogY29yZS5Db21wb25lbnQsIGFyZ3M6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduZ3gtZ2FsbGVyeS1pbWFnZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJuZ3gtZ2FsbGVyeS1pbWFnZS13cmFwcGVyIG5neC1nYWxsZXJ5LWFuaW1hdGlvbi17e2FuaW1hdGlvbn19IG5neC1nYWxsZXJ5LWltYWdlLXNpemUte3tzaXplfX1cXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LWltYWdlXFxcIiAqbmdGb3I9XFxcImxldCBpbWFnZSBvZiBnZXRJbWFnZXMoKTsgbGV0IGkgPSBpbmRleDtcXFwiIFtuZ0NsYXNzXT1cXFwieyAnbmd4LWdhbGxlcnktYWN0aXZlJzogc2VsZWN0ZWRJbmRleCA9PSBpbWFnZS5pbmRleCwgJ25neC1nYWxsZXJ5LWluYWN0aXZlLWxlZnQnOiBzZWxlY3RlZEluZGV4ID4gaW1hZ2UuaW5kZXgsICduZ3gtZ2FsbGVyeS1pbmFjdGl2ZS1yaWdodCc6IHNlbGVjdGVkSW5kZXggPCBpbWFnZS5pbmRleCwgJ25neC1nYWxsZXJ5LWNsaWNrYWJsZSc6IGNsaWNrYWJsZSB9XFxcIiBbc3R5bGUuYmFja2dyb3VuZC1pbWFnZV09XFxcImdldFNhZmVVcmwoaW1hZ2Uuc3JjKVxcXCIgKGNsaWNrKT1cXFwiaGFuZGxlQ2xpY2soJGV2ZW50LCBpbWFnZS5pbmRleClcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJuZ3gtZ2FsbGVyeS1pY29ucy13cmFwcGVyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxuZ3gtZ2FsbGVyeS1hY3Rpb24gKm5nRm9yPVxcXCJsZXQgYWN0aW9uIG9mIGFjdGlvbnNcXFwiIFtpY29uXT1cXFwiYWN0aW9uLmljb25cXFwiIFtkaXNhYmxlZF09XFxcImFjdGlvbi5kaXNhYmxlZFxcXCIgW3RpdGxlVGV4dF09XFxcImFjdGlvbi50aXRsZVRleHRcXFwiIChvbkNsaWNrKT1cXFwiYWN0aW9uLm9uQ2xpY2soJGV2ZW50LCBpbWFnZS5pbmRleClcXFwiPjwvbmd4LWdhbGxlcnktYWN0aW9uPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibmd4LWdhbGxlcnktaW1hZ2UtdGV4dFxcXCIgKm5nSWY9XFxcInNob3dEZXNjcmlwdGlvbiAmJiBkZXNjcmlwdGlvbnNbaW1hZ2UuaW5kZXhdXFxcIiBbaW5uZXJIVE1MXT1cXFwiZGVzY3JpcHRpb25zW2ltYWdlLmluZGV4XVxcXCIgKGNsaWNrKT1cXFwiJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXFxcIj48L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPG5neC1nYWxsZXJ5LWJ1bGxldHMgKm5nSWY9XFxcImJ1bGxldHNcXFwiIFtjb3VudF09XFxcImltYWdlcy5sZW5ndGhcXFwiIFthY3RpdmVdPVxcXCJzZWxlY3RlZEluZGV4XFxcIiAob25DaGFuZ2UpPVxcXCJzaG93KCRldmVudClcXFwiPjwvbmd4LWdhbGxlcnktYnVsbGV0cz5cXG4gICAgICAgIDxuZ3gtZ2FsbGVyeS1hcnJvd3MgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LWltYWdlLXNpemUte3tzaXplfX1cXFwiICpuZ0lmPVxcXCJhcnJvd3NcXFwiIChvblByZXZDbGljayk9XFxcInNob3dQcmV2KClcXFwiIChvbk5leHRDbGljayk9XFxcInNob3dOZXh0KClcXFwiIFtwcmV2RGlzYWJsZWRdPVxcXCIhY2FuU2hvd1ByZXYoKVxcXCIgW25leHREaXNhYmxlZF09XFxcIiFjYW5TaG93TmV4dCgpXFxcIiBbYXJyb3dQcmV2SWNvbl09XFxcImFycm93UHJldkljb25cXFwiIFthcnJvd05leHRJY29uXT1cXFwiYXJyb3dOZXh0SWNvblxcXCI+PC9uZ3gtZ2FsbGVyeS1hcnJvd3M+XFxuICAgIFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3QgeyB3aWR0aDogMTAwJTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBwb3NpdGlvbjogcmVsYXRpdmU7IH0gLm5neC1nYWxsZXJ5LWltYWdlLXdyYXBwZXIgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDBweDsgdG9wOiAwcHg7IG92ZXJmbG93OiBoaWRkZW47IH0gLm5neC1nYWxsZXJ5LWltYWdlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOyBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMHB4OyB9IC5uZ3gtZ2FsbGVyeS1pbWFnZS5uZ3gtZ2FsbGVyeS1hY3RpdmUgeyB6LWluZGV4OiAxMDAwOyB9IC5uZ3gtZ2FsbGVyeS1pbWFnZS1zaXplLWNvdmVyIC5uZ3gtZ2FsbGVyeS1pbWFnZSB7IGJhY2tncm91bmQtc2l6ZTogY292ZXI7IH0gLm5neC1nYWxsZXJ5LWltYWdlLXNpemUtY29udGFpbiAubmd4LWdhbGxlcnktaW1hZ2UgeyBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47IH0gLm5neC1nYWxsZXJ5LWFuaW1hdGlvbi1mYWRlIC5uZ3gtZ2FsbGVyeS1pbWFnZSB7IGxlZnQ6IDBweDsgb3BhY2l0eTogMDsgdHJhbnNpdGlvbjogMC41cyBlYXNlLWluLW91dDsgfSAubmd4LWdhbGxlcnktYW5pbWF0aW9uLWZhZGUgLm5neC1nYWxsZXJ5LWltYWdlLm5neC1nYWxsZXJ5LWFjdGl2ZSB7IG9wYWNpdHk6IDE7IH0gLm5neC1nYWxsZXJ5LWFuaW1hdGlvbi1zbGlkZSAubmd4LWdhbGxlcnktaW1hZ2UgeyB0cmFuc2l0aW9uOiAwLjVzIGVhc2UtaW4tb3V0OyB9IC5uZ3gtZ2FsbGVyeS1hbmltYXRpb24tc2xpZGUgLm5neC1nYWxsZXJ5LWltYWdlLm5neC1nYWxsZXJ5LWFjdGl2ZSB7IGxlZnQ6IDBweDsgfSAubmd4LWdhbGxlcnktYW5pbWF0aW9uLXNsaWRlIC5uZ3gtZ2FsbGVyeS1pbWFnZS5uZ3gtZ2FsbGVyeS1pbmFjdGl2ZS1sZWZ0IHsgbGVmdDogLTEwMCU7IH0gLm5neC1nYWxsZXJ5LWFuaW1hdGlvbi1zbGlkZSAubmd4LWdhbGxlcnktaW1hZ2Uubmd4LWdhbGxlcnktaW5hY3RpdmUtcmlnaHQgeyBsZWZ0OiAxMDAlOyB9IC5uZ3gtZ2FsbGVyeS1hbmltYXRpb24tcm90YXRlIC5uZ3gtZ2FsbGVyeS1pbWFnZSB7IHRyYW5zaXRpb246IDFzIGVhc2U7IHRyYW5zZm9ybTogc2NhbGUoMy41LCAzLjUpIHJvdGF0ZSg5MGRlZyk7IGxlZnQ6IDBweDsgb3BhY2l0eTogMDsgfSAubmd4LWdhbGxlcnktYW5pbWF0aW9uLXJvdGF0ZSAubmd4LWdhbGxlcnktaW1hZ2Uubmd4LWdhbGxlcnktYWN0aXZlIHsgdHJhbnNmb3JtOiBzY2FsZSgxLCAxKSByb3RhdGUoMGRlZyk7IG9wYWNpdHk6IDE7IH0gLm5neC1nYWxsZXJ5LWFuaW1hdGlvbi16b29tIC5uZ3gtZ2FsbGVyeS1pbWFnZSB7IHRyYW5zaXRpb246IDFzIGVhc2U7IHRyYW5zZm9ybTogc2NhbGUoMi41LCAyLjUpOyBsZWZ0OiAwcHg7IG9wYWNpdHk6IDA7IH0gLm5neC1nYWxsZXJ5LWFuaW1hdGlvbi16b29tIC5uZ3gtZ2FsbGVyeS1pbWFnZS5uZ3gtZ2FsbGVyeS1hY3RpdmUgeyB0cmFuc2Zvcm06IHNjYWxlKDEsIDEpOyBvcGFjaXR5OiAxOyB9IC5uZ3gtZ2FsbGVyeS1pbWFnZS10ZXh0IHsgd2lkdGg6IDEwMCU7IGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTsgcGFkZGluZzogMTBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogd2hpdGU7IGZvbnQtc2l6ZTogMTZweDsgcG9zaXRpb246IGFic29sdXRlOyBib3R0b206IDBweDsgei1pbmRleDogMTA7IH0gXCJdXHJcbiAgICAgICAgICAgICAgICB9LF0gfSxcclxuICAgIF07XHJcbiAgICAvKipcclxuICAgICAqIEBub2NvbGxhcHNlXHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlJbWFnZUNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcclxuICAgICAgICB7IHR5cGU6IHBsYXRmb3JtQnJvd3Nlci5Eb21TYW5pdGl6ZXIsIH0sXHJcbiAgICAgICAgeyB0eXBlOiBjb3JlLkVsZW1lbnRSZWYsIH0sXHJcbiAgICAgICAgeyB0eXBlOiBOZ3hHYWxsZXJ5SGVscGVyU2VydmljZSwgfSxcclxuICAgIF07IH07XHJcbiAgICBOZ3hHYWxsZXJ5SW1hZ2VDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XHJcbiAgICAgICAgJ2ltYWdlcyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdjbGlja2FibGUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnc2VsZWN0ZWRJbmRleCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdhcnJvd3MnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYXJyb3dzQXV0b0hpZGUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnc3dpcGUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYW5pbWF0aW9uJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ3NpemUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYXJyb3dQcmV2SWNvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdhcnJvd05leHRJY29uJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2F1dG9QbGF5JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2F1dG9QbGF5SW50ZXJ2YWwnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYXV0b1BsYXlQYXVzZU9uSG92ZXInOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnaW5maW5pdHlNb3ZlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2xhenlMb2FkaW5nJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2FjdGlvbnMnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnZGVzY3JpcHRpb25zJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ3Nob3dEZXNjcmlwdGlvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdidWxsZXRzJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ29uQ2xpY2snOiBbeyB0eXBlOiBjb3JlLk91dHB1dCB9LF0sXHJcbiAgICAgICAgJ29uQWN0aXZlQ2hhbmdlJzogW3sgdHlwZTogY29yZS5PdXRwdXQgfSxdLFxyXG4gICAgICAgICdvbk1vdXNlRW50ZXInOiBbeyB0eXBlOiBjb3JlLkhvc3RMaXN0ZW5lciwgYXJnczogWydtb3VzZWVudGVyJyxdIH0sXSxcclxuICAgICAgICAnb25Nb3VzZUxlYXZlJzogW3sgdHlwZTogY29yZS5Ib3N0TGlzdGVuZXIsIGFyZ3M6IFsnbW91c2VsZWF2ZScsXSB9LF0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE5neEdhbGxlcnlJbWFnZUNvbXBvbmVudDtcclxufSgpKTtcblxudmFyIE5neEdhbGxlcnlPcmRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5neEdhbGxlcnlPcmRlcigpIHtcclxuICAgIH1cclxuICAgIE5neEdhbGxlcnlPcmRlci5Db2x1bW4gPSAxO1xyXG4gICAgTmd4R2FsbGVyeU9yZGVyLlJvdyA9IDI7XHJcbiAgICBOZ3hHYWxsZXJ5T3JkZXIuUGFnZSA9IDM7XHJcbiAgICByZXR1cm4gTmd4R2FsbGVyeU9yZGVyO1xyXG59KCkpO1xuXG52YXIgTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gc2FuaXRpemF0aW9uXHJcbiAgICAgKiBAcGFyYW0gez99IGVsZW1lbnRSZWZcclxuICAgICAqIEBwYXJhbSB7P30gaGVscGVyU2VydmljZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudChzYW5pdGl6YXRpb24sIGVsZW1lbnRSZWYsIGhlbHBlclNlcnZpY2UpIHtcclxuICAgICAgICB0aGlzLnNhbml0aXphdGlvbiA9IHNhbml0aXphdGlvbjtcclxuICAgICAgICB0aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xyXG4gICAgICAgIHRoaXMuaGVscGVyU2VydmljZSA9IGhlbHBlclNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5taW5TdG9wSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMub25BY3RpdmVDaGFuZ2UgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLmluZGV4ID0gMDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBjaGFuZ2VzXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoY2hhbmdlcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGNoYW5nZXNbJ3NlbGVjdGVkSW5kZXgnXSkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlSW5kZXgoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYW5nZXNbJ3N3aXBlJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5oZWxwZXJTZXJ2aWNlLm1hbmFnZVN3aXBlKHRoaXMuc3dpcGUsIHRoaXMuZWxlbWVudFJlZiwgJ3RodW1ibmFpbHMnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5tb3ZlUmlnaHQoKTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubW92ZUxlZnQoKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmltYWdlcykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0NvdW50VmFsdWUgPSB0aGlzLmltYWdlcy5sZW5ndGggLSAodGhpcy5yb3dzICogdGhpcy5jb2x1bW5zKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUub25Nb3VzZUVudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubW91c2VlbnRlciA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUub25Nb3VzZUxlYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubW91c2VlbnRlciA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBpbmRleFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5zZXREZWZhdWx0UG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLmluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlSW5kZXgoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlUaHVtYm5haWxzQ29tcG9uZW50LnByb3RvdHlwZS5nZXRJbWFnZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmltYWdlcykge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlbWFpbmluZ0NvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmltYWdlcy5zbGljZSgwLCB0aGlzLnJvd3MgKiB0aGlzLmNvbHVtbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmxhenlMb2FkaW5nICYmIHRoaXMub3JkZXIgIT0gTmd4R2FsbGVyeU9yZGVyLlJvdykge1xyXG4gICAgICAgICAgICB2YXIgLyoqIEB0eXBlIHs/fSAqLyBzdG9wSW5kZXggPSAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcmRlciA9PT0gTmd4R2FsbGVyeU9yZGVyLkNvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgc3RvcEluZGV4ID0gKHRoaXMuaW5kZXggKyB0aGlzLmNvbHVtbnMgKyB0aGlzLm1vdmVTaXplKSAqIHRoaXMucm93cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLm9yZGVyID09PSBOZ3hHYWxsZXJ5T3JkZXIuUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgc3RvcEluZGV4ID0gdGhpcy5pbmRleCArICgodGhpcy5jb2x1bW5zICogdGhpcy5yb3dzKSAqIDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdG9wSW5kZXggPD0gdGhpcy5taW5TdG9wSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHN0b3BJbmRleCA9IHRoaXMubWluU3RvcEluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5taW5TdG9wSW5kZXggPSBzdG9wSW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VzLnNsaWNlKDAsIHN0b3BJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbWFnZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBldmVudFxyXG4gICAgICogQHBhcmFtIHs/fSBpbmRleFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQucHJvdG90eXBlLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gKGV2ZW50LCBpbmRleCkge1xyXG4gICAgICAgIGlmICghdGhpcy5oYXNMaW5rKGluZGV4KSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgdGhpcy5vbkFjdGl2ZUNoYW5nZS5lbWl0KGluZGV4KTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBpbmRleFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQucHJvdG90eXBlLmhhc0xpbmsgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICBpZiAodGhpcy5saW5rcyAmJiB0aGlzLmxpbmtzLmxlbmd0aCAmJiB0aGlzLmxpbmtzW2luZGV4XSlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUubW92ZVJpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhbk1vdmVSaWdodCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5kZXggKz0gdGhpcy5tb3ZlU2l6ZTtcclxuICAgICAgICAgICAgdmFyIC8qKiBAdHlwZSB7P30gKi8gbWF4SW5kZXggPSB0aGlzLmdldE1heEluZGV4KCkgLSB0aGlzLmNvbHVtbnM7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmluZGV4ID4gbWF4SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBtYXhJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldFRodW1ibmFpbHNQb3NpdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlUaHVtYm5haWxzQ29tcG9uZW50LnByb3RvdHlwZS5tb3ZlTGVmdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jYW5Nb3ZlTGVmdCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5kZXggLT0gdGhpcy5tb3ZlU2l6ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldFRodW1ibmFpbHNQb3NpdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlUaHVtYm5haWxzQ29tcG9uZW50LnByb3RvdHlwZS5jYW5Nb3ZlUmlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXggKyB0aGlzLmNvbHVtbnMgPCB0aGlzLmdldE1heEluZGV4KCkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUuY2FuTW92ZUxlZnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXggIT09IDAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGluZGV4XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUuZ2V0VGh1bWJuYWlsTGVmdCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHZhciAvKiogQHR5cGUgez99ICovIGNhbGN1bGF0ZWRJbmRleDtcclxuICAgICAgICBpZiAodGhpcy5vcmRlciA9PT0gTmd4R2FsbGVyeU9yZGVyLkNvbHVtbikge1xyXG4gICAgICAgICAgICBjYWxjdWxhdGVkSW5kZXggPSBNYXRoLmZsb29yKGluZGV4IC8gdGhpcy5yb3dzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcmRlciA9PT0gTmd4R2FsbGVyeU9yZGVyLlBhZ2UpIHtcclxuICAgICAgICAgICAgY2FsY3VsYXRlZEluZGV4ID0gKGluZGV4ICUgdGhpcy5jb2x1bW5zKSArIChNYXRoLmZsb29yKGluZGV4IC8gKHRoaXMucm93cyAqIHRoaXMuY29sdW1ucykpICogdGhpcy5jb2x1bW5zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcmRlciA9PSBOZ3hHYWxsZXJ5T3JkZXIuUm93ICYmIHRoaXMucmVtYWluaW5nQ291bnQpIHtcclxuICAgICAgICAgICAgY2FsY3VsYXRlZEluZGV4ID0gaW5kZXggJSB0aGlzLmNvbHVtbnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjYWxjdWxhdGVkSW5kZXggPSBpbmRleCAlIE1hdGguY2VpbCh0aGlzLmltYWdlcy5sZW5ndGggLyB0aGlzLnJvd3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRUaHVtYm5haWxQb3NpdGlvbihjYWxjdWxhdGVkSW5kZXgsIHRoaXMuY29sdW1ucyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGluZGV4XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUuZ2V0VGh1bWJuYWlsVG9wID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdmFyIC8qKiBAdHlwZSB7P30gKi8gY2FsY3VsYXRlZEluZGV4O1xyXG4gICAgICAgIGlmICh0aGlzLm9yZGVyID09PSBOZ3hHYWxsZXJ5T3JkZXIuQ29sdW1uKSB7XHJcbiAgICAgICAgICAgIGNhbGN1bGF0ZWRJbmRleCA9IGluZGV4ICUgdGhpcy5yb3dzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLm9yZGVyID09PSBOZ3hHYWxsZXJ5T3JkZXIuUGFnZSkge1xyXG4gICAgICAgICAgICBjYWxjdWxhdGVkSW5kZXggPSBNYXRoLmZsb29yKGluZGV4IC8gdGhpcy5jb2x1bW5zKSAtIChNYXRoLmZsb29yKGluZGV4IC8gKHRoaXMucm93cyAqIHRoaXMuY29sdW1ucykpICogdGhpcy5yb3dzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcmRlciA9PSBOZ3hHYWxsZXJ5T3JkZXIuUm93ICYmIHRoaXMucmVtYWluaW5nQ291bnQpIHtcclxuICAgICAgICAgICAgY2FsY3VsYXRlZEluZGV4ID0gTWF0aC5mbG9vcihpbmRleCAvIHRoaXMuY29sdW1ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjYWxjdWxhdGVkSW5kZXggPSBNYXRoLmZsb29yKGluZGV4IC8gTWF0aC5jZWlsKHRoaXMuaW1hZ2VzLmxlbmd0aCAvIHRoaXMucm93cykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRUaHVtYm5haWxQb3NpdGlvbihjYWxjdWxhdGVkSW5kZXgsIHRoaXMucm93cyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUuZ2V0VGh1bWJuYWlsV2lkdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGh1bWJuYWlsRGltZW5zaW9uKHRoaXMuY29sdW1ucyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUuZ2V0VGh1bWJuYWlsSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRodW1ibmFpbERpbWVuc2lvbih0aGlzLnJvd3MpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQucHJvdG90eXBlLnNldFRodW1ibmFpbHNQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRodW1ibmFpbHNMZWZ0ID0gLSgoMTAwIC8gdGhpcy5jb2x1bW5zKSAqIHRoaXMuaW5kZXgpICsgJyUnO1xyXG4gICAgICAgIHRoaXMudGh1bWJuYWlsc01hcmdpbkxlZnQgPSAtKCh0aGlzLm1hcmdpbiAtICgoKHRoaXMuY29sdW1ucyAtIDEpXHJcbiAgICAgICAgICAgICogdGhpcy5tYXJnaW4pIC8gdGhpcy5jb2x1bW5zKSkgKiB0aGlzLmluZGV4KSArICdweCc7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUuc2V0RGVmYXVsdFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudGh1bWJuYWlsc0xlZnQgPSAnMHB4JztcclxuICAgICAgICB0aGlzLnRodW1ibmFpbHNNYXJnaW5MZWZ0ID0gJzBweCc7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUuY2FuU2hvd0Fycm93cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZW1haW5pbmdDb3VudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYXJyb3dzICYmIHRoaXMuaW1hZ2VzICYmIHRoaXMuaW1hZ2VzLmxlbmd0aCA+IHRoaXMuZ2V0VmlzaWJsZUNvdW50KClcclxuICAgICAgICAgICAgJiYgKCF0aGlzLmFycm93c0F1dG9IaWRlIHx8IHRoaXMubW91c2VlbnRlcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQucHJvdG90eXBlLnZhbGlkYXRlSW5kZXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2VzKSB7XHJcbiAgICAgICAgICAgIHZhciAvKiogQHR5cGUgez99ICovIG5ld0luZGV4ID0gdm9pZCAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcmRlciA9PT0gTmd4R2FsbGVyeU9yZGVyLkNvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgbmV3SW5kZXggPSBNYXRoLmZsb29yKHRoaXMuc2VsZWN0ZWRJbmRleCAvIHRoaXMucm93cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdJbmRleCA9IHRoaXMuc2VsZWN0ZWRJbmRleCAlIE1hdGguY2VpbCh0aGlzLmltYWdlcy5sZW5ndGggLyB0aGlzLnJvd3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbWFpbmluZ0NvdW50KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5ld0luZGV4IDwgdGhpcy5pbmRleCB8fCBuZXdJbmRleCA+PSB0aGlzLmluZGV4ICsgdGhpcy5jb2x1bW5zKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgLyoqIEB0eXBlIHs/fSAqLyBtYXhJbmRleCA9IHRoaXMuZ2V0TWF4SW5kZXgoKSAtIHRoaXMuY29sdW1ucztcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBuZXdJbmRleCA+IG1heEluZGV4ID8gbWF4SW5kZXggOiBuZXdJbmRleDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VGh1bWJuYWlsc1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGltYWdlXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5wcm90b3R5cGUuZ2V0U2FmZVVybCA9IGZ1bmN0aW9uIChpbWFnZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhbml0aXphdGlvbi5ieXBhc3NTZWN1cml0eVRydXN0U3R5bGUodGhpcy5oZWxwZXJTZXJ2aWNlLmdldEJhY2tncm91bmRVcmwoaW1hZ2UpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gaW5kZXhcclxuICAgICAqIEBwYXJhbSB7P30gY291bnRcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlUaHVtYm5haWxzQ29tcG9uZW50LnByb3RvdHlwZS5nZXRUaHVtYm5haWxQb3NpdGlvbiA9IGZ1bmN0aW9uIChpbmRleCwgY291bnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTYWZlU3R5bGUoJ2NhbGMoJyArICgoMTAwIC8gY291bnQpICogaW5kZXgpICsgJyUgKyAnXHJcbiAgICAgICAgICAgICsgKCh0aGlzLm1hcmdpbiAtICgoKGNvdW50IC0gMSkgKiB0aGlzLm1hcmdpbikgLyBjb3VudCkpICogaW5kZXgpICsgJ3B4KScpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBjb3VudFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQucHJvdG90eXBlLmdldFRodW1ibmFpbERpbWVuc2lvbiA9IGZ1bmN0aW9uIChjb3VudCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1hcmdpbiAhPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTYWZlU3R5bGUoJ2NhbGMoJyArICgxMDAgLyBjb3VudCkgKyAnJSAtICdcclxuICAgICAgICAgICAgICAgICsgKCgoY291bnQgLSAxKSAqIHRoaXMubWFyZ2luKSAvIGNvdW50KSArICdweCknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNhZmVTdHlsZSgnY2FsYygnICsgKDEwMCAvIGNvdW50KSArICclICsgMXB4KScpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlUaHVtYm5haWxzQ29tcG9uZW50LnByb3RvdHlwZS5nZXRNYXhJbmRleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5vcmRlciA9PSBOZ3hHYWxsZXJ5T3JkZXIuUGFnZSkge1xyXG4gICAgICAgICAgICB2YXIgLyoqIEB0eXBlIHs/fSAqLyBtYXhJbmRleCA9IChNYXRoLmZsb29yKHRoaXMuaW1hZ2VzLmxlbmd0aCAvIHRoaXMuZ2V0VmlzaWJsZUNvdW50KCkpICogdGhpcy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2VzLmxlbmd0aCAlIHRoaXMuZ2V0VmlzaWJsZUNvdW50KCkgPiB0aGlzLmNvbHVtbnMpIHtcclxuICAgICAgICAgICAgICAgIG1heEluZGV4ICs9IHRoaXMuY29sdW1ucztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1heEluZGV4ICs9IHRoaXMuaW1hZ2VzLmxlbmd0aCAlIHRoaXMuZ2V0VmlzaWJsZUNvdW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1heEluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmltYWdlcy5sZW5ndGggLyB0aGlzLnJvd3MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlUaHVtYm5haWxzQ29tcG9uZW50LnByb3RvdHlwZS5nZXRWaXNpYmxlQ291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucyAqIHRoaXMucm93cztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gdmFsdWVcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlUaHVtYm5haWxzQ29tcG9uZW50LnByb3RvdHlwZS5nZXRTYWZlU3R5bGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYW5pdGl6YXRpb24uYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBOZ3hHYWxsZXJ5VGh1bWJuYWlsc0NvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xyXG4gICAgICAgIHsgdHlwZTogY29yZS5Db21wb25lbnQsIGFyZ3M6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduZ3gtZ2FsbGVyeS10aHVtYm5haWxzJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGRpdiBjbGFzcz1cXFwibmd4LWdhbGxlcnktdGh1bWJuYWlscy13cmFwcGVyIG5neC1nYWxsZXJ5LXRodW1ibmFpbC1zaXplLXt7c2l6ZX19XFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LXRodW1ibmFpbHNcXFwiIFtzdHlsZS50cmFuc2Zvcm1dPVxcXCIndHJhbnNsYXRlWCgnICsgdGh1bWJuYWlsc0xlZnQgKyAnKSdcXFwiIFtzdHlsZS5tYXJnaW5MZWZ0XT1cXFwidGh1bWJuYWlsc01hcmdpbkxlZnRcXFwiPlxcbiAgICAgICAgICAgIDxhIFtocmVmXT1cXFwiaGFzTGluayhpKSA/IGxpbmtzW2ldIDogJyMnXFxcIiBbdGFyZ2V0XT1cXFwibGlua1RhcmdldFxcXCIgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LXRodW1ibmFpbFxcXCIgKm5nRm9yPVxcXCJsZXQgaW1hZ2Ugb2YgZ2V0SW1hZ2VzKCk7IGxldCBpID0gaW5kZXg7XFxcIiBbc3R5bGUuYmFja2dyb3VuZC1pbWFnZV09XFxcImdldFNhZmVVcmwoaW1hZ2UpXFxcIiAoY2xpY2spPVxcXCJoYW5kbGVDbGljaygkZXZlbnQsIGkpXFxcIiBbc3R5bGUud2lkdGhdPVxcXCJnZXRUaHVtYm5haWxXaWR0aCgpXFxcIiBbc3R5bGUuaGVpZ2h0XT1cXFwiZ2V0VGh1bWJuYWlsSGVpZ2h0KClcXFwiIFtzdHlsZS5sZWZ0XT1cXFwiZ2V0VGh1bWJuYWlsTGVmdChpKVxcXCIgW3N0eWxlLnRvcF09XFxcImdldFRodW1ibmFpbFRvcChpKVxcXCIgW25nQ2xhc3NdPVxcXCJ7ICduZ3gtZ2FsbGVyeS1hY3RpdmUnOiBpID09IHNlbGVjdGVkSW5kZXgsICduZ3gtZ2FsbGVyeS1jbGlja2FibGUnOiBjbGlja2FibGUgfVxcXCIgW2F0dHIuYXJpYS1sYWJlbF09XFxcImxhYmVsc1tpXVxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LWljb25zLXdyYXBwZXJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPG5neC1nYWxsZXJ5LWFjdGlvbiAqbmdGb3I9XFxcImxldCBhY3Rpb24gb2YgYWN0aW9uc1xcXCIgW2ljb25dPVxcXCJhY3Rpb24uaWNvblxcXCIgW2Rpc2FibGVkXT1cXFwiYWN0aW9uLmRpc2FibGVkXFxcIiBbdGl0bGVUZXh0XT1cXFwiYWN0aW9uLnRpdGxlVGV4dFxcXCIgKG9uQ2xpY2spPVxcXCJhY3Rpb24ub25DbGljaygkZXZlbnQsIGkpXFxcIj48L25neC1nYWxsZXJ5LWFjdGlvbj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LXJlbWFpbmluZy1jb3VudC1vdmVybGF5XFxcIiAqbmdJZj1cXFwicmVtYWluaW5nQ291bnQgJiYgcmVtYWluaW5nQ291bnRWYWx1ZSAmJiAoaSA9PSAocm93cyAqIGNvbHVtbnMpIC0gMSlcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcIm5neC1nYWxsZXJ5LXJlbWFpbmluZy1jb3VudFxcXCI+K3t7cmVtYWluaW5nQ291bnRWYWx1ZX19PC9zcGFuPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2E+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICAgIDxuZ3gtZ2FsbGVyeS1hcnJvd3MgKm5nSWY9XFxcImNhblNob3dBcnJvd3MoKVxcXCIgKG9uUHJldkNsaWNrKT1cXFwibW92ZUxlZnQoKVxcXCIgKG9uTmV4dENsaWNrKT1cXFwibW92ZVJpZ2h0KClcXFwiIFtwcmV2RGlzYWJsZWRdPVxcXCIhY2FuTW92ZUxlZnQoKVxcXCIgW25leHREaXNhYmxlZF09XFxcIiFjYW5Nb3ZlUmlnaHQoKVxcXCIgW2Fycm93UHJldkljb25dPVxcXCJhcnJvd1ByZXZJY29uXFxcIiBbYXJyb3dOZXh0SWNvbl09XFxcImFycm93TmV4dEljb25cXFwiPjwvbmd4LWdhbGxlcnktYXJyb3dzPlxcbiAgICBcIixcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0IHsgd2lkdGg6IDEwMCU7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgcG9zaXRpb246IHJlbGF0aXZlOyB9IC5uZ3gtZ2FsbGVyeS10aHVtYm5haWxzLXdyYXBwZXIgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IG92ZXJmbG93OiBoaWRkZW47IH0gLm5neC1nYWxsZXJ5LXRodW1ibmFpbHMgeyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDBweDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOyB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC41cyBlYXNlLWluLW91dDsgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTsgfSAubmd4LWdhbGxlcnktdGh1bWJuYWlscyAubmd4LWdhbGxlcnktdGh1bWJuYWlsIHsgcG9zaXRpb246IGFic29sdXRlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyB9IC5uZ3gtZ2FsbGVyeS10aHVtYm5haWwtc2l6ZS1jb3ZlciAubmd4LWdhbGxlcnktdGh1bWJuYWlscyAubmd4LWdhbGxlcnktdGh1bWJuYWlsIHsgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsgfSAubmd4LWdhbGxlcnktdGh1bWJuYWlsLXNpemUtY29udGFpbiAubmd4LWdhbGxlcnktdGh1bWJuYWlscyAubmd4LWdhbGxlcnktdGh1bWJuYWlsIHsgYmFja2dyb3VuZC1zaXplOiBjb250YWluOyB9IC5uZ3gtZ2FsbGVyeS1yZW1haW5pbmctY291bnQtb3ZlcmxheSB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMHB4OyB0b3A6IDBweDsgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpOyB9IC5uZ3gtZ2FsbGVyeS1yZW1haW5pbmctY291bnQgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogNTAlOyBsZWZ0OiA1MCU7IHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOyBjb2xvcjogd2hpdGU7IGZvbnQtc2l6ZTogMzBweDsgfSBcIl1cclxuICAgICAgICAgICAgICAgIH0sXSB9LFxyXG4gICAgXTtcclxuICAgIC8qKlxyXG4gICAgICogQG5vY29sbGFwc2VcclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXHJcbiAgICAgICAgeyB0eXBlOiBwbGF0Zm9ybUJyb3dzZXIuRG9tU2FuaXRpemVyLCB9LFxyXG4gICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxyXG4gICAgICAgIHsgdHlwZTogTmd4R2FsbGVyeUhlbHBlclNlcnZpY2UsIH0sXHJcbiAgICBdOyB9O1xyXG4gICAgTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XHJcbiAgICAgICAgJ2ltYWdlcyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdsaW5rcyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdsYWJlbHMnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnbGlua1RhcmdldCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdjb2x1bW5zJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ3Jvd3MnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYXJyb3dzJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2Fycm93c0F1dG9IaWRlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ21hcmdpbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdzZWxlY3RlZEluZGV4JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2NsaWNrYWJsZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdzd2lwZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdzaXplJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2Fycm93UHJldkljb24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYXJyb3dOZXh0SWNvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdtb3ZlU2l6ZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdvcmRlcic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdyZW1haW5pbmdDb3VudCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdsYXp5TG9hZGluZyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdhY3Rpb25zJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ29uQWN0aXZlQ2hhbmdlJzogW3sgdHlwZTogY29yZS5PdXRwdXQgfSxdLFxyXG4gICAgICAgICdvbk1vdXNlRW50ZXInOiBbeyB0eXBlOiBjb3JlLkhvc3RMaXN0ZW5lciwgYXJnczogWydtb3VzZWVudGVyJyxdIH0sXSxcclxuICAgICAgICAnb25Nb3VzZUxlYXZlJzogW3sgdHlwZTogY29yZS5Ib3N0TGlzdGVuZXIsIGFyZ3M6IFsnbW91c2VsZWF2ZScsXSB9LF0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE5neEdhbGxlcnlUaHVtYm5haWxzQ29tcG9uZW50O1xyXG59KCkpO1xuXG52YXIgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gc2FuaXRpemF0aW9uXHJcbiAgICAgKiBAcGFyYW0gez99IGVsZW1lbnRSZWZcclxuICAgICAqIEBwYXJhbSB7P30gaGVscGVyU2VydmljZVxyXG4gICAgICogQHBhcmFtIHs/fSByZW5kZXJlclxyXG4gICAgICogQHBhcmFtIHs/fSBjaGFuZ2VEZXRlY3RvclJlZlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudChzYW5pdGl6YXRpb24sIGVsZW1lbnRSZWYsIGhlbHBlclNlcnZpY2UsIHJlbmRlcmVyLCBjaGFuZ2VEZXRlY3RvclJlZikge1xyXG4gICAgICAgIHRoaXMuc2FuaXRpemF0aW9uID0gc2FuaXRpemF0aW9uO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudFJlZiA9IGVsZW1lbnRSZWY7XHJcbiAgICAgICAgdGhpcy5oZWxwZXJTZXJ2aWNlID0gaGVscGVyU2VydmljZTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZiA9IGNoYW5nZURldGVjdG9yUmVmO1xyXG4gICAgICAgIHRoaXMuc2hvd1NwaW5uZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uTGVmdCA9IDA7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblRvcCA9IDA7XHJcbiAgICAgICAgdGhpcy56b29tVmFsdWUgPSAxO1xyXG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucm90YXRlVmFsdWUgPSAwO1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMub25PcGVuID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy5vbkNsb3NlID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy5vbkFjdGl2ZUNoYW5nZSA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsWCA9IDA7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsWSA9IDA7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsTGVmdCA9IDA7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsVG9wID0gMDtcclxuICAgICAgICB0aGlzLmlzTW92ZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXJyb3dzICYmIHRoaXMuYXJyb3dzQXV0b0hpZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5hcnJvd3MgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGNoYW5nZXNcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5uZ09uQ2hhbmdlcyA9IGZ1bmN0aW9uIChjaGFuZ2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoY2hhbmdlc1snc3dpcGUnXSkge1xyXG4gICAgICAgICAgICB0aGlzLmhlbHBlclNlcnZpY2UubWFuYWdlU3dpcGUodGhpcy5zd2lwZSwgdGhpcy5lbGVtZW50UmVmLCAncHJldmlldycsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNob3dOZXh0KCk7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNob3dQcmV2KCk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5rZXlEb3duTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5rZXlEb3duTGlzdGVuZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUub25Nb3VzZUVudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmFycm93c0F1dG9IaWRlICYmICF0aGlzLmFycm93cykge1xyXG4gICAgICAgICAgICB0aGlzLmFycm93cyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLm9uTW91c2VMZWF2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5hcnJvd3NBdXRvSGlkZSAmJiB0aGlzLmFycm93cykge1xyXG4gICAgICAgICAgICB0aGlzLmFycm93cyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLm9uS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmtleWJvYXJkTmF2aWdhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNLZXlib2FyZFByZXYoZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQcmV2KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzS2V5Ym9hcmROZXh0KGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNsb3NlT25Fc2MgJiYgdGhpcy5pc0tleWJvYXJkRXNjKGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGluZGV4XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5vbk9wZW4uZW1pdCgpO1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zaG93KHRydWUpO1xyXG4gICAgICAgIGlmICh0aGlzLmZvcmNlRnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICB0aGlzLm1hbmFnZUZ1bGxzY3JlZW4oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5rZXlEb3duTGlzdGVuZXIgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbkdsb2JhbChcIndpbmRvd1wiLCBcImtleWRvd25cIiwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLm9uS2V5RG93bihlKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNsb3NlRnVsbHNjcmVlbigpO1xyXG4gICAgICAgIHRoaXMub25DbG9zZS5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy5zdG9wQXV0b1BsYXkoKTtcclxuICAgICAgICBpZiAodGhpcy5rZXlEb3duTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5rZXlEb3duTGlzdGVuZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUuaW1hZ2VNb3VzZUVudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmF1dG9QbGF5ICYmIHRoaXMuYXV0b1BsYXlQYXVzZU9uSG92ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wQXV0b1BsYXkoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUuaW1hZ2VNb3VzZUxlYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmF1dG9QbGF5ICYmIHRoaXMuYXV0b1BsYXlQYXVzZU9uSG92ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydEF1dG9QbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLnN0YXJ0QXV0b1BsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5hdXRvUGxheSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BBdXRvUGxheSgpO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnNob3dOZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbmRleCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNob3dOZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRoaXMuYXV0b1BsYXlJbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLnN0b3BBdXRvUGxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy50aW1lcikge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBpbmRleFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLnNob3dBdEluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMuc2hvdygpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLnNob3dOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhblNob3dOZXh0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbmRleCA9PT0gdGhpcy5pbWFnZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNob3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLnNob3dQcmV2ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhblNob3dQcmV2KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRleC0tO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLmltYWdlcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5jYW5TaG93TmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5pbWFnZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5maW5pdHlNb3ZlIHx8IHRoaXMuaW5kZXggPCB0aGlzLmltYWdlcy5sZW5ndGggLSAxID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5jYW5TaG93UHJldiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5pbWFnZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5maW5pdHlNb3ZlIHx8IHRoaXMuaW5kZXggPiAwID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5tYW5hZ2VGdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZ1bGxzY3JlZW4gfHwgdGhpcy5mb3JjZUZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgdmFyIC8qKiBAdHlwZSB7P30gKi8gZG9jID0gKGRvY3VtZW50KTtcclxuICAgICAgICAgICAgaWYgKCFkb2MuZnVsbHNjcmVlbkVsZW1lbnQgJiYgIWRvYy5tb3pGdWxsU2NyZWVuRWxlbWVudFxyXG4gICAgICAgICAgICAgICAgJiYgIWRvYy53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCAmJiAhZG9jLm1zRnVsbHNjcmVlbkVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3BlbkZ1bGxzY3JlZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGltYWdlXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUuZ2V0U2FmZVVybCA9IGZ1bmN0aW9uIChpbWFnZSkge1xyXG4gICAgICAgIHJldHVybiBpbWFnZS5zdWJzdHIoMCwgMTApID09PSAnZGF0YTppbWFnZScgP1xyXG4gICAgICAgICAgICBpbWFnZSA6IHRoaXMuc2FuaXRpemF0aW9uLmJ5cGFzc1NlY3VyaXR5VHJ1c3RVcmwoaW1hZ2UpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLnpvb21JbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jYW5ab29tSW4oKSkge1xyXG4gICAgICAgICAgICB0aGlzLnpvb21WYWx1ZSArPSB0aGlzLnpvb21TdGVwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy56b29tVmFsdWUgPiB0aGlzLnpvb21NYXgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuem9vbVZhbHVlID0gdGhpcy56b29tTWF4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLnpvb21PdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FuWm9vbU91dCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuem9vbVZhbHVlIC09IHRoaXMuem9vbVN0ZXA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnpvb21WYWx1ZSA8IHRoaXMuem9vbU1pbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy56b29tVmFsdWUgPSB0aGlzLnpvb21NaW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuem9vbVZhbHVlIDw9IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLnJvdGF0ZUxlZnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yb3RhdGVWYWx1ZSAtPSA5MDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5yb3RhdGVSaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJvdGF0ZVZhbHVlICs9IDkwO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLmdldFRyYW5zZm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYW5pdGl6YXRpb24uYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKCdzY2FsZSgnICsgdGhpcy56b29tVmFsdWUgKyAnKSByb3RhdGUoJyArIHRoaXMucm90YXRlVmFsdWUgKyAnZGVnKScpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLmNhblpvb21JbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy56b29tVmFsdWUgPCB0aGlzLnpvb21NYXggPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUuY2FuWm9vbU91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy56b29tVmFsdWUgPiB0aGlzLnpvb21NaW4gPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUuY2FuRHJhZ09uWm9vbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy56b29tICYmIHRoaXMuem9vbVZhbHVlID4gMTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLm1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhbkRyYWdPblpvb20oKSkge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxYID0gdGhpcy5nZXRDbGllbnRYKGUpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxZID0gdGhpcy5nZXRDbGllbnRZKGUpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxMZWZ0ID0gdGhpcy5wb3NpdGlvbkxlZnQ7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFRvcCA9IHRoaXMucG9zaXRpb25Ub3A7XHJcbiAgICAgICAgICAgIHRoaXMuaXNNb3ZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB0aGlzLmlzTW92ZSA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBlXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUubW91c2VNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNb3ZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25MZWZ0ID0gdGhpcy5pbml0aWFsTGVmdCArICh0aGlzLmdldENsaWVudFgoZSkgLSB0aGlzLmluaXRpYWxYKTtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvblRvcCA9IHRoaXMuaW5pdGlhbFRvcCArICh0aGlzLmdldENsaWVudFkoZSkgLSB0aGlzLmluaXRpYWxZKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGVcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5nZXRDbGllbnRYID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICByZXR1cm4gZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPyBlLnRvdWNoZXNbMF0uY2xpZW50WCA6IGUuY2xpZW50WDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLmdldENsaWVudFkgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHJldHVybiBlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA/IGUudG91Y2hlc1swXS5jbGllbnRZIDogZS5jbGllbnRZO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLnJlc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuem9vbSkge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uTGVmdCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25Ub3AgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLmlzS2V5Ym9hcmROZXh0ID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICByZXR1cm4gZS5rZXlDb2RlID09PSAzOSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLmlzS2V5Ym9hcmRQcmV2ID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICByZXR1cm4gZS5rZXlDb2RlID09PSAzNyA/IHRydWUgOiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLmlzS2V5Ym9hcmRFc2MgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHJldHVybiBlLmtleUNvZGUgPT09IDI3ID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLm9wZW5GdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAvKiogQHR5cGUgez99ICovIGVsZW1lbnQgPSAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcclxuICAgICAgICBpZiAoZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikge1xyXG4gICAgICAgICAgICBlbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5jbG9zZUZ1bGxzY3JlZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNGdWxsc2NyZWVuKCkpIHtcclxuICAgICAgICAgICAgdmFyIC8qKiBAdHlwZSB7P30gKi8gZG9jID0gKGRvY3VtZW50KTtcclxuICAgICAgICAgICAgaWYgKGRvYy5leGl0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICAgICAgZG9jLmV4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZG9jLm1zRXhpdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIGRvYy5tc0V4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZG9jLm1vekNhbmNlbEZ1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIGRvYy5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZG9jLndlYmtpdEV4aXRGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICBkb2Mud2Via2l0RXhpdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5pc0Z1bGxzY3JlZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIC8qKiBAdHlwZSB7P30gKi8gZG9jID0gKGRvY3VtZW50KTtcclxuICAgICAgICByZXR1cm4gZG9jLmZ1bGxzY3JlZW5FbGVtZW50IHx8IGRvYy53ZWJraXRGdWxsc2NyZWVuRWxlbWVudFxyXG4gICAgICAgICAgICB8fCBkb2MubW96RnVsbFNjcmVlbkVsZW1lbnQgfHwgZG9jLm1zRnVsbHNjcmVlbkVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez89fSBmaXJzdFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoZmlyc3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChmaXJzdCA9PT0gdm9pZCAwKSB7IGZpcnN0ID0gZmFsc2U7IH1cclxuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3RvcEF1dG9QbGF5KCk7XHJcbiAgICAgICAgdGhpcy5vbkFjdGl2ZUNoYW5nZS5lbWl0KHRoaXMuaW5kZXgpO1xyXG4gICAgICAgIGlmIChmaXJzdCB8fCAhdGhpcy5hbmltYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fc2hvdygpOyB9LCA2MDApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5fc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuem9vbVZhbHVlID0gMTtcclxuICAgICAgICB0aGlzLnJvdGF0ZVZhbHVlID0gMDtcclxuICAgICAgICB0aGlzLnJlc2V0UG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLnNyYyA9IHRoaXMuZ2V0U2FmZVVybCgvKiogQHR5cGUgez99ICovICh0aGlzLmltYWdlc1t0aGlzLmluZGV4XSkpO1xyXG4gICAgICAgIHRoaXMuc3JjSW5kZXggPSB0aGlzLmluZGV4O1xyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSB0aGlzLmRlc2NyaXB0aW9uc1t0aGlzLmluZGV4XTtcclxuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuaXNMb2FkZWQoX3RoaXMucHJldmlld0ltYWdlLm5hdGl2ZUVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGFydEF1dG9QbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNob3dTcGlubmVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5wcmV2aWV3SW1hZ2UubmF0aXZlRWxlbWVudC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNob3dTcGlubmVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJldmlld0ltYWdlLm5hdGl2ZUVsZW1lbnQub25sb2FkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGFydEF1dG9QbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGltZ1xyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLmlzTG9hZGVkID0gZnVuY3Rpb24gKGltZykge1xyXG4gICAgICAgIGlmICghaW1nLmNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBpbWcubmF0dXJhbFdpZHRoICE9PSAndW5kZWZpbmVkJyAmJiBpbWcubmF0dXJhbFdpZHRoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcclxuICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmd4LWdhbGxlcnktcHJldmlldycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgICAgICA8bmd4LWdhbGxlcnktYXJyb3dzICpuZ0lmPVxcXCJhcnJvd3NcXFwiIChvblByZXZDbGljayk9XFxcInNob3dQcmV2KClcXFwiIChvbk5leHRDbGljayk9XFxcInNob3dOZXh0KClcXFwiIFtwcmV2RGlzYWJsZWRdPVxcXCIhY2FuU2hvd1ByZXYoKVxcXCIgW25leHREaXNhYmxlZF09XFxcIiFjYW5TaG93TmV4dCgpXFxcIiBbYXJyb3dQcmV2SWNvbl09XFxcImFycm93UHJldkljb25cXFwiIFthcnJvd05leHRJY29uXT1cXFwiYXJyb3dOZXh0SWNvblxcXCI+PC9uZ3gtZ2FsbGVyeS1hcnJvd3M+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJuZ3gtZ2FsbGVyeS1wcmV2aWV3LXRvcFxcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibmd4LWdhbGxlcnktcHJldmlldy1pY29uc1xcXCI+XFxuICAgICAgICAgICAgICAgIDxuZ3gtZ2FsbGVyeS1hY3Rpb24gKm5nRm9yPVxcXCJsZXQgYWN0aW9uIG9mIGFjdGlvbnNcXFwiIFtpY29uXT1cXFwiYWN0aW9uLmljb25cXFwiIFtkaXNhYmxlZF09XFxcImFjdGlvbi5kaXNhYmxlZFxcXCIgW3RpdGxlVGV4dF09XFxcImFjdGlvbi50aXRsZVRleHRcXFwiIChvbkNsaWNrKT1cXFwiYWN0aW9uLm9uQ2xpY2soJGV2ZW50LCBpbmRleClcXFwiPjwvbmd4LWdhbGxlcnktYWN0aW9uPlxcbiAgICAgICAgICAgICAgICA8YSAqbmdJZj1cXFwiZG93bmxvYWQgJiYgc3JjXFxcIiBbaHJlZl09XFxcInNyY1xcXCIgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LWljb25cXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiBkb3dubG9hZD5cXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJuZ3gtZ2FsbGVyeS1pY29uLWNvbnRlbnQge3sgZG93bmxvYWRJY29uIH19XFxcIj48L2k+XFxuICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgPG5neC1nYWxsZXJ5LWFjdGlvbiAqbmdJZj1cXFwiem9vbVxcXCIgW2ljb25dPVxcXCJ6b29tT3V0SWNvblxcXCIgW2Rpc2FibGVkXT1cXFwiIWNhblpvb21PdXQoKVxcXCIgKG9uQ2xpY2spPVxcXCJ6b29tT3V0KClcXFwiPjwvbmd4LWdhbGxlcnktYWN0aW9uPlxcbiAgICAgICAgICAgICAgICA8bmd4LWdhbGxlcnktYWN0aW9uICpuZ0lmPVxcXCJ6b29tXFxcIiBbaWNvbl09XFxcInpvb21Jbkljb25cXFwiIFtkaXNhYmxlZF09XFxcIiFjYW5ab29tSW4oKVxcXCIgKG9uQ2xpY2spPVxcXCJ6b29tSW4oKVxcXCI+PC9uZ3gtZ2FsbGVyeS1hY3Rpb24+XFxuICAgICAgICAgICAgICAgIDxuZ3gtZ2FsbGVyeS1hY3Rpb24gKm5nSWY9XFxcInJvdGF0ZVxcXCIgW2ljb25dPVxcXCJyb3RhdGVMZWZ0SWNvblxcXCIgKG9uQ2xpY2spPVxcXCJyb3RhdGVMZWZ0KClcXFwiPjwvbmd4LWdhbGxlcnktYWN0aW9uPlxcbiAgICAgICAgICAgICAgICA8bmd4LWdhbGxlcnktYWN0aW9uICpuZ0lmPVxcXCJyb3RhdGVcXFwiIFtpY29uXT1cXFwicm90YXRlUmlnaHRJY29uXFxcIiAob25DbGljayk9XFxcInJvdGF0ZVJpZ2h0KClcXFwiPjwvbmd4LWdhbGxlcnktYWN0aW9uPlxcbiAgICAgICAgICAgICAgICA8bmd4LWdhbGxlcnktYWN0aW9uICpuZ0lmPVxcXCJmdWxsc2NyZWVuXFxcIiBbaWNvbl09XFxcIiduZ3gtZ2FsbGVyeS1mdWxsc2NyZWVuICcgKyBmdWxsc2NyZWVuSWNvblxcXCIgKG9uQ2xpY2spPVxcXCJtYW5hZ2VGdWxsc2NyZWVuKClcXFwiPjwvbmd4LWdhbGxlcnktYWN0aW9uPlxcbiAgICAgICAgICAgICAgICA8bmd4LWdhbGxlcnktYWN0aW9uIFtpY29uXT1cXFwiJ25neC1nYWxsZXJ5LWNsb3NlICcgKyBjbG9zZUljb25cXFwiIChvbkNsaWNrKT1cXFwiY2xvc2UoKVxcXCI+PC9uZ3gtZ2FsbGVyeS1hY3Rpb24+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm5neC1zcGlubmVyLXdyYXBwZXIgbmd4LWdhbGxlcnktY2VudGVyXFxcIiBbY2xhc3Mubmd4LWdhbGxlcnktYWN0aXZlXT1cXFwic2hvd1NwaW5uZXJcXFwiPlxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJuZ3gtZ2FsbGVyeS1pY29uIG5neC1nYWxsZXJ5LXNwaW5uZXIge3tzcGlubmVySWNvbn19XFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9pPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJuZ3gtZ2FsbGVyeS1wcmV2aWV3LXdyYXBwZXJcXFwiIChjbGljayk9XFxcImNsb3NlT25DbGljayAmJiBjbG9zZSgpXFxcIiAobW91c2V1cCk9XFxcIm1vdXNlVXBIYW5kbGVyKCRldmVudClcXFwiIChtb3VzZW1vdmUpPVxcXCJtb3VzZU1vdmVIYW5kbGVyKCRldmVudClcXFwiICh0b3VjaGVuZCk9XFxcIm1vdXNlVXBIYW5kbGVyKCRldmVudClcXFwiICh0b3VjaG1vdmUpPVxcXCJtb3VzZU1vdmVIYW5kbGVyKCRldmVudClcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LXByZXZpZXctaW1nLXdyYXBwZXJcXFwiPlxcbiAgICAgICAgICAgICAgICA8aW1nICpuZ0lmPVxcXCJzcmNcXFwiICNwcmV2aWV3SW1hZ2UgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LXByZXZpZXctaW1nIG5neC1nYWxsZXJ5LWNlbnRlclxcXCIgW3NyY109XFxcInNyY1xcXCIgKGNsaWNrKT1cXFwiJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXFxcIiAobW91c2VlbnRlcik9XFxcImltYWdlTW91c2VFbnRlcigpXFxcIiAobW91c2VsZWF2ZSk9XFxcImltYWdlTW91c2VMZWF2ZSgpXFxcIiAobW91c2Vkb3duKT1cXFwibW91c2VEb3duSGFuZGxlcigkZXZlbnQpXFxcIiAodG91Y2hzdGFydCk9XFxcIm1vdXNlRG93bkhhbmRsZXIoJGV2ZW50KVxcXCIgW2NsYXNzLm5neC1nYWxsZXJ5LWFjdGl2ZV09XFxcIiFsb2FkaW5nXFxcIiBbY2xhc3MuYW5pbWF0aW9uXT1cXFwiYW5pbWF0aW9uXFxcIiBbY2xhc3Mubmd4LWdhbGxlcnktZ3JhYl09XFxcImNhbkRyYWdPblpvb20oKVxcXCIgW3N0eWxlLnRyYW5zZm9ybV09XFxcImdldFRyYW5zZm9ybSgpXFxcIiBbc3R5bGUubGVmdF09XFxcInBvc2l0aW9uTGVmdCArICdweCdcXFwiIFtzdHlsZS50b3BdPVxcXCJwb3NpdGlvblRvcCArICdweCdcXFwiLz5cXG4gICAgICAgICAgICAgICAgPG5neC1nYWxsZXJ5LWJ1bGxldHMgKm5nSWY9XFxcImJ1bGxldHNcXFwiIFtjb3VudF09XFxcImltYWdlcy5sZW5ndGhcXFwiIFthY3RpdmVdPVxcXCJpbmRleFxcXCIgKG9uQ2hhbmdlKT1cXFwic2hvd0F0SW5kZXgoJGV2ZW50KVxcXCI+PC9uZ3gtZ2FsbGVyeS1idWxsZXRzPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm5neC1nYWxsZXJ5LXByZXZpZXctdGV4dFxcXCIgKm5nSWY9XFxcInNob3dEZXNjcmlwdGlvbiAmJiBkZXNjcmlwdGlvblxcXCIgW2lubmVySFRNTF09XFxcImRlc2NyaXB0aW9uXFxcIiAoY2xpY2spPVxcXCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcXFwiPjwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3QoLm5neC1nYWxsZXJ5LWFjdGl2ZSkgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IDA7IHRvcDogMDsgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjcpOyB6LWluZGV4OiAxMDAwMDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB9IDpob3N0IHsgZGlzcGxheTogbm9uZTsgfSA6aG9zdCAvZGVlcC8gLm5neC1nYWxsZXJ5LWFycm93IHsgZm9udC1zaXplOiA1MHB4OyB9IDpob3N0IC9kZWVwLyBuZ3gtZ2FsbGVyeS1idWxsZXRzIHsgaGVpZ2h0OiA1JTsgYWxpZ24taXRlbXM6IGNlbnRlcjsgcGFkZGluZzogMHB4OyB9IC5uZ3gtZ2FsbGVyeS1wcmV2aWV3LWltZyB7IG9wYWNpdHk6IDA7IG1heC13aWR0aDogOTAlOyBtYXgtaGVpZ2h0OiA5MCU7IHVzZXItc2VsZWN0OiBub25lOyB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjVzOyB9IC5uZ3gtZ2FsbGVyeS1wcmV2aWV3LWltZy5hbmltYXRpb24geyB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXMgbGluZWFyLCB0cmFuc2Zvcm0gLjVzOyB9IC5uZ3gtZ2FsbGVyeS1wcmV2aWV3LWltZy5uZ3gtZ2FsbGVyeS1hY3RpdmUgeyBvcGFjaXR5OiAxOyB9IC5uZ3gtZ2FsbGVyeS1wcmV2aWV3LWltZy5uZ3gtZ2FsbGVyeS1ncmFiIHsgY3Vyc29yOiBncmFiOyBjdXJzb3I6IC13ZWJraXQtZ3JhYjsgfSAubmd4LWdhbGxlcnktaWNvbi5uZ3gtZ2FsbGVyeS1zcGlubmVyIHsgZm9udC1zaXplOiA1MHB4OyBsZWZ0OiAwOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH0gOmhvc3QgL2RlZXAvIC5uZ3gtZ2FsbGVyeS1wcmV2aWV3LXRvcCB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IHVzZXItc2VsZWN0OiBub25lOyB9IDpob3N0IC9kZWVwLyAubmd4LWdhbGxlcnktcHJldmlldy1pY29ucyB7IGZsb2F0OiByaWdodDsgfSA6aG9zdCAvZGVlcC8gLm5neC1nYWxsZXJ5LXByZXZpZXctaWNvbnMgLm5neC1nYWxsZXJ5LWljb24geyBwb3NpdGlvbjogcmVsYXRpdmU7IG1hcmdpbi1yaWdodDogMTBweDsgbWFyZ2luLXRvcDogMTBweDsgZm9udC1zaXplOiAyNXB4OyBjdXJzb3I6IHBvaW50ZXI7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgfSA6aG9zdCAvZGVlcC8gLm5neC1nYWxsZXJ5LXByZXZpZXctaWNvbnMgLm5neC1nYWxsZXJ5LWljb24ubmd4LWdhbGxlcnktaWNvbi1kaXNhYmxlZCB7IGN1cnNvcjogZGVmYXVsdDsgb3BhY2l0eTogMC40OyB9IC5uZ3gtc3Bpbm5lci13cmFwcGVyIHsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgZGlzcGxheTogbm9uZTsgfSAubmd4LXNwaW5uZXItd3JhcHBlci5uZ3gtZ2FsbGVyeS1hY3RpdmUgeyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH0gLm5neC1nYWxsZXJ5LWNlbnRlciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogMDsgbWFyZ2luOiBhdXRvOyB0b3A6IDA7IH0gLm5neC1nYWxsZXJ5LXByZXZpZXctdGV4dCB7IHdpZHRoOiAxMDAlOyBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNyk7IHBhZGRpbmc6IDEwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6IHdoaXRlOyBmb250LXNpemU6IDE2cHg7IGZsZXg6IDAgMSBhdXRvOyB6LWluZGV4OiAxMDsgfSAubmd4LWdhbGxlcnktcHJldmlldy13cmFwcGVyIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgZGlzcGxheTogZmxleDsgZmxleC1mbG93OiBjb2x1bW47IH0gLm5neC1nYWxsZXJ5LXByZXZpZXctaW1nLXdyYXBwZXIgeyBmbGV4OiAxIDEgYXV0bzsgcG9zaXRpb246IHJlbGF0aXZlOyB9IFwiXVxyXG4gICAgICAgICAgICAgICAgfSxdIH0sXHJcbiAgICBdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAbm9jb2xsYXBzZVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5UHJldmlld0NvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcclxuICAgICAgICB7IHR5cGU6IHBsYXRmb3JtQnJvd3Nlci5Eb21TYW5pdGl6ZXIsIH0sXHJcbiAgICAgICAgeyB0eXBlOiBjb3JlLkVsZW1lbnRSZWYsIH0sXHJcbiAgICAgICAgeyB0eXBlOiBOZ3hHYWxsZXJ5SGVscGVyU2VydmljZSwgfSxcclxuICAgICAgICB7IHR5cGU6IGNvcmUuUmVuZGVyZXIsIH0sXHJcbiAgICAgICAgeyB0eXBlOiBjb3JlLkNoYW5nZURldGVjdG9yUmVmLCB9LFxyXG4gICAgXTsgfTtcclxuICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xyXG4gICAgICAgICdpbWFnZXMnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnZGVzY3JpcHRpb25zJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ3Nob3dEZXNjcmlwdGlvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdhcnJvd3MnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYXJyb3dzQXV0b0hpZGUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnc3dpcGUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnZnVsbHNjcmVlbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdmb3JjZUZ1bGxzY3JlZW4nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnY2xvc2VPbkNsaWNrJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2Nsb3NlT25Fc2MnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAna2V5Ym9hcmROYXZpZ2F0aW9uJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2Fycm93UHJldkljb24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYXJyb3dOZXh0SWNvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdjbG9zZUljb24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnZnVsbHNjcmVlbkljb24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnc3Bpbm5lckljb24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYXV0b1BsYXknOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYXV0b1BsYXlJbnRlcnZhbCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdhdXRvUGxheVBhdXNlT25Ib3Zlcic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdpbmZpbml0eU1vdmUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnem9vbSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICd6b29tU3RlcCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICd6b29tTWF4JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ3pvb21NaW4nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnem9vbUluSWNvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICd6b29tT3V0SWNvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdhbmltYXRpb24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnYWN0aW9ucyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdyb3RhdGUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAncm90YXRlTGVmdEljb24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAncm90YXRlUmlnaHRJY29uJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2Rvd25sb2FkJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ2Rvd25sb2FkSWNvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdidWxsZXRzJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXHJcbiAgICAgICAgJ29uT3Blbic6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcclxuICAgICAgICAnb25DbG9zZSc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcclxuICAgICAgICAnb25BY3RpdmVDaGFuZ2UnOiBbeyB0eXBlOiBjb3JlLk91dHB1dCB9LF0sXHJcbiAgICAgICAgJ3ByZXZpZXdJbWFnZSc6IFt7IHR5cGU6IGNvcmUuVmlld0NoaWxkLCBhcmdzOiBbJ3ByZXZpZXdJbWFnZScsXSB9LF0sXHJcbiAgICAgICAgJ29uTW91c2VFbnRlcic6IFt7IHR5cGU6IGNvcmUuSG9zdExpc3RlbmVyLCBhcmdzOiBbJ21vdXNlZW50ZXInLF0gfSxdLFxyXG4gICAgICAgICdvbk1vdXNlTGVhdmUnOiBbeyB0eXBlOiBjb3JlLkhvc3RMaXN0ZW5lciwgYXJnczogWydtb3VzZWxlYXZlJyxdIH0sXSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQ7XHJcbn0oKSk7XG5cbnZhciBOZ3hHYWxsZXJ5SW1hZ2VTaXplID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTmd4R2FsbGVyeUltYWdlU2l6ZSgpIHtcclxuICAgIH1cclxuICAgIE5neEdhbGxlcnlJbWFnZVNpemUuQ292ZXIgPSAnY292ZXInO1xyXG4gICAgTmd4R2FsbGVyeUltYWdlU2l6ZS5Db250YWluID0gJ2NvbnRhaW4nO1xyXG4gICAgcmV0dXJuIE5neEdhbGxlcnlJbWFnZVNpemU7XHJcbn0oKSk7XG5cbnZhciBOZ3hHYWxsZXJ5TGF5b3V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTmd4R2FsbGVyeUxheW91dCgpIHtcclxuICAgIH1cclxuICAgIE5neEdhbGxlcnlMYXlvdXQuVGh1bWJuYWlsc1RvcCA9ICd0aHVtYm5haWxzLXRvcCc7XHJcbiAgICBOZ3hHYWxsZXJ5TGF5b3V0LlRodW1ibmFpbHNCb3R0b20gPSAndGh1bWJuYWlscy1ib3R0b20nO1xyXG4gICAgcmV0dXJuIE5neEdhbGxlcnlMYXlvdXQ7XHJcbn0oKSk7XG5cbnZhciBOZ3hHYWxsZXJ5QWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGFjdGlvblxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBOZ3hHYWxsZXJ5QWN0aW9uKGFjdGlvbikge1xyXG4gICAgICAgIHRoaXMuaWNvbiA9IGFjdGlvbi5pY29uO1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBhY3Rpb24uZGlzYWJsZWQgPyBhY3Rpb24uZGlzYWJsZWQgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLnRpdGxlVGV4dCA9IGFjdGlvbi50aXRsZVRleHQgPyBhY3Rpb24udGl0bGVUZXh0IDogJyc7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrID0gYWN0aW9uLm9uQ2xpY2s7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTmd4R2FsbGVyeUFjdGlvbjtcclxufSgpKTtcblxudmFyIE5neEdhbGxlcnlPcHRpb25zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IG9ialxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBOZ3hHYWxsZXJ5T3B0aW9ucyhvYmopIHtcclxuICAgICAgICB2YXIgcHJldmVudERlZmF1bHRzID0gb2JqLmJyZWFrcG9pbnQgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICBmdW5jdGlvbiB1c2Uoc291cmNlLCBkZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9iaiAmJiAoc291cmNlICE9PSB1bmRlZmluZWQgfHwgcHJldmVudERlZmF1bHRzKSA/IHNvdXJjZSA6IGRlZmF1bHRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5icmVha3BvaW50ID0gdXNlKG9iai5icmVha3BvaW50LCB1bmRlZmluZWQpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB1c2Uob2JqLndpZHRoLCAnNTAwcHgnKTtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IHVzZShvYmouaGVpZ2h0LCAnNDAwcHgnKTtcclxuICAgICAgICB0aGlzLmZ1bGxXaWR0aCA9IHVzZShvYmouZnVsbFdpZHRoLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5sYXlvdXQgPSB1c2Uob2JqLmxheW91dCwgTmd4R2FsbGVyeUxheW91dC5UaHVtYm5haWxzQm90dG9tKTtcclxuICAgICAgICB0aGlzLnN0YXJ0SW5kZXggPSB1c2Uob2JqLnN0YXJ0SW5kZXgsIDApO1xyXG4gICAgICAgIHRoaXMubGlua1RhcmdldCA9IHVzZShvYmoubGlua1RhcmdldCwgJ19ibGFuaycpO1xyXG4gICAgICAgIHRoaXMubGF6eUxvYWRpbmcgPSB1c2Uob2JqLmxhenlMb2FkaW5nLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmltYWdlID0gdXNlKG9iai5pbWFnZSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5pbWFnZVBlcmNlbnQgPSB1c2Uob2JqLmltYWdlUGVyY2VudCwgNzUpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VBcnJvd3MgPSB1c2Uob2JqLmltYWdlQXJyb3dzLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmltYWdlQXJyb3dzQXV0b0hpZGUgPSB1c2Uob2JqLmltYWdlQXJyb3dzQXV0b0hpZGUsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLmltYWdlU3dpcGUgPSB1c2Uob2JqLmltYWdlU3dpcGUsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLmltYWdlQW5pbWF0aW9uID0gdXNlKG9iai5pbWFnZUFuaW1hdGlvbiwgTmd4R2FsbGVyeUFuaW1hdGlvbi5GYWRlKTtcclxuICAgICAgICB0aGlzLmltYWdlU2l6ZSA9IHVzZShvYmouaW1hZ2VTaXplLCBOZ3hHYWxsZXJ5SW1hZ2VTaXplLkNvdmVyKTtcclxuICAgICAgICB0aGlzLmltYWdlQXV0b1BsYXkgPSB1c2Uob2JqLmltYWdlQXV0b1BsYXksIGZhbHNlKTtcclxuICAgICAgICB0aGlzLmltYWdlQXV0b1BsYXlJbnRlcnZhbCA9IHVzZShvYmouaW1hZ2VBdXRvUGxheUludGVydmFsLCAyMDAwKTtcclxuICAgICAgICB0aGlzLmltYWdlQXV0b1BsYXlQYXVzZU9uSG92ZXIgPSB1c2Uob2JqLmltYWdlQXV0b1BsYXlQYXVzZU9uSG92ZXIsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLmltYWdlSW5maW5pdHlNb3ZlID0gdXNlKG9iai5pbWFnZUluZmluaXR5TW92ZSwgZmFsc2UpO1xyXG4gICAgICAgIGlmIChvYmogJiYgb2JqLmltYWdlQWN0aW9ucyAmJiBvYmouaW1hZ2VBY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBvYmouaW1hZ2VBY3Rpb25zID0gb2JqLmltYWdlQWN0aW9ucy5tYXAoZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gbmV3IE5neEdhbGxlcnlBY3Rpb24oYWN0aW9uKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW1hZ2VBY3Rpb25zID0gdXNlKG9iai5pbWFnZUFjdGlvbnMsIFtdKTtcclxuICAgICAgICB0aGlzLmltYWdlRGVzY3JpcHRpb24gPSB1c2Uob2JqLmltYWdlRGVzY3JpcHRpb24sIGZhbHNlKTtcclxuICAgICAgICB0aGlzLmltYWdlQnVsbGV0cyA9IHVzZShvYmouaW1hZ2VCdWxsZXRzLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy50aHVtYm5haWxzID0gdXNlKG9iai50aHVtYm5haWxzLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnRodW1ibmFpbHNDb2x1bW5zID0gdXNlKG9iai50aHVtYm5haWxzQ29sdW1ucywgNCk7XHJcbiAgICAgICAgdGhpcy50aHVtYm5haWxzUm93cyA9IHVzZShvYmoudGh1bWJuYWlsc1Jvd3MsIDEpO1xyXG4gICAgICAgIHRoaXMudGh1bWJuYWlsc1BlcmNlbnQgPSB1c2Uob2JqLnRodW1ibmFpbHNQZXJjZW50LCAyNSk7XHJcbiAgICAgICAgdGhpcy50aHVtYm5haWxzTWFyZ2luID0gdXNlKG9iai50aHVtYm5haWxzTWFyZ2luLCAxMCk7XHJcbiAgICAgICAgdGhpcy50aHVtYm5haWxzQXJyb3dzID0gdXNlKG9iai50aHVtYm5haWxzQXJyb3dzLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnRodW1ibmFpbHNBcnJvd3NBdXRvSGlkZSA9IHVzZShvYmoudGh1bWJuYWlsc0Fycm93c0F1dG9IaWRlLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy50aHVtYm5haWxzU3dpcGUgPSB1c2Uob2JqLnRodW1ibmFpbHNTd2lwZSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMudGh1bWJuYWlsc01vdmVTaXplID0gdXNlKG9iai50aHVtYm5haWxzTW92ZVNpemUsIDEpO1xyXG4gICAgICAgIHRoaXMudGh1bWJuYWlsc09yZGVyID0gdXNlKG9iai50aHVtYm5haWxzT3JkZXIsIE5neEdhbGxlcnlPcmRlci5Db2x1bW4pO1xyXG4gICAgICAgIHRoaXMudGh1bWJuYWlsc1JlbWFpbmluZ0NvdW50ID0gdXNlKG9iai50aHVtYm5haWxzUmVtYWluaW5nQ291bnQsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnRodW1ibmFpbHNBc0xpbmtzID0gdXNlKG9iai50aHVtYm5haWxzQXNMaW5rcywgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMudGh1bWJuYWlsc0F1dG9IaWRlID0gdXNlKG9iai50aHVtYm5haWxzQXV0b0hpZGUsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnRodW1ibmFpbE1hcmdpbiA9IHVzZShvYmoudGh1bWJuYWlsTWFyZ2luLCAxMCk7XHJcbiAgICAgICAgdGhpcy50aHVtYm5haWxTaXplID0gdXNlKG9iai50aHVtYm5haWxTaXplLCBOZ3hHYWxsZXJ5SW1hZ2VTaXplLkNvdmVyKTtcclxuICAgICAgICBpZiAob2JqICYmIG9iai50aHVtYm5haWxBY3Rpb25zICYmIG9iai50aHVtYm5haWxBY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBvYmoudGh1bWJuYWlsQWN0aW9ucyA9IG9iai50aHVtYm5haWxBY3Rpb25zLm1hcChmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBuZXcgTmd4R2FsbGVyeUFjdGlvbihhY3Rpb24pOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aHVtYm5haWxBY3Rpb25zID0gdXNlKG9iai50aHVtYm5haWxBY3Rpb25zLCBbXSk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3ID0gdXNlKG9iai5wcmV2aWV3LCB0cnVlKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdEZXNjcmlwdGlvbiA9IHVzZShvYmoucHJldmlld0Rlc2NyaXB0aW9uLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdBcnJvd3MgPSB1c2Uob2JqLnByZXZpZXdBcnJvd3MsIHRydWUpO1xyXG4gICAgICAgIHRoaXMucHJldmlld0Fycm93c0F1dG9IaWRlID0gdXNlKG9iai5wcmV2aWV3QXJyb3dzQXV0b0hpZGUsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdTd2lwZSA9IHVzZShvYmoucHJldmlld1N3aXBlLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3RnVsbHNjcmVlbiA9IHVzZShvYmoucHJldmlld0Z1bGxzY3JlZW4sIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdGb3JjZUZ1bGxzY3JlZW4gPSB1c2Uob2JqLnByZXZpZXdGb3JjZUZ1bGxzY3JlZW4sIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdDbG9zZU9uQ2xpY2sgPSB1c2Uob2JqLnByZXZpZXdDbG9zZU9uQ2xpY2ssIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdDbG9zZU9uRXNjID0gdXNlKG9iai5wcmV2aWV3Q2xvc2VPbkVzYywgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMucHJldmlld0tleWJvYXJkTmF2aWdhdGlvbiA9IHVzZShvYmoucHJldmlld0tleWJvYXJkTmF2aWdhdGlvbiwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMucHJldmlld0FuaW1hdGlvbiA9IHVzZShvYmoucHJldmlld0FuaW1hdGlvbiwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3QXV0b1BsYXkgPSB1c2Uob2JqLnByZXZpZXdBdXRvUGxheSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMucHJldmlld0F1dG9QbGF5SW50ZXJ2YWwgPSB1c2Uob2JqLnByZXZpZXdBdXRvUGxheUludGVydmFsLCAyMDAwKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdBdXRvUGxheVBhdXNlT25Ib3ZlciA9IHVzZShvYmoucHJldmlld0F1dG9QbGF5UGF1c2VPbkhvdmVyLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3SW5maW5pdHlNb3ZlID0gdXNlKG9iai5wcmV2aWV3SW5maW5pdHlNb3ZlLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3Wm9vbSA9IHVzZShvYmoucHJldmlld1pvb20sIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdab29tU3RlcCA9IHVzZShvYmoucHJldmlld1pvb21TdGVwLCAwLjEpO1xyXG4gICAgICAgIHRoaXMucHJldmlld1pvb21NYXggPSB1c2Uob2JqLnByZXZpZXdab29tTWF4LCAyKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdab29tTWluID0gdXNlKG9iai5wcmV2aWV3Wm9vbU1pbiwgMC41KTtcclxuICAgICAgICB0aGlzLnByZXZpZXdSb3RhdGUgPSB1c2Uob2JqLnByZXZpZXdSb3RhdGUsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdEb3dubG9hZCA9IHVzZShvYmoucHJldmlld0Rvd25sb2FkLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3Q3VzdG9tID0gdXNlKG9iai5wcmV2aWV3Q3VzdG9tLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIHRoaXMucHJldmlld0J1bGxldHMgPSB1c2Uob2JqLnByZXZpZXdCdWxsZXRzLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5hcnJvd1ByZXZJY29uID0gdXNlKG9iai5hcnJvd1ByZXZJY29uLCAnZmEgZmEtYXJyb3ctY2lyY2xlLWxlZnQnKTtcclxuICAgICAgICB0aGlzLmFycm93TmV4dEljb24gPSB1c2Uob2JqLmFycm93TmV4dEljb24sICdmYSBmYS1hcnJvdy1jaXJjbGUtcmlnaHQnKTtcclxuICAgICAgICB0aGlzLmNsb3NlSWNvbiA9IHVzZShvYmouY2xvc2VJY29uLCAnZmEgZmEtdGltZXMtY2lyY2xlJyk7XHJcbiAgICAgICAgdGhpcy5mdWxsc2NyZWVuSWNvbiA9IHVzZShvYmouZnVsbHNjcmVlbkljb24sICdmYSBmYS1hcnJvd3MtYWx0Jyk7XHJcbiAgICAgICAgdGhpcy5zcGlubmVySWNvbiA9IHVzZShvYmouc3Bpbm5lckljb24sICdmYSBmYS1zcGlubmVyIGZhLXB1bHNlIGZhLTN4IGZhLWZ3Jyk7XHJcbiAgICAgICAgdGhpcy56b29tSW5JY29uID0gdXNlKG9iai56b29tSW5JY29uLCAnZmEgZmEtc2VhcmNoLXBsdXMnKTtcclxuICAgICAgICB0aGlzLnpvb21PdXRJY29uID0gdXNlKG9iai56b29tT3V0SWNvbiwgJ2ZhIGZhLXNlYXJjaC1taW51cycpO1xyXG4gICAgICAgIHRoaXMucm90YXRlTGVmdEljb24gPSB1c2Uob2JqLnJvdGF0ZUxlZnRJY29uLCAnZmEgZmEtdW5kbycpO1xyXG4gICAgICAgIHRoaXMucm90YXRlUmlnaHRJY29uID0gdXNlKG9iai5yb3RhdGVSaWdodEljb24sICdmYSBmYS1yZXBlYXQnKTtcclxuICAgICAgICB0aGlzLmRvd25sb2FkSWNvbiA9IHVzZShvYmouZG93bmxvYWRJY29uLCAnZmEgZmEtYXJyb3ctY2lyY2xlLWRvd24nKTtcclxuICAgICAgICBpZiAob2JqICYmIG9iai5hY3Rpb25zICYmIG9iai5hY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBvYmouYWN0aW9ucyA9IG9iai5hY3Rpb25zLm1hcChmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBuZXcgTmd4R2FsbGVyeUFjdGlvbihhY3Rpb24pOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gdXNlKG9iai5hY3Rpb25zLCBbXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTmd4R2FsbGVyeU9wdGlvbnM7XHJcbn0oKSk7XG5cbnZhciBOZ3hHYWxsZXJ5T3JkZXJlZEltYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IG9ialxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBOZ3hHYWxsZXJ5T3JkZXJlZEltYWdlKG9iaikge1xyXG4gICAgICAgIHRoaXMuc3JjID0gb2JqLnNyYztcclxuICAgICAgICB0aGlzLmluZGV4ID0gb2JqLmluZGV4O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE5neEdhbGxlcnlPcmRlcmVkSW1hZ2U7XHJcbn0oKSk7XG5cbnZhciBOZ3hHYWxsZXJ5Q29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IG15RWxlbWVudFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBOZ3hHYWxsZXJ5Q29tcG9uZW50KG15RWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMubXlFbGVtZW50ID0gbXlFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaW1hZ2VzUmVhZHkgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZSA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMucHJldmlld09wZW4gPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdDbG9zZSA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMucHJldmlld0NoYW5nZSA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMub2xkSW1hZ2VzTGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMuYnJlYWtwb2ludCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnByZXZCcmVha3BvaW50ID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5Q29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLm9wdGlvbnMubWFwKGZ1bmN0aW9uIChvcHQpIHsgcmV0dXJuIG5ldyBOZ3hHYWxsZXJ5T3B0aW9ucyhvcHQpOyB9KTtcclxuICAgICAgICB0aGlzLnNvcnRPcHRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5zZXRCcmVha3BvaW50KCk7XHJcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5jaGVja0Z1bGxXaWR0aCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IC8qKiBAdHlwZSB7P30gKi8gKHRoaXMuY3VycmVudE9wdGlvbnMuc3RhcnRJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUubmdEb0NoZWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmltYWdlcyAhPT0gdW5kZWZpbmVkICYmICh0aGlzLmltYWdlcy5sZW5ndGggIT09IHRoaXMub2xkSW1hZ2VzTGVuZ3RoKVxyXG4gICAgICAgICAgICB8fCAodGhpcy5pbWFnZXMgIT09IHRoaXMub2xkSW1hZ2VzKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9sZEltYWdlc0xlbmd0aCA9IHRoaXMuaW1hZ2VzLmxlbmd0aDtcclxuICAgICAgICAgICAgdGhpcy5vbGRJbWFnZXMgPSB0aGlzLmltYWdlcztcclxuICAgICAgICAgICAgdGhpcy5zZXRPcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0SW1hZ2VzKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmltYWdlcyAmJiB0aGlzLmltYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzUmVhZHkuZW1pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmltYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnJlc2V0KC8qKiBAdHlwZSB7P30gKi8gKHRoaXMuY3VycmVudE9wdGlvbnMuc3RhcnRJbmRleCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRPcHRpb25zLnRodW1ibmFpbHNBdXRvSGlkZSAmJiB0aGlzLmN1cnJlbnRPcHRpb25zLnRodW1ibmFpbHNcclxuICAgICAgICAgICAgICAgICYmIHRoaXMuaW1hZ2VzLmxlbmd0aCA8PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRPcHRpb25zLnRodW1ibmFpbHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudE9wdGlvbnMuaW1hZ2VBcnJvd3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlc2V0VGh1bWJuYWlscygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRnVsbFdpZHRoKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5Q29tcG9uZW50LnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc2V0QnJlYWtwb2ludCgpO1xyXG4gICAgICAgIGlmICh0aGlzLnByZXZCcmVha3BvaW50ICE9PSB0aGlzLmJyZWFrcG9pbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRPcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRUaHVtYm5haWxzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRPcHRpb25zICYmIHRoaXMuY3VycmVudE9wdGlvbnMuZnVsbFdpZHRoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZ1bGxXaWR0aFRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZ1bGxXaWR0aFRpbWVvdXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZnVsbFdpZHRoVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2hlY2tGdWxsV2lkdGgoKTtcclxuICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5Q29tcG9uZW50LnByb3RvdHlwZS5nZXRJbWFnZUhlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuY3VycmVudE9wdGlvbnMgJiYgdGhpcy5jdXJyZW50T3B0aW9ucy50aHVtYm5haWxzKSA/XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudE9wdGlvbnMuaW1hZ2VQZXJjZW50ICsgJyUnIDogJzEwMCUnO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUuZ2V0VGh1bWJuYWlsc0hlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50T3B0aW9ucyAmJiB0aGlzLmN1cnJlbnRPcHRpb25zLmltYWdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnY2FsYygnICsgdGhpcy5jdXJyZW50T3B0aW9ucy50aHVtYm5haWxzUGVyY2VudCArICclIC0gJ1xyXG4gICAgICAgICAgICAgICAgKyB0aGlzLmN1cnJlbnRPcHRpb25zLnRodW1ibmFpbHNNYXJnaW4gKyAncHgpJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnMTAwJSc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUuZ2V0VGh1bWJuYWlsc01hcmdpblRvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50T3B0aW9ucyAmJiB0aGlzLmN1cnJlbnRPcHRpb25zLmxheW91dCA9PT0gTmd4R2FsbGVyeUxheW91dC5UaHVtYm5haWxzQm90dG9tKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRPcHRpb25zLnRodW1ibmFpbHNNYXJnaW4gKyAncHgnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICcwcHgnO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLmdldFRodW1ibmFpbHNNYXJnaW5Cb3R0b20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE9wdGlvbnMgJiYgdGhpcy5jdXJyZW50T3B0aW9ucy5sYXlvdXQgPT09IE5neEdhbGxlcnlMYXlvdXQuVGh1bWJuYWlsc1RvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50T3B0aW9ucy50aHVtYm5haWxzTWFyZ2luICsgJ3B4JztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnMHB4JztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGluZGV4XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5Q29tcG9uZW50LnByb3RvdHlwZS5vcGVuUHJldmlldyA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRPcHRpb25zLnByZXZpZXdDdXN0b20pIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50T3B0aW9ucy5wcmV2aWV3Q3VzdG9tKGluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlld0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZpZXcub3BlbihpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUub25QcmV2aWV3T3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnByZXZpZXdPcGVuLmVtaXQoKTtcclxuICAgICAgICBpZiAodGhpcy5pbWFnZSAmJiB0aGlzLmltYWdlLmF1dG9QbGF5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3RvcEF1dG9QbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUub25QcmV2aWV3Q2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3RW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucHJldmlld0Nsb3NlLmVtaXQoKTtcclxuICAgICAgICBpZiAodGhpcy5pbWFnZSAmJiB0aGlzLmltYWdlLmF1dG9QbGF5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3RhcnRBdXRvUGxheSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gaW5kZXhcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLnNlbGVjdEZyb21JbWFnZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0KGluZGV4KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gaW5kZXhcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLnNlbGVjdEZyb21UaHVtYm5haWxzID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3QoaW5kZXgpO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRPcHRpb25zICYmIHRoaXMuY3VycmVudE9wdGlvbnMudGh1bWJuYWlscyAmJiB0aGlzLmN1cnJlbnRPcHRpb25zLnByZXZpZXdcclxuICAgICAgICAgICAgJiYgKCF0aGlzLmN1cnJlbnRPcHRpb25zLmltYWdlIHx8IHRoaXMuY3VycmVudE9wdGlvbnMudGh1bWJuYWlsc1JlbWFpbmluZ0NvdW50KSkge1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5QcmV2aWV3KHRoaXMuc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBpbmRleFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0KGluZGV4KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLnNob3dOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc2hvd05leHQoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLnNob3dQcmV2ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc2hvd1ByZXYoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLmNhblNob3dOZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmltYWdlcyAmJiB0aGlzLmN1cnJlbnRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5jdXJyZW50T3B0aW9ucy5pbWFnZUluZmluaXR5TW92ZSB8fCB0aGlzLnNlbGVjdGVkSW5kZXggPCB0aGlzLmltYWdlcy5sZW5ndGggLSAxKVxyXG4gICAgICAgICAgICAgICAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUuY2FuU2hvd1ByZXYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2VzICYmIHRoaXMuY3VycmVudE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmN1cnJlbnRPcHRpb25zLmltYWdlSW5maW5pdHlNb3ZlIHx8IHRoaXMuc2VsZWN0ZWRJbmRleCA+IDApID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gaW5kZXhcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLnByZXZpZXdTZWxlY3QgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLnByZXZpZXdDaGFuZ2UuZW1pdCh7IGluZGV4OiBpbmRleCwgaW1hZ2U6IHRoaXMuaW1hZ2VzW2luZGV4XSB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLm1vdmVUaHVtYm5haWxzUmlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy50aHVibW5haWxzLm1vdmVSaWdodCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUubW92ZVRodW1ibmFpbHNMZWZ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudGh1Ym1uYWlscy5tb3ZlTGVmdCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUuY2FuTW92ZVRodW1ibmFpbHNSaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aHVibW5haWxzLmNhbk1vdmVSaWdodCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUuY2FuTW92ZVRodW1ibmFpbHNMZWZ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRodWJtbmFpbHMuY2FuTW92ZUxlZnQoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLnJlc2V0VGh1bWJuYWlscyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy50aHVibW5haWxzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGh1Ym1uYWlscy5yZXNldCgvKiogQHR5cGUgez99ICovICh0aGlzLmN1cnJlbnRPcHRpb25zLnN0YXJ0SW5kZXgpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGluZGV4XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5Q29tcG9uZW50LnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLmNoYW5nZS5lbWl0KHtcclxuICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICBpbWFnZTogdGhpcy5pbWFnZXNbaW5kZXhdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5Q29tcG9uZW50LnByb3RvdHlwZS5jaGVja0Z1bGxXaWR0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50T3B0aW9ucyAmJiB0aGlzLmN1cnJlbnRPcHRpb25zLmZ1bGxXaWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMubGVmdCA9ICgtKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLVxyXG4gICAgICAgICAgICAgICAgdGhpcy5teUVsZW1lbnQubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlLmlubmVyV2lkdGgpIC8gMikgKyAncHgnO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLnNldEltYWdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNtYWxsSW1hZ2VzID0gdGhpcy5pbWFnZXMubWFwKGZ1bmN0aW9uIChpbWcpIHsgLyoqIEB0eXBlIHs/fSAqLyByZXR1cm4gKGltZy5zbWFsbCk7IH0pO1xyXG4gICAgICAgIHRoaXMubWVkaXVtSW1hZ2VzID0gdGhpcy5pbWFnZXMubWFwKGZ1bmN0aW9uIChpbWcsIGkpIHsgcmV0dXJuIG5ldyBOZ3hHYWxsZXJ5T3JkZXJlZEltYWdlKHtcclxuICAgICAgICAgICAgc3JjOiBpbWcubWVkaXVtLFxyXG4gICAgICAgICAgICBpbmRleDogaVxyXG4gICAgICAgIH0pOyB9KTtcclxuICAgICAgICB0aGlzLmJpZ0ltYWdlcyA9IHRoaXMuaW1hZ2VzLm1hcChmdW5jdGlvbiAoaW1nKSB7IC8qKiBAdHlwZSB7P30gKi8gcmV0dXJuIChpbWcuYmlnKTsgfSk7XHJcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbnMgPSB0aGlzLmltYWdlcy5tYXAoZnVuY3Rpb24gKGltZykgeyAvKiogQHR5cGUgez99ICovIHJldHVybiAoaW1nLmRlc2NyaXB0aW9uKTsgfSk7XHJcbiAgICAgICAgdGhpcy5saW5rcyA9IHRoaXMuaW1hZ2VzLm1hcChmdW5jdGlvbiAoaW1nKSB7IC8qKiBAdHlwZSB7P30gKi8gcmV0dXJuIChpbWcudXJsKTsgfSk7XHJcbiAgICAgICAgdGhpcy5sYWJlbHMgPSB0aGlzLmltYWdlcy5tYXAoZnVuY3Rpb24gKGltZykgeyAvKiogQHR5cGUgez99ICovIHJldHVybiAoaW1nLmxhYmVsKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5Q29tcG9uZW50LnByb3RvdHlwZS5zZXRCcmVha3BvaW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucHJldkJyZWFrcG9pbnQgPSB0aGlzLmJyZWFrcG9pbnQ7XHJcbiAgICAgICAgdmFyIC8qKiBAdHlwZSB7P30gKi8gYnJlYWtwb2ludHM7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIGJyZWFrcG9pbnRzID0gdGhpcy5vcHRpb25zLmZpbHRlcihmdW5jdGlvbiAob3B0KSB7IHJldHVybiBvcHQuYnJlYWtwb2ludCA+PSB3aW5kb3cuaW5uZXJXaWR0aDsgfSlcclxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKG9wdCkgeyByZXR1cm4gb3B0LmJyZWFrcG9pbnQ7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYnJlYWtwb2ludHMgJiYgYnJlYWtwb2ludHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnJlYWtwb2ludCA9IGJyZWFrcG9pbnRzLnBvcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5icmVha3BvaW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQucHJvdG90eXBlLnNvcnRPcHRpb25zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHRoaXMub3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEuYnJlYWtwb2ludCA9PT0gdW5kZWZpbmVkOyB9KS5jb25jYXQodGhpcy5vcHRpb25zXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEuYnJlYWtwb2ludCAhPT0gdW5kZWZpbmVkOyB9KVxyXG4gICAgICAgICAgICAuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYi5icmVha3BvaW50IC0gYS5icmVha3BvaW50OyB9KSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ3hHYWxsZXJ5Q29tcG9uZW50LnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50T3B0aW9ucyA9IG5ldyBOZ3hHYWxsZXJ5T3B0aW9ucyh7fSk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKG9wdCkgeyByZXR1cm4gb3B0LmJyZWFrcG9pbnQgPT09IHVuZGVmaW5lZCB8fCBvcHQuYnJlYWtwb2ludCA+PSBfdGhpcy5icmVha3BvaW50OyB9KVxyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChvcHQpIHsgcmV0dXJuIF90aGlzLmNvbWJpbmVPcHRpb25zKF90aGlzLmN1cnJlbnRPcHRpb25zLCBvcHQpOyB9KTtcclxuICAgICAgICB0aGlzLndpZHRoID0gLyoqIEB0eXBlIHs/fSAqLyAodGhpcy5jdXJyZW50T3B0aW9ucy53aWR0aCk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAvKiogQHR5cGUgez99ICovICh0aGlzLmN1cnJlbnRPcHRpb25zLmhlaWdodCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGZpcnN0XHJcbiAgICAgKiBAcGFyYW0gez99IHNlY29uZFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm90b3R5cGUuY29tYmluZU9wdGlvbnMgPSBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHNlY29uZCkubWFwKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIGZpcnN0W3ZhbF0gPSBzZWNvbmRbdmFsXSAhPT0gdW5kZWZpbmVkID8gc2Vjb25kW3ZhbF0gOiBmaXJzdFt2YWxdOyB9KTtcclxuICAgIH07XHJcbiAgICBOZ3hHYWxsZXJ5Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgeyB0eXBlOiBjb3JlLkNvbXBvbmVudCwgYXJnczogW3tcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25neC1nYWxsZXJ5JyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGRpdiBjbGFzcz1cXFwibmd4LWdhbGxlcnktbGF5b3V0IHt7Y3VycmVudE9wdGlvbnM/LmxheW91dH19XFxcIj5cXG4gICAgICAgIDxuZ3gtZ2FsbGVyeS1pbWFnZSAqbmdJZj1cXFwiY3VycmVudE9wdGlvbnM/LmltYWdlXFxcIiBbc3R5bGUuaGVpZ2h0XT1cXFwiZ2V0SW1hZ2VIZWlnaHQoKVxcXCIgW2ltYWdlc109XFxcIm1lZGl1bUltYWdlc1xcXCIgW2NsaWNrYWJsZV09XFxcImN1cnJlbnRPcHRpb25zPy5wcmV2aWV3XFxcIiBbc2VsZWN0ZWRJbmRleF09XFxcInNlbGVjdGVkSW5kZXhcXFwiIFthcnJvd3NdPVxcXCJjdXJyZW50T3B0aW9ucz8uaW1hZ2VBcnJvd3NcXFwiIFthcnJvd3NBdXRvSGlkZV09XFxcImN1cnJlbnRPcHRpb25zPy5pbWFnZUFycm93c0F1dG9IaWRlXFxcIiBbYXJyb3dQcmV2SWNvbl09XFxcImN1cnJlbnRPcHRpb25zPy5hcnJvd1ByZXZJY29uXFxcIiBbYXJyb3dOZXh0SWNvbl09XFxcImN1cnJlbnRPcHRpb25zPy5hcnJvd05leHRJY29uXFxcIiBbc3dpcGVdPVxcXCJjdXJyZW50T3B0aW9ucz8uaW1hZ2VTd2lwZVxcXCIgW2FuaW1hdGlvbl09XFxcImN1cnJlbnRPcHRpb25zPy5pbWFnZUFuaW1hdGlvblxcXCIgW3NpemVdPVxcXCJjdXJyZW50T3B0aW9ucz8uaW1hZ2VTaXplXFxcIiBbYXV0b1BsYXldPVxcXCJjdXJyZW50T3B0aW9ucz8uaW1hZ2VBdXRvUGxheVxcXCIgW2F1dG9QbGF5SW50ZXJ2YWxdPVxcXCJjdXJyZW50T3B0aW9ucz8uaW1hZ2VBdXRvUGxheUludGVydmFsXFxcIiBbYXV0b1BsYXlQYXVzZU9uSG92ZXJdPVxcXCJjdXJyZW50T3B0aW9ucz8uaW1hZ2VBdXRvUGxheVBhdXNlT25Ib3ZlclxcXCIgW2luZmluaXR5TW92ZV09XFxcImN1cnJlbnRPcHRpb25zPy5pbWFnZUluZmluaXR5TW92ZVxcXCIgIFtsYXp5TG9hZGluZ109XFxcImN1cnJlbnRPcHRpb25zPy5sYXp5TG9hZGluZ1xcXCIgW2FjdGlvbnNdPVxcXCJjdXJyZW50T3B0aW9ucz8uaW1hZ2VBY3Rpb25zXFxcIiBbZGVzY3JpcHRpb25zXT1cXFwiZGVzY3JpcHRpb25zXFxcIiBbc2hvd0Rlc2NyaXB0aW9uXT1cXFwiY3VycmVudE9wdGlvbnM/LmltYWdlRGVzY3JpcHRpb25cXFwiIFtidWxsZXRzXT1cXFwiY3VycmVudE9wdGlvbnM/LmltYWdlQnVsbGV0c1xcXCIgKG9uQ2xpY2spPVxcXCJvcGVuUHJldmlldygkZXZlbnQpXFxcIiAob25BY3RpdmVDaGFuZ2UpPVxcXCJzZWxlY3RGcm9tSW1hZ2UoJGV2ZW50KVxcXCI+PC9uZ3gtZ2FsbGVyeS1pbWFnZT5cXG5cXG4gICAgICAgIDxuZ3gtZ2FsbGVyeS10aHVtYm5haWxzICpuZ0lmPVxcXCJjdXJyZW50T3B0aW9ucz8udGh1bWJuYWlsc1xcXCIgW3N0eWxlLm1hcmdpblRvcF09XFxcImdldFRodW1ibmFpbHNNYXJnaW5Ub3AoKVxcXCIgW3N0eWxlLm1hcmdpbkJvdHRvbV09XFxcImdldFRodW1ibmFpbHNNYXJnaW5Cb3R0b20oKVxcXCIgW3N0eWxlLmhlaWdodF09XFxcImdldFRodW1ibmFpbHNIZWlnaHQoKVxcXCIgW2ltYWdlc109XFxcInNtYWxsSW1hZ2VzXFxcIiBbbGlua3NdPVxcXCJjdXJyZW50T3B0aW9ucz8udGh1bWJuYWlsc0FzTGlua3MgPyBsaW5rcyA6IFtdXFxcIiBbbGFiZWxzXT1cXFwibGFiZWxzXFxcIiBbbGlua1RhcmdldF09XFxcImN1cnJlbnRPcHRpb25zPy5saW5rVGFyZ2V0XFxcIiBbc2VsZWN0ZWRJbmRleF09XFxcInNlbGVjdGVkSW5kZXhcXFwiIFtjb2x1bW5zXT1cXFwiY3VycmVudE9wdGlvbnM/LnRodW1ibmFpbHNDb2x1bW5zXFxcIiBbcm93c109XFxcImN1cnJlbnRPcHRpb25zPy50aHVtYm5haWxzUm93c1xcXCIgW21hcmdpbl09XFxcImN1cnJlbnRPcHRpb25zPy50aHVtYm5haWxNYXJnaW5cXFwiIFthcnJvd3NdPVxcXCJjdXJyZW50T3B0aW9ucz8udGh1bWJuYWlsc0Fycm93c1xcXCIgW2Fycm93c0F1dG9IaWRlXT1cXFwiY3VycmVudE9wdGlvbnM/LnRodW1ibmFpbHNBcnJvd3NBdXRvSGlkZVxcXCIgW2Fycm93UHJldkljb25dPVxcXCJjdXJyZW50T3B0aW9ucz8uYXJyb3dQcmV2SWNvblxcXCIgW2Fycm93TmV4dEljb25dPVxcXCJjdXJyZW50T3B0aW9ucz8uYXJyb3dOZXh0SWNvblxcXCIgW2NsaWNrYWJsZV09XFxcImN1cnJlbnRPcHRpb25zPy5pbWFnZSB8fCBjdXJyZW50T3B0aW9ucz8ucHJldmlld1xcXCIgW3N3aXBlXT1cXFwiY3VycmVudE9wdGlvbnM/LnRodW1ibmFpbHNTd2lwZVxcXCIgW3NpemVdPVxcXCJjdXJyZW50T3B0aW9ucz8udGh1bWJuYWlsU2l6ZVxcXCIgW21vdmVTaXplXT1cXFwiY3VycmVudE9wdGlvbnM/LnRodW1ibmFpbHNNb3ZlU2l6ZVxcXCIgW29yZGVyXT1cXFwiY3VycmVudE9wdGlvbnM/LnRodW1ibmFpbHNPcmRlclxcXCIgW3JlbWFpbmluZ0NvdW50XT1cXFwiY3VycmVudE9wdGlvbnM/LnRodW1ibmFpbHNSZW1haW5pbmdDb3VudFxcXCIgW2xhenlMb2FkaW5nXT1cXFwiY3VycmVudE9wdGlvbnM/LmxhenlMb2FkaW5nXFxcIiBbYWN0aW9uc109XFxcImN1cnJlbnRPcHRpb25zPy50aHVtYm5haWxBY3Rpb25zXFxcIiAgKG9uQWN0aXZlQ2hhbmdlKT1cXFwic2VsZWN0RnJvbVRodW1ibmFpbHMoJGV2ZW50KVxcXCI+PC9uZ3gtZ2FsbGVyeS10aHVtYm5haWxzPlxcblxcbiAgICAgICAgPG5neC1nYWxsZXJ5LXByZXZpZXcgW2ltYWdlc109XFxcImJpZ0ltYWdlc1xcXCIgW2Rlc2NyaXB0aW9uc109XFxcImRlc2NyaXB0aW9uc1xcXCIgW3Nob3dEZXNjcmlwdGlvbl09XFxcImN1cnJlbnRPcHRpb25zPy5wcmV2aWV3RGVzY3JpcHRpb25cXFwiIFthcnJvd1ByZXZJY29uXT1cXFwiY3VycmVudE9wdGlvbnM/LmFycm93UHJldkljb25cXFwiIFthcnJvd05leHRJY29uXT1cXFwiY3VycmVudE9wdGlvbnM/LmFycm93TmV4dEljb25cXFwiIFtjbG9zZUljb25dPVxcXCJjdXJyZW50T3B0aW9ucz8uY2xvc2VJY29uXFxcIiBbZnVsbHNjcmVlbkljb25dPVxcXCJjdXJyZW50T3B0aW9ucz8uZnVsbHNjcmVlbkljb25cXFwiIFtzcGlubmVySWNvbl09XFxcImN1cnJlbnRPcHRpb25zPy5zcGlubmVySWNvblxcXCIgW2Fycm93c109XFxcImN1cnJlbnRPcHRpb25zPy5wcmV2aWV3QXJyb3dzXFxcIiBbYXJyb3dzQXV0b0hpZGVdPVxcXCJjdXJyZW50T3B0aW9ucz8ucHJldmlld0Fycm93c0F1dG9IaWRlXFxcIiBbc3dpcGVdPVxcXCJjdXJyZW50T3B0aW9ucz8ucHJldmlld1N3aXBlXFxcIiBbZnVsbHNjcmVlbl09XFxcImN1cnJlbnRPcHRpb25zPy5wcmV2aWV3RnVsbHNjcmVlblxcXCIgW2ZvcmNlRnVsbHNjcmVlbl09XFxcImN1cnJlbnRPcHRpb25zPy5wcmV2aWV3Rm9yY2VGdWxsc2NyZWVuXFxcIiBbY2xvc2VPbkNsaWNrXT1cXFwiY3VycmVudE9wdGlvbnM/LnByZXZpZXdDbG9zZU9uQ2xpY2tcXFwiIFtjbG9zZU9uRXNjXT1cXFwiY3VycmVudE9wdGlvbnM/LnByZXZpZXdDbG9zZU9uRXNjXFxcIiBba2V5Ym9hcmROYXZpZ2F0aW9uXT1cXFwiY3VycmVudE9wdGlvbnM/LnByZXZpZXdLZXlib2FyZE5hdmlnYXRpb25cXFwiIFthbmltYXRpb25dPVxcXCJjdXJyZW50T3B0aW9ucz8ucHJldmlld0FuaW1hdGlvblxcXCIgW2F1dG9QbGF5XT1cXFwiY3VycmVudE9wdGlvbnM/LnByZXZpZXdBdXRvUGxheVxcXCIgW2F1dG9QbGF5SW50ZXJ2YWxdPVxcXCJjdXJyZW50T3B0aW9ucz8ucHJldmlld0F1dG9QbGF5SW50ZXJ2YWxcXFwiIFthdXRvUGxheVBhdXNlT25Ib3Zlcl09XFxcImN1cnJlbnRPcHRpb25zPy5wcmV2aWV3QXV0b1BsYXlQYXVzZU9uSG92ZXJcXFwiIFtpbmZpbml0eU1vdmVdPVxcXCJjdXJyZW50T3B0aW9ucz8ucHJldmlld0luZmluaXR5TW92ZVxcXCIgW3pvb21dPVxcXCJjdXJyZW50T3B0aW9ucz8ucHJldmlld1pvb21cXFwiIFt6b29tU3RlcF09XFxcImN1cnJlbnRPcHRpb25zPy5wcmV2aWV3Wm9vbVN0ZXBcXFwiIFt6b29tTWF4XT1cXFwiY3VycmVudE9wdGlvbnM/LnByZXZpZXdab29tTWF4XFxcIiBbem9vbU1pbl09XFxcImN1cnJlbnRPcHRpb25zPy5wcmV2aWV3Wm9vbU1pblxcXCIgW3pvb21Jbkljb25dPVxcXCJjdXJyZW50T3B0aW9ucz8uem9vbUluSWNvblxcXCIgW3pvb21PdXRJY29uXT1cXFwiY3VycmVudE9wdGlvbnM/Lnpvb21PdXRJY29uXFxcIiBbYWN0aW9uc109XFxcImN1cnJlbnRPcHRpb25zPy5hY3Rpb25zXFxcIiBbcm90YXRlXT1cXFwiY3VycmVudE9wdGlvbnM/LnByZXZpZXdSb3RhdGVcXFwiIFtyb3RhdGVMZWZ0SWNvbl09XFxcImN1cnJlbnRPcHRpb25zPy5yb3RhdGVMZWZ0SWNvblxcXCIgW3JvdGF0ZVJpZ2h0SWNvbl09XFxcImN1cnJlbnRPcHRpb25zPy5yb3RhdGVSaWdodEljb25cXFwiIFtkb3dubG9hZF09XFxcImN1cnJlbnRPcHRpb25zPy5wcmV2aWV3RG93bmxvYWRcXFwiIFtkb3dubG9hZEljb25dPVxcXCJjdXJyZW50T3B0aW9ucz8uZG93bmxvYWRJY29uXFxcIiBbYnVsbGV0c109XFxcImN1cnJlbnRPcHRpb25zPy5wcmV2aWV3QnVsbGV0c1xcXCIgKG9uQ2xvc2UpPVxcXCJvblByZXZpZXdDbG9zZSgpXFxcIiAob25PcGVuKT1cXFwib25QcmV2aWV3T3BlbigpXFxcIiAob25BY3RpdmVDaGFuZ2UpPVxcXCJwcmV2aWV3U2VsZWN0KCRldmVudClcXFwiIFtjbGFzcy5uZ3gtZ2FsbGVyeS1hY3RpdmVdPVxcXCJwcmV2aWV3RW5hYmxlZFxcXCI+PC9uZ3gtZ2FsbGVyeS1wcmV2aWV3PlxcbiAgICA8L2Rpdj5cXG4gICAgXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdCB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgfSA6aG9zdCA+ICogeyBmbG9hdDogbGVmdDsgfSA6aG9zdCAvZGVlcC8gKiB7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0gOmhvc3QgL2RlZXAvIC5uZ3gtZ2FsbGVyeS1pY29uIHsgY29sb3I6IHdoaXRlOyBmb250LXNpemU6IDI1cHg7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgei1pbmRleDogMjAwMDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB9IDpob3N0IC9kZWVwLyAubmd4LWdhbGxlcnktaWNvbiAubmd4LWdhbGxlcnktaWNvbi1jb250ZW50IHsgZGlzcGxheTogYmxvY2s7IH0gOmhvc3QgL2RlZXAvIC5uZ3gtZ2FsbGVyeS1jbGlja2FibGUgeyBjdXJzb3I6IHBvaW50ZXI7IH0gOmhvc3QgL2RlZXAvIC5uZ3gtZ2FsbGVyeS1pY29ucy13cmFwcGVyIC5uZ3gtZ2FsbGVyeS1pY29uIHsgcG9zaXRpb246IHJlbGF0aXZlOyBtYXJnaW4tcmlnaHQ6IDVweDsgbWFyZ2luLXRvcDogNXB4OyBmb250LXNpemU6IDIwcHg7IGN1cnNvcjogcG9pbnRlcjsgfSA6aG9zdCAvZGVlcC8gLm5neC1nYWxsZXJ5LWljb25zLXdyYXBwZXIgeyBmbG9hdDogcmlnaHQ7IH0gOmhvc3QgLm5neC1nYWxsZXJ5LWxheW91dCB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IH0gOmhvc3QgLm5neC1nYWxsZXJ5LWxheW91dC50aHVtYm5haWxzLXRvcCBuZ3gtZ2FsbGVyeS1pbWFnZSB7IG9yZGVyOiAyOyB9IDpob3N0IC5uZ3gtZ2FsbGVyeS1sYXlvdXQudGh1bWJuYWlscy10b3Agbmd4LWdhbGxlcnktdGh1bWJuYWlscyB7IG9yZGVyOiAxOyB9IDpob3N0IC5uZ3gtZ2FsbGVyeS1sYXlvdXQudGh1bWJuYWlscy1ib3R0b20gbmd4LWdhbGxlcnktaW1hZ2UgeyBvcmRlcjogMTsgfSA6aG9zdCAubmd4LWdhbGxlcnktbGF5b3V0LnRodW1ibmFpbHMtYm90dG9tIG5neC1nYWxsZXJ5LXRodW1ibmFpbHMgeyBvcmRlcjogMjsgfSBcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbTmd4R2FsbGVyeUhlbHBlclNlcnZpY2VdXHJcbiAgICAgICAgICAgICAgICB9LF0gfSxcclxuICAgIF07XHJcbiAgICAvKipcclxuICAgICAqIEBub2NvbGxhcHNlXHJcbiAgICAgKi9cclxuICAgIE5neEdhbGxlcnlDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXHJcbiAgICAgICAgeyB0eXBlOiBjb3JlLkVsZW1lbnRSZWYsIH0sXHJcbiAgICBdOyB9O1xyXG4gICAgTmd4R2FsbGVyeUNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcclxuICAgICAgICAnb3B0aW9ucyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxyXG4gICAgICAgICdpbWFnZXMnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcclxuICAgICAgICAnaW1hZ2VzUmVhZHknOiBbeyB0eXBlOiBjb3JlLk91dHB1dCB9LF0sXHJcbiAgICAgICAgJ2NoYW5nZSc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcclxuICAgICAgICAncHJldmlld09wZW4nOiBbeyB0eXBlOiBjb3JlLk91dHB1dCB9LF0sXHJcbiAgICAgICAgJ3ByZXZpZXdDbG9zZSc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcclxuICAgICAgICAncHJldmlld0NoYW5nZSc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcclxuICAgICAgICAncHJldmlldyc6IFt7IHR5cGU6IGNvcmUuVmlld0NoaWxkLCBhcmdzOiBbTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQsXSB9LF0sXHJcbiAgICAgICAgJ2ltYWdlJzogW3sgdHlwZTogY29yZS5WaWV3Q2hpbGQsIGFyZ3M6IFtOZ3hHYWxsZXJ5SW1hZ2VDb21wb25lbnQsXSB9LF0sXHJcbiAgICAgICAgJ3RodWJtbmFpbHMnOiBbeyB0eXBlOiBjb3JlLlZpZXdDaGlsZCwgYXJnczogW05neEdhbGxlcnlUaHVtYm5haWxzQ29tcG9uZW50LF0gfSxdLFxyXG4gICAgICAgICd3aWR0aCc6IFt7IHR5cGU6IGNvcmUuSG9zdEJpbmRpbmcsIGFyZ3M6IFsnc3R5bGUud2lkdGgnLF0gfSxdLFxyXG4gICAgICAgICdoZWlnaHQnOiBbeyB0eXBlOiBjb3JlLkhvc3RCaW5kaW5nLCBhcmdzOiBbJ3N0eWxlLmhlaWdodCcsXSB9LF0sXHJcbiAgICAgICAgJ2xlZnQnOiBbeyB0eXBlOiBjb3JlLkhvc3RCaW5kaW5nLCBhcmdzOiBbJ3N0eWxlLmxlZnQnLF0gfSxdLFxyXG4gICAgICAgICdvblJlc2l6ZSc6IFt7IHR5cGU6IGNvcmUuSG9zdExpc3RlbmVyLCBhcmdzOiBbJ3dpbmRvdzpyZXNpemUnLF0gfSxdLFxyXG4gICAgfTtcclxuICAgIHJldHVybiBOZ3hHYWxsZXJ5Q29tcG9uZW50O1xyXG59KCkpO1xuXG52YXIgTmd4R2FsbGVyeUltYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IG9ialxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBOZ3hHYWxsZXJ5SW1hZ2Uob2JqKSB7XHJcbiAgICAgICAgdGhpcy5zbWFsbCA9IG9iai5zbWFsbDtcclxuICAgICAgICB0aGlzLm1lZGl1bSA9IG9iai5tZWRpdW07XHJcbiAgICAgICAgdGhpcy5iaWcgPSBvYmouYmlnO1xyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBvYmouZGVzY3JpcHRpb247XHJcbiAgICAgICAgdGhpcy51cmwgPSBvYmoudXJsO1xyXG4gICAgICAgIHRoaXMubGFiZWwgPSBvYmoubGFiZWw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTmd4R2FsbGVyeUltYWdlO1xyXG59KCkpO1xuXG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbnZhciBDdXN0b21IYW1tZXJDb25maWcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQ3VzdG9tSGFtbWVyQ29uZmlnLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ3VzdG9tSGFtbWVyQ29uZmlnKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm92ZXJyaWRlcyA9ICh7XHJcbiAgICAgICAgICAgICdwaW5jaCc6IHsgZW5hYmxlOiBmYWxzZSB9LFxyXG4gICAgICAgICAgICAncm90YXRlJzogeyBlbmFibGU6IGZhbHNlIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQ3VzdG9tSGFtbWVyQ29uZmlnO1xyXG59KHBsYXRmb3JtQnJvd3Nlci5IYW1tZXJHZXN0dXJlQ29uZmlnKSk7XHJcbnZhciBOZ3hHYWxsZXJ5TW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTmd4R2FsbGVyeU1vZHVsZSgpIHtcclxuICAgIH1cclxuICAgIE5neEdhbGxlcnlNb2R1bGUuZGVjb3JhdG9ycyA9IFtcclxuICAgICAgICB7IHR5cGU6IGNvcmUuTmdNb2R1bGUsIGFyZ3M6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0czogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tb24uQ29tbW9uTW9kdWxlXHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTmd4R2FsbGVyeUFjdGlvbkNvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTmd4R2FsbGVyeUFycm93c0NvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTmd4R2FsbGVyeUJ1bGxldHNDb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE5neEdhbGxlcnlJbWFnZUNvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBOZ3hHYWxsZXJ5Q29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICBleHBvcnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE5neEdhbGxlcnlDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IHBsYXRmb3JtQnJvd3Nlci5IQU1NRVJfR0VTVFVSRV9DT05GSUcsIHVzZUNsYXNzOiBDdXN0b21IYW1tZXJDb25maWcgfVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXSB9LFxyXG4gICAgXTtcclxuICAgIC8qKlxyXG4gICAgICogQG5vY29sbGFwc2VcclxuICAgICAqL1xyXG4gICAgTmd4R2FsbGVyeU1vZHVsZS5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtdOyB9O1xyXG4gICAgcmV0dXJuIE5neEdhbGxlcnlNb2R1bGU7XHJcbn0oKSk7XG5cbmV4cG9ydHMuQ3VzdG9tSGFtbWVyQ29uZmlnID0gQ3VzdG9tSGFtbWVyQ29uZmlnO1xuZXhwb3J0cy5OZ3hHYWxsZXJ5TW9kdWxlID0gTmd4R2FsbGVyeU1vZHVsZTtcbmV4cG9ydHMuTmd4R2FsbGVyeUNvbXBvbmVudCA9IE5neEdhbGxlcnlDb21wb25lbnQ7XG5leHBvcnRzLk5neEdhbGxlcnlBY3Rpb25Db21wb25lbnQgPSBOZ3hHYWxsZXJ5QWN0aW9uQ29tcG9uZW50O1xuZXhwb3J0cy5OZ3hHYWxsZXJ5SW1hZ2VDb21wb25lbnQgPSBOZ3hHYWxsZXJ5SW1hZ2VDb21wb25lbnQ7XG5leHBvcnRzLk5neEdhbGxlcnlUaHVtYm5haWxzQ29tcG9uZW50ID0gTmd4R2FsbGVyeVRodW1ibmFpbHNDb21wb25lbnQ7XG5leHBvcnRzLk5neEdhbGxlcnlQcmV2aWV3Q29tcG9uZW50ID0gTmd4R2FsbGVyeVByZXZpZXdDb21wb25lbnQ7XG5leHBvcnRzLk5neEdhbGxlcnlBcnJvd3NDb21wb25lbnQgPSBOZ3hHYWxsZXJ5QXJyb3dzQ29tcG9uZW50O1xuZXhwb3J0cy5OZ3hHYWxsZXJ5QnVsbGV0c0NvbXBvbmVudCA9IE5neEdhbGxlcnlCdWxsZXRzQ29tcG9uZW50O1xuZXhwb3J0cy5OZ3hHYWxsZXJ5T3B0aW9ucyA9IE5neEdhbGxlcnlPcHRpb25zO1xuZXhwb3J0cy5OZ3hHYWxsZXJ5SW1hZ2UgPSBOZ3hHYWxsZXJ5SW1hZ2U7XG5leHBvcnRzLk5neEdhbGxlcnlBbmltYXRpb24gPSBOZ3hHYWxsZXJ5QW5pbWF0aW9uO1xuZXhwb3J0cy5OZ3hHYWxsZXJ5SGVscGVyU2VydmljZSA9IE5neEdhbGxlcnlIZWxwZXJTZXJ2aWNlO1xuZXhwb3J0cy5OZ3hHYWxsZXJ5SW1hZ2VTaXplID0gTmd4R2FsbGVyeUltYWdlU2l6ZTtcbmV4cG9ydHMuTmd4R2FsbGVyeUxheW91dCA9IE5neEdhbGxlcnlMYXlvdXQ7XG5leHBvcnRzLk5neEdhbGxlcnlPcmRlciA9IE5neEdhbGxlcnlPcmRlcjtcbmV4cG9ydHMuTmd4R2FsbGVyeU9yZGVyZWRJbWFnZSA9IE5neEdhbGxlcnlPcmRlcmVkSW1hZ2U7XG5leHBvcnRzLk5neEdhbGxlcnlBY3Rpb24gPSBOZ3hHYWxsZXJ5QWN0aW9uO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG59KSkpO1xuIl19
\ No newline at end of file
diff --git a/node_modules/ngx-gallery/bundles/ngx-gallery.umd.js.__ivy_ngcc_bak b/node_modules/ngx-gallery/bundles/ngx-gallery.umd.js.__ivy_ngcc_bak
new file mode 100644
index 0000000..d3d3250
--- /dev/null
+++ b/node_modules/ngx-gallery/bundles/ngx-gallery.umd.js.__ivy_ngcc_bak
@@ -0,0 +1,1960 @@
+(function (global, factory) {
+	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common'), require('@angular/platform-browser')) :
+	typeof define === 'function' && define.amd ? define(['exports', '@angular/core', '@angular/common', '@angular/platform-browser'], factory) :
+	(factory((global['ngx-gallery'] = {}),global.core,global.common,global.platformBrowser));
+}(this, (function (exports,core,common,platformBrowser) { 'use strict';
+
+var NgxGalleryActionComponent = /** @class */ (function () {
+    function NgxGalleryActionComponent() {
+        this.disabled = false;
+        this.titleText = '';
+        this.onClick = new core.EventEmitter();
+    }
+    /**
+     * @param {?} event
+     * @return {?}
+     */
+    NgxGalleryActionComponent.prototype.handleClick = function (event) {
+        if (!this.disabled) {
+            this.onClick.emit(event);
+        }
+        event.stopPropagation();
+        event.preventDefault();
+    };
+    NgxGalleryActionComponent.decorators = [
+        { type: core.Component, args: [{
+                    selector: 'ngx-gallery-action',
+                    template: "\n        <div class=\"ngx-gallery-icon\" [class.ngx-gallery-icon-disabled]=\"disabled\"\n            aria-hidden=\"true\"\n            title=\"{{ titleText }}\"\n            (click)=\"handleClick($event)\">\n                <i class=\"ngx-gallery-icon-content {{ icon }}\"></i>\n        </div>",
+                    changeDetection: core.ChangeDetectionStrategy.OnPush
+                },] },
+    ];
+    /**
+     * @nocollapse
+     */
+    NgxGalleryActionComponent.ctorParameters = function () { return []; };
+    NgxGalleryActionComponent.propDecorators = {
+        'icon': [{ type: core.Input },],
+        'disabled': [{ type: core.Input },],
+        'titleText': [{ type: core.Input },],
+        'onClick': [{ type: core.Output },],
+    };
+    return NgxGalleryActionComponent;
+}());
+
+var NgxGalleryArrowsComponent = /** @class */ (function () {
+    function NgxGalleryArrowsComponent() {
+        this.onPrevClick = new core.EventEmitter();
+        this.onNextClick = new core.EventEmitter();
+    }
+    /**
+     * @return {?}
+     */
+    NgxGalleryArrowsComponent.prototype.handlePrevClick = function () {
+        this.onPrevClick.emit();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryArrowsComponent.prototype.handleNextClick = function () {
+        this.onNextClick.emit();
+    };
+    NgxGalleryArrowsComponent.decorators = [
+        { type: core.Component, args: [{
+                    selector: 'ngx-gallery-arrows',
+                    template: "\n        <div class=\"ngx-gallery-arrow-wrapper ngx-gallery-arrow-left\">\n            <div class=\"ngx-gallery-icon ngx-gallery-arrow\" aria-hidden=\"true\" (click)=\"handlePrevClick()\" [class.ngx-gallery-disabled]=\"prevDisabled\">\n                <i class=\"ngx-gallery-icon-content {{arrowPrevIcon}}\"></i>\n            </div>\n        </div>\n        <div class=\"ngx-gallery-arrow-wrapper ngx-gallery-arrow-right\">\n            <div class=\"ngx-gallery-icon ngx-gallery-arrow\" aria-hidden=\"true\" (click)=\"handleNextClick()\" [class.ngx-gallery-disabled]=\"nextDisabled\">\n                <i class=\"ngx-gallery-icon-content {{arrowNextIcon}}\"></i>\n            </div>\n        </div>\n    ",
+                    styles: [".ngx-gallery-arrow-wrapper { position: absolute; height: 100%; width: 1px; display: table; z-index: 2000; table-layout: fixed; } .ngx-gallery-arrow-left { left: 0px; } .ngx-gallery-arrow-right { right: 0px; } .ngx-gallery-arrow { top: 50%; transform: translateY(-50%); cursor: pointer; } .ngx-gallery-arrow.ngx-gallery-disabled { opacity: 0.6; cursor: default; } .ngx-gallery-arrow-left .ngx-gallery-arrow { left: 10px; } .ngx-gallery-arrow-right .ngx-gallery-arrow { right: 10px; } "]
+                },] },
+    ];
+    /**
+     * @nocollapse
+     */
+    NgxGalleryArrowsComponent.ctorParameters = function () { return []; };
+    NgxGalleryArrowsComponent.propDecorators = {
+        'prevDisabled': [{ type: core.Input },],
+        'nextDisabled': [{ type: core.Input },],
+        'arrowPrevIcon': [{ type: core.Input },],
+        'arrowNextIcon': [{ type: core.Input },],
+        'onPrevClick': [{ type: core.Output },],
+        'onNextClick': [{ type: core.Output },],
+    };
+    return NgxGalleryArrowsComponent;
+}());
+
+var NgxGalleryBulletsComponent = /** @class */ (function () {
+    function NgxGalleryBulletsComponent() {
+        this.active = 0;
+        this.onChange = new core.EventEmitter();
+    }
+    /**
+     * @return {?}
+     */
+    NgxGalleryBulletsComponent.prototype.getBullets = function () {
+        return Array(this.count);
+    };
+    /**
+     * @param {?} event
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryBulletsComponent.prototype.handleChange = function (event, index) {
+        this.onChange.emit(index);
+    };
+    NgxGalleryBulletsComponent.decorators = [
+        { type: core.Component, args: [{
+                    selector: 'ngx-gallery-bullets',
+                    template: "\n        <div class=\"ngx-gallery-bullet\" *ngFor=\"let bullet of getBullets(); let i = index;\" (click)=\"handleChange($event, i)\" [ngClass]=\"{ 'ngx-gallery-active': i == active }\"></div>\n    ",
+                    styles: [":host { position: absolute; z-index: 2000; display: inline-flex; left: 50%; transform: translateX(-50%); bottom: 0px; padding: 10px; } .ngx-gallery-bullet { width: 10px; height: 10px; border-radius: 50%; cursor: pointer; background: white; } .ngx-gallery-bullet:not(:first-child) { margin-left: 5px; } .ngx-gallery-bullet:hover, .ngx-gallery-bullet.ngx-gallery-active { background: black; } "]
+                },] },
+    ];
+    /**
+     * @nocollapse
+     */
+    NgxGalleryBulletsComponent.ctorParameters = function () { return []; };
+    NgxGalleryBulletsComponent.propDecorators = {
+        'count': [{ type: core.Input },],
+        'active': [{ type: core.Input },],
+        'onChange': [{ type: core.Output },],
+    };
+    return NgxGalleryBulletsComponent;
+}());
+
+var NgxGalleryHelperService = /** @class */ (function () {
+    /**
+     * @param {?} renderer
+     */
+    function NgxGalleryHelperService(renderer) {
+        this.renderer = renderer;
+        this.swipeHandlers = new Map();
+    }
+    /**
+     * @param {?} status
+     * @param {?} element
+     * @param {?} id
+     * @param {?} nextHandler
+     * @param {?} prevHandler
+     * @return {?}
+     */
+    NgxGalleryHelperService.prototype.manageSwipe = function (status, element, id, nextHandler, prevHandler) {
+        var /** @type {?} */ handlers = this.getSwipeHandlers(id);
+        // swipeleft and swiperight are available only if hammerjs is included
+        try {
+            if (status && !handlers) {
+                this.swipeHandlers.set(id, [
+                    this.renderer.listen(element.nativeElement, 'swipeleft', function () { return nextHandler(); }),
+                    this.renderer.listen(element.nativeElement, 'swiperight', function () { return prevHandler(); })
+                ]);
+            }
+            else if (!status && handlers) {
+                handlers.map(function (handler) { return handler(); });
+                this.removeSwipeHandlers(id);
+            }
+        }
+        catch (e) { }
+    };
+    /**
+     * @param {?} url
+     * @return {?}
+     */
+    NgxGalleryHelperService.prototype.validateUrl = function (url) {
+        if (url.replace) {
+            return url.replace(new RegExp(' ', 'g'), '%20')
+                .replace(new RegExp('\'', 'g'), '%27');
+        }
+        else {
+            return url;
+        }
+    };
+    /**
+     * @param {?} image
+     * @return {?}
+     */
+    NgxGalleryHelperService.prototype.getBackgroundUrl = function (image) {
+        return 'url(\'' + this.validateUrl(image) + '\')';
+    };
+    /**
+     * @param {?} id
+     * @return {?}
+     */
+    NgxGalleryHelperService.prototype.getSwipeHandlers = function (id) {
+        return this.swipeHandlers.get(id);
+    };
+    /**
+     * @param {?} id
+     * @return {?}
+     */
+    NgxGalleryHelperService.prototype.removeSwipeHandlers = function (id) {
+        this.swipeHandlers.delete(id);
+    };
+    NgxGalleryHelperService.decorators = [
+        { type: core.Injectable },
+    ];
+    /**
+     * @nocollapse
+     */
+    NgxGalleryHelperService.ctorParameters = function () { return [
+        { type: core.Renderer, },
+    ]; };
+    return NgxGalleryHelperService;
+}());
+
+var NgxGalleryAnimation = /** @class */ (function () {
+    function NgxGalleryAnimation() {
+    }
+    NgxGalleryAnimation.Fade = 'fade';
+    NgxGalleryAnimation.Slide = 'slide';
+    NgxGalleryAnimation.Rotate = 'rotate';
+    NgxGalleryAnimation.Zoom = 'zoom';
+    return NgxGalleryAnimation;
+}());
+
+var NgxGalleryImageComponent = /** @class */ (function () {
+    /**
+     * @param {?} sanitization
+     * @param {?} elementRef
+     * @param {?} helperService
+     */
+    function NgxGalleryImageComponent(sanitization, elementRef, helperService) {
+        this.sanitization = sanitization;
+        this.elementRef = elementRef;
+        this.helperService = helperService;
+        this.onClick = new core.EventEmitter();
+        this.onActiveChange = new core.EventEmitter();
+        this.canChangeImage = true;
+    }
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.ngOnInit = function () {
+        if (this.arrows && this.arrowsAutoHide) {
+            this.arrows = false;
+        }
+        if (this.autoPlay) {
+            this.startAutoPlay();
+        }
+    };
+    /**
+     * @param {?} changes
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.ngOnChanges = function (changes) {
+        var _this = this;
+        if (changes['swipe']) {
+            this.helperService.manageSwipe(this.swipe, this.elementRef, 'image', function () { return _this.showNext(); }, function () { return _this.showPrev(); });
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.onMouseEnter = function () {
+        if (this.arrowsAutoHide && !this.arrows) {
+            this.arrows = true;
+        }
+        if (this.autoPlay && this.autoPlayPauseOnHover) {
+            this.stopAutoPlay();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.onMouseLeave = function () {
+        if (this.arrowsAutoHide && this.arrows) {
+            this.arrows = false;
+        }
+        if (this.autoPlay && this.autoPlayPauseOnHover) {
+            this.startAutoPlay();
+        }
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.reset = function (index) {
+        this.selectedIndex = index;
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.getImages = function () {
+        if (!this.images) {
+            return [];
+        }
+        if (this.lazyLoading) {
+            var /** @type {?} */ indexes_1 = [this.selectedIndex];
+            var /** @type {?} */ prevIndex = this.selectedIndex - 1;
+            if (prevIndex === -1 && this.infinityMove) {
+                indexes_1.push(this.images.length - 1);
+            }
+            else if (prevIndex >= 0) {
+                indexes_1.push(prevIndex);
+            }
+            var /** @type {?} */ nextIndex = this.selectedIndex + 1;
+            if (nextIndex == this.images.length && this.infinityMove) {
+                indexes_1.push(0);
+            }
+            else if (nextIndex < this.images.length) {
+                indexes_1.push(nextIndex);
+            }
+            return this.images.filter(function (img, i) { return indexes_1.indexOf(i) != -1; });
+        }
+        else {
+            return this.images;
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.startAutoPlay = function () {
+        var _this = this;
+        this.stopAutoPlay();
+        this.timer = setInterval(function () {
+            if (!_this.showNext()) {
+                _this.selectedIndex = -1;
+                _this.showNext();
+            }
+        }, this.autoPlayInterval);
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.stopAutoPlay = function () {
+        if (this.timer) {
+            clearInterval(this.timer);
+        }
+    };
+    /**
+     * @param {?} event
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.handleClick = function (event, index) {
+        if (this.clickable) {
+            this.onClick.emit(index);
+            event.stopPropagation();
+            event.preventDefault();
+        }
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.show = function (index) {
+        this.selectedIndex = index;
+        this.onActiveChange.emit(this.selectedIndex);
+        this.setChangeTimeout();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.showNext = function () {
+        if (this.canShowNext() && this.canChangeImage) {
+            this.selectedIndex++;
+            if (this.selectedIndex === this.images.length) {
+                this.selectedIndex = 0;
+            }
+            this.onActiveChange.emit(this.selectedIndex);
+            this.setChangeTimeout();
+            return true;
+        }
+        else {
+            return false;
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.showPrev = function () {
+        if (this.canShowPrev() && this.canChangeImage) {
+            this.selectedIndex--;
+            if (this.selectedIndex < 0) {
+                this.selectedIndex = this.images.length - 1;
+            }
+            this.onActiveChange.emit(this.selectedIndex);
+            this.setChangeTimeout();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.setChangeTimeout = function () {
+        var _this = this;
+        this.canChangeImage = false;
+        var /** @type {?} */ timeout = 1000;
+        if (this.animation === NgxGalleryAnimation.Slide
+            || this.animation === NgxGalleryAnimation.Fade) {
+            timeout = 500;
+        }
+        setTimeout(function () {
+            _this.canChangeImage = true;
+        }, timeout);
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.canShowNext = function () {
+        if (this.images) {
+            return this.infinityMove || this.selectedIndex < this.images.length - 1
+                ? true : false;
+        }
+        else {
+            return false;
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.canShowPrev = function () {
+        if (this.images) {
+            return this.infinityMove || this.selectedIndex > 0 ? true : false;
+        }
+        else {
+            return false;
+        }
+    };
+    /**
+     * @param {?} image
+     * @return {?}
+     */
+    NgxGalleryImageComponent.prototype.getSafeUrl = function (image) {
+        return this.sanitization.bypassSecurityTrustStyle(this.helperService.getBackgroundUrl(image));
+    };
+    NgxGalleryImageComponent.decorators = [
+        { type: core.Component, args: [{
+                    selector: 'ngx-gallery-image',
+                    template: "\n        <div class=\"ngx-gallery-image-wrapper ngx-gallery-animation-{{animation}} ngx-gallery-image-size-{{size}}\">\n            <div class=\"ngx-gallery-image\" *ngFor=\"let image of getImages(); let i = index;\" [ngClass]=\"{ 'ngx-gallery-active': selectedIndex == image.index, 'ngx-gallery-inactive-left': selectedIndex > image.index, 'ngx-gallery-inactive-right': selectedIndex < image.index, 'ngx-gallery-clickable': clickable }\" [style.background-image]=\"getSafeUrl(image.src)\" (click)=\"handleClick($event, image.index)\">\n                <div class=\"ngx-gallery-icons-wrapper\">\n                    <ngx-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, image.index)\"></ngx-gallery-action>\n                </div>\n                <div class=\"ngx-gallery-image-text\" *ngIf=\"showDescription && descriptions[image.index]\" [innerHTML]=\"descriptions[image.index]\" (click)=\"$event.stopPropagation()\"></div>\n            </div>\n        </div>\n        <ngx-gallery-bullets *ngIf=\"bullets\" [count]=\"images.length\" [active]=\"selectedIndex\" (onChange)=\"show($event)\"></ngx-gallery-bullets>\n        <ngx-gallery-arrows class=\"ngx-gallery-image-size-{{size}}\" *ngIf=\"arrows\" (onPrevClick)=\"showPrev()\" (onNextClick)=\"showNext()\" [prevDisabled]=\"!canShowPrev()\" [nextDisabled]=\"!canShowNext()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></ngx-gallery-arrows>\n    ",
+                    styles: [":host { width: 100%; display: inline-block; position: relative; } .ngx-gallery-image-wrapper { width: 100%; height: 100%; position: absolute; left: 0px; top: 0px; overflow: hidden; } .ngx-gallery-image { background-position: center; background-repeat: no-repeat; height: 100%; width: 100%; position: absolute; top: 0px; } .ngx-gallery-image.ngx-gallery-active { z-index: 1000; } .ngx-gallery-image-size-cover .ngx-gallery-image { background-size: cover; } .ngx-gallery-image-size-contain .ngx-gallery-image { background-size: contain; } .ngx-gallery-animation-fade .ngx-gallery-image { left: 0px; opacity: 0; transition: 0.5s ease-in-out; } .ngx-gallery-animation-fade .ngx-gallery-image.ngx-gallery-active { opacity: 1; } .ngx-gallery-animation-slide .ngx-gallery-image { transition: 0.5s ease-in-out; } .ngx-gallery-animation-slide .ngx-gallery-image.ngx-gallery-active { left: 0px; } .ngx-gallery-animation-slide .ngx-gallery-image.ngx-gallery-inactive-left { left: -100%; } .ngx-gallery-animation-slide .ngx-gallery-image.ngx-gallery-inactive-right { left: 100%; } .ngx-gallery-animation-rotate .ngx-gallery-image { transition: 1s ease; transform: scale(3.5, 3.5) rotate(90deg); left: 0px; opacity: 0; } .ngx-gallery-animation-rotate .ngx-gallery-image.ngx-gallery-active { transform: scale(1, 1) rotate(0deg); opacity: 1; } .ngx-gallery-animation-zoom .ngx-gallery-image { transition: 1s ease; transform: scale(2.5, 2.5); left: 0px; opacity: 0; } .ngx-gallery-animation-zoom .ngx-gallery-image.ngx-gallery-active { transform: scale(1, 1); opacity: 1; } .ngx-gallery-image-text { width: 100%; background: rgba(0, 0, 0, 0.7); padding: 10px; text-align: center; color: white; font-size: 16px; position: absolute; bottom: 0px; z-index: 10; } "]
+                },] },
+    ];
+    /**
+     * @nocollapse
+     */
+    NgxGalleryImageComponent.ctorParameters = function () { return [
+        { type: platformBrowser.DomSanitizer, },
+        { type: core.ElementRef, },
+        { type: NgxGalleryHelperService, },
+    ]; };
+    NgxGalleryImageComponent.propDecorators = {
+        'images': [{ type: core.Input },],
+        'clickable': [{ type: core.Input },],
+        'selectedIndex': [{ type: core.Input },],
+        'arrows': [{ type: core.Input },],
+        'arrowsAutoHide': [{ type: core.Input },],
+        'swipe': [{ type: core.Input },],
+        'animation': [{ type: core.Input },],
+        'size': [{ type: core.Input },],
+        'arrowPrevIcon': [{ type: core.Input },],
+        'arrowNextIcon': [{ type: core.Input },],
+        'autoPlay': [{ type: core.Input },],
+        'autoPlayInterval': [{ type: core.Input },],
+        'autoPlayPauseOnHover': [{ type: core.Input },],
+        'infinityMove': [{ type: core.Input },],
+        'lazyLoading': [{ type: core.Input },],
+        'actions': [{ type: core.Input },],
+        'descriptions': [{ type: core.Input },],
+        'showDescription': [{ type: core.Input },],
+        'bullets': [{ type: core.Input },],
+        'onClick': [{ type: core.Output },],
+        'onActiveChange': [{ type: core.Output },],
+        'onMouseEnter': [{ type: core.HostListener, args: ['mouseenter',] },],
+        'onMouseLeave': [{ type: core.HostListener, args: ['mouseleave',] },],
+    };
+    return NgxGalleryImageComponent;
+}());
+
+var NgxGalleryOrder = /** @class */ (function () {
+    function NgxGalleryOrder() {
+    }
+    NgxGalleryOrder.Column = 1;
+    NgxGalleryOrder.Row = 2;
+    NgxGalleryOrder.Page = 3;
+    return NgxGalleryOrder;
+}());
+
+var NgxGalleryThumbnailsComponent = /** @class */ (function () {
+    /**
+     * @param {?} sanitization
+     * @param {?} elementRef
+     * @param {?} helperService
+     */
+    function NgxGalleryThumbnailsComponent(sanitization, elementRef, helperService) {
+        this.sanitization = sanitization;
+        this.elementRef = elementRef;
+        this.helperService = helperService;
+        this.minStopIndex = 0;
+        this.onActiveChange = new core.EventEmitter();
+        this.index = 0;
+    }
+    /**
+     * @param {?} changes
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.ngOnChanges = function (changes) {
+        var _this = this;
+        if (changes['selectedIndex']) {
+            this.validateIndex();
+        }
+        if (changes['swipe']) {
+            this.helperService.manageSwipe(this.swipe, this.elementRef, 'thumbnails', function () { return _this.moveRight(); }, function () { return _this.moveLeft(); });
+        }
+        if (this.images) {
+            this.remainingCountValue = this.images.length - (this.rows * this.columns);
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.onMouseEnter = function () {
+        this.mouseenter = true;
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.onMouseLeave = function () {
+        this.mouseenter = false;
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.reset = function (index) {
+        this.selectedIndex = index;
+        this.setDefaultPosition();
+        this.index = 0;
+        this.validateIndex();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getImages = function () {
+        if (!this.images) {
+            return [];
+        }
+        if (this.remainingCount) {
+            return this.images.slice(0, this.rows * this.columns);
+        }
+        else if (this.lazyLoading && this.order != NgxGalleryOrder.Row) {
+            var /** @type {?} */ stopIndex = 0;
+            if (this.order === NgxGalleryOrder.Column) {
+                stopIndex = (this.index + this.columns + this.moveSize) * this.rows;
+            }
+            else if (this.order === NgxGalleryOrder.Page) {
+                stopIndex = this.index + ((this.columns * this.rows) * 2);
+            }
+            if (stopIndex <= this.minStopIndex) {
+                stopIndex = this.minStopIndex;
+            }
+            else {
+                this.minStopIndex = stopIndex;
+            }
+            return this.images.slice(0, stopIndex);
+        }
+        else {
+            return this.images;
+        }
+    };
+    /**
+     * @param {?} event
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.handleClick = function (event, index) {
+        if (!this.hasLink(index)) {
+            this.selectedIndex = index;
+            this.onActiveChange.emit(index);
+            event.stopPropagation();
+            event.preventDefault();
+        }
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.hasLink = function (index) {
+        if (this.links && this.links.length && this.links[index])
+            return true;
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.moveRight = function () {
+        if (this.canMoveRight()) {
+            this.index += this.moveSize;
+            var /** @type {?} */ maxIndex = this.getMaxIndex() - this.columns;
+            if (this.index > maxIndex) {
+                this.index = maxIndex;
+            }
+            this.setThumbnailsPosition();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.moveLeft = function () {
+        if (this.canMoveLeft()) {
+            this.index -= this.moveSize;
+            if (this.index < 0) {
+                this.index = 0;
+            }
+            this.setThumbnailsPosition();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.canMoveRight = function () {
+        return this.index + this.columns < this.getMaxIndex() ? true : false;
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.canMoveLeft = function () {
+        return this.index !== 0 ? true : false;
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getThumbnailLeft = function (index) {
+        var /** @type {?} */ calculatedIndex;
+        if (this.order === NgxGalleryOrder.Column) {
+            calculatedIndex = Math.floor(index / this.rows);
+        }
+        else if (this.order === NgxGalleryOrder.Page) {
+            calculatedIndex = (index % this.columns) + (Math.floor(index / (this.rows * this.columns)) * this.columns);
+        }
+        else if (this.order == NgxGalleryOrder.Row && this.remainingCount) {
+            calculatedIndex = index % this.columns;
+        }
+        else {
+            calculatedIndex = index % Math.ceil(this.images.length / this.rows);
+        }
+        return this.getThumbnailPosition(calculatedIndex, this.columns);
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getThumbnailTop = function (index) {
+        var /** @type {?} */ calculatedIndex;
+        if (this.order === NgxGalleryOrder.Column) {
+            calculatedIndex = index % this.rows;
+        }
+        else if (this.order === NgxGalleryOrder.Page) {
+            calculatedIndex = Math.floor(index / this.columns) - (Math.floor(index / (this.rows * this.columns)) * this.rows);
+        }
+        else if (this.order == NgxGalleryOrder.Row && this.remainingCount) {
+            calculatedIndex = Math.floor(index / this.columns);
+        }
+        else {
+            calculatedIndex = Math.floor(index / Math.ceil(this.images.length / this.rows));
+        }
+        return this.getThumbnailPosition(calculatedIndex, this.rows);
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getThumbnailWidth = function () {
+        return this.getThumbnailDimension(this.columns);
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getThumbnailHeight = function () {
+        return this.getThumbnailDimension(this.rows);
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.setThumbnailsPosition = function () {
+        this.thumbnailsLeft = -((100 / this.columns) * this.index) + '%';
+        this.thumbnailsMarginLeft = -((this.margin - (((this.columns - 1)
+            * this.margin) / this.columns)) * this.index) + 'px';
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.setDefaultPosition = function () {
+        this.thumbnailsLeft = '0px';
+        this.thumbnailsMarginLeft = '0px';
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.canShowArrows = function () {
+        if (this.remainingCount) {
+            return false;
+        }
+        else if (this.arrows && this.images && this.images.length > this.getVisibleCount()
+            && (!this.arrowsAutoHide || this.mouseenter)) {
+            return true;
+        }
+        else {
+            return false;
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.validateIndex = function () {
+        if (this.images) {
+            var /** @type {?} */ newIndex = void 0;
+            if (this.order === NgxGalleryOrder.Column) {
+                newIndex = Math.floor(this.selectedIndex / this.rows);
+            }
+            else {
+                newIndex = this.selectedIndex % Math.ceil(this.images.length / this.rows);
+            }
+            if (this.remainingCount) {
+                newIndex = 0;
+            }
+            if (newIndex < this.index || newIndex >= this.index + this.columns) {
+                var /** @type {?} */ maxIndex = this.getMaxIndex() - this.columns;
+                this.index = newIndex > maxIndex ? maxIndex : newIndex;
+                this.setThumbnailsPosition();
+            }
+        }
+    };
+    /**
+     * @param {?} image
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getSafeUrl = function (image) {
+        return this.sanitization.bypassSecurityTrustStyle(this.helperService.getBackgroundUrl(image));
+    };
+    /**
+     * @param {?} index
+     * @param {?} count
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getThumbnailPosition = function (index, count) {
+        return this.getSafeStyle('calc(' + ((100 / count) * index) + '% + '
+            + ((this.margin - (((count - 1) * this.margin) / count)) * index) + 'px)');
+    };
+    /**
+     * @param {?} count
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getThumbnailDimension = function (count) {
+        if (this.margin !== 0) {
+            return this.getSafeStyle('calc(' + (100 / count) + '% - '
+                + (((count - 1) * this.margin) / count) + 'px)');
+        }
+        else {
+            return this.getSafeStyle('calc(' + (100 / count) + '% + 1px)');
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getMaxIndex = function () {
+        if (this.order == NgxGalleryOrder.Page) {
+            var /** @type {?} */ maxIndex = (Math.floor(this.images.length / this.getVisibleCount()) * this.columns);
+            if (this.images.length % this.getVisibleCount() > this.columns) {
+                maxIndex += this.columns;
+            }
+            else {
+                maxIndex += this.images.length % this.getVisibleCount();
+            }
+            return maxIndex;
+        }
+        else {
+            return Math.ceil(this.images.length / this.rows);
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getVisibleCount = function () {
+        return this.columns * this.rows;
+    };
+    /**
+     * @param {?} value
+     * @return {?}
+     */
+    NgxGalleryThumbnailsComponent.prototype.getSafeStyle = function (value) {
+        return this.sanitization.bypassSecurityTrustStyle(value);
+    };
+    NgxGalleryThumbnailsComponent.decorators = [
+        { type: core.Component, args: [{
+                    selector: 'ngx-gallery-thumbnails',
+                    template: "\n    <div class=\"ngx-gallery-thumbnails-wrapper ngx-gallery-thumbnail-size-{{size}}\">\n        <div class=\"ngx-gallery-thumbnails\" [style.transform]=\"'translateX(' + thumbnailsLeft + ')'\" [style.marginLeft]=\"thumbnailsMarginLeft\">\n            <a [href]=\"hasLink(i) ? links[i] : '#'\" [target]=\"linkTarget\" class=\"ngx-gallery-thumbnail\" *ngFor=\"let image of getImages(); let i = index;\" [style.background-image]=\"getSafeUrl(image)\" (click)=\"handleClick($event, i)\" [style.width]=\"getThumbnailWidth()\" [style.height]=\"getThumbnailHeight()\" [style.left]=\"getThumbnailLeft(i)\" [style.top]=\"getThumbnailTop(i)\" [ngClass]=\"{ 'ngx-gallery-active': i == selectedIndex, 'ngx-gallery-clickable': clickable }\" [attr.aria-label]=\"labels[i]\">\n                <div class=\"ngx-gallery-icons-wrapper\">\n                    <ngx-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, i)\"></ngx-gallery-action>\n                </div>\n                <div class=\"ngx-gallery-remaining-count-overlay\" *ngIf=\"remainingCount && remainingCountValue && (i == (rows * columns) - 1)\">\n                    <span class=\"ngx-gallery-remaining-count\">+{{remainingCountValue}}</span>\n                </div>\n            </a>\n        </div>\n    </div>\n    <ngx-gallery-arrows *ngIf=\"canShowArrows()\" (onPrevClick)=\"moveLeft()\" (onNextClick)=\"moveRight()\" [prevDisabled]=\"!canMoveLeft()\" [nextDisabled]=\"!canMoveRight()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></ngx-gallery-arrows>\n    ",
+                    styles: [":host { width: 100%; display: inline-block; position: relative; } .ngx-gallery-thumbnails-wrapper { width: 100%; height: 100%; position: absolute; overflow: hidden; } .ngx-gallery-thumbnails { height: 100%; width: 100%; position: absolute; left: 0px; transform: translateX(0); transition: transform 0.5s ease-in-out; will-change: transform; } .ngx-gallery-thumbnails .ngx-gallery-thumbnail { position: absolute; height: 100%; background-position: center; background-repeat: no-repeat; text-decoration: none; } .ngx-gallery-thumbnail-size-cover .ngx-gallery-thumbnails .ngx-gallery-thumbnail { background-size: cover; } .ngx-gallery-thumbnail-size-contain .ngx-gallery-thumbnails .ngx-gallery-thumbnail { background-size: contain; } .ngx-gallery-remaining-count-overlay { width: 100%; height: 100%; position: absolute; left: 0px; top: 0px; background-color: rgba(0, 0, 0, 0.4); } .ngx-gallery-remaining-count { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 30px; } "]
+                },] },
+    ];
+    /**
+     * @nocollapse
+     */
+    NgxGalleryThumbnailsComponent.ctorParameters = function () { return [
+        { type: platformBrowser.DomSanitizer, },
+        { type: core.ElementRef, },
+        { type: NgxGalleryHelperService, },
+    ]; };
+    NgxGalleryThumbnailsComponent.propDecorators = {
+        'images': [{ type: core.Input },],
+        'links': [{ type: core.Input },],
+        'labels': [{ type: core.Input },],
+        'linkTarget': [{ type: core.Input },],
+        'columns': [{ type: core.Input },],
+        'rows': [{ type: core.Input },],
+        'arrows': [{ type: core.Input },],
+        'arrowsAutoHide': [{ type: core.Input },],
+        'margin': [{ type: core.Input },],
+        'selectedIndex': [{ type: core.Input },],
+        'clickable': [{ type: core.Input },],
+        'swipe': [{ type: core.Input },],
+        'size': [{ type: core.Input },],
+        'arrowPrevIcon': [{ type: core.Input },],
+        'arrowNextIcon': [{ type: core.Input },],
+        'moveSize': [{ type: core.Input },],
+        'order': [{ type: core.Input },],
+        'remainingCount': [{ type: core.Input },],
+        'lazyLoading': [{ type: core.Input },],
+        'actions': [{ type: core.Input },],
+        'onActiveChange': [{ type: core.Output },],
+        'onMouseEnter': [{ type: core.HostListener, args: ['mouseenter',] },],
+        'onMouseLeave': [{ type: core.HostListener, args: ['mouseleave',] },],
+    };
+    return NgxGalleryThumbnailsComponent;
+}());
+
+var NgxGalleryPreviewComponent = /** @class */ (function () {
+    /**
+     * @param {?} sanitization
+     * @param {?} elementRef
+     * @param {?} helperService
+     * @param {?} renderer
+     * @param {?} changeDetectorRef
+     */
+    function NgxGalleryPreviewComponent(sanitization, elementRef, helperService, renderer, changeDetectorRef) {
+        this.sanitization = sanitization;
+        this.elementRef = elementRef;
+        this.helperService = helperService;
+        this.renderer = renderer;
+        this.changeDetectorRef = changeDetectorRef;
+        this.showSpinner = false;
+        this.positionLeft = 0;
+        this.positionTop = 0;
+        this.zoomValue = 1;
+        this.loading = false;
+        this.rotateValue = 0;
+        this.index = 0;
+        this.onOpen = new core.EventEmitter();
+        this.onClose = new core.EventEmitter();
+        this.onActiveChange = new core.EventEmitter();
+        this.isOpen = false;
+        this.initialX = 0;
+        this.initialY = 0;
+        this.initialLeft = 0;
+        this.initialTop = 0;
+        this.isMove = false;
+    }
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.ngOnInit = function () {
+        if (this.arrows && this.arrowsAutoHide) {
+            this.arrows = false;
+        }
+    };
+    /**
+     * @param {?} changes
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.ngOnChanges = function (changes) {
+        var _this = this;
+        if (changes['swipe']) {
+            this.helperService.manageSwipe(this.swipe, this.elementRef, 'preview', function () { return _this.showNext(); }, function () { return _this.showPrev(); });
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.ngOnDestroy = function () {
+        if (this.keyDownListener) {
+            this.keyDownListener();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.onMouseEnter = function () {
+        if (this.arrowsAutoHide && !this.arrows) {
+            this.arrows = true;
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.onMouseLeave = function () {
+        if (this.arrowsAutoHide && this.arrows) {
+            this.arrows = false;
+        }
+    };
+    /**
+     * @param {?} e
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.onKeyDown = function (e) {
+        if (this.isOpen) {
+            if (this.keyboardNavigation) {
+                if (this.isKeyboardPrev(e)) {
+                    this.showPrev();
+                }
+                else if (this.isKeyboardNext(e)) {
+                    this.showNext();
+                }
+            }
+            if (this.closeOnEsc && this.isKeyboardEsc(e)) {
+                this.close();
+            }
+        }
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.open = function (index) {
+        var _this = this;
+        this.onOpen.emit();
+        this.index = index;
+        this.isOpen = true;
+        this.show(true);
+        if (this.forceFullscreen) {
+            this.manageFullscreen();
+        }
+        this.keyDownListener = this.renderer.listenGlobal("window", "keydown", function (e) { return _this.onKeyDown(e); });
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.close = function () {
+        this.isOpen = false;
+        this.closeFullscreen();
+        this.onClose.emit();
+        this.stopAutoPlay();
+        if (this.keyDownListener) {
+            this.keyDownListener();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.imageMouseEnter = function () {
+        if (this.autoPlay && this.autoPlayPauseOnHover) {
+            this.stopAutoPlay();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.imageMouseLeave = function () {
+        if (this.autoPlay && this.autoPlayPauseOnHover) {
+            this.startAutoPlay();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.startAutoPlay = function () {
+        var _this = this;
+        if (this.autoPlay) {
+            this.stopAutoPlay();
+            this.timer = setTimeout(function () {
+                if (!_this.showNext()) {
+                    _this.index = -1;
+                    _this.showNext();
+                }
+            }, this.autoPlayInterval);
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.stopAutoPlay = function () {
+        if (this.timer) {
+            clearTimeout(this.timer);
+        }
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.showAtIndex = function (index) {
+        this.index = index;
+        this.show();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.showNext = function () {
+        if (this.canShowNext()) {
+            this.index++;
+            if (this.index === this.images.length) {
+                this.index = 0;
+            }
+            this.show();
+            return true;
+        }
+        else {
+            return false;
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.showPrev = function () {
+        if (this.canShowPrev()) {
+            this.index--;
+            if (this.index < 0) {
+                this.index = this.images.length - 1;
+            }
+            this.show();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.canShowNext = function () {
+        if (this.loading) {
+            return false;
+        }
+        else if (this.images) {
+            return this.infinityMove || this.index < this.images.length - 1 ? true : false;
+        }
+        else {
+            return false;
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.canShowPrev = function () {
+        if (this.loading) {
+            return false;
+        }
+        else if (this.images) {
+            return this.infinityMove || this.index > 0 ? true : false;
+        }
+        else {
+            return false;
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.manageFullscreen = function () {
+        if (this.fullscreen || this.forceFullscreen) {
+            var /** @type {?} */ doc = (document);
+            if (!doc.fullscreenElement && !doc.mozFullScreenElement
+                && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
+                this.openFullscreen();
+            }
+            else {
+                this.closeFullscreen();
+            }
+        }
+    };
+    /**
+     * @param {?} image
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.getSafeUrl = function (image) {
+        return image.substr(0, 10) === 'data:image' ?
+            image : this.sanitization.bypassSecurityTrustUrl(image);
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.zoomIn = function () {
+        if (this.canZoomIn()) {
+            this.zoomValue += this.zoomStep;
+            if (this.zoomValue > this.zoomMax) {
+                this.zoomValue = this.zoomMax;
+            }
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.zoomOut = function () {
+        if (this.canZoomOut()) {
+            this.zoomValue -= this.zoomStep;
+            if (this.zoomValue < this.zoomMin) {
+                this.zoomValue = this.zoomMin;
+            }
+            if (this.zoomValue <= 1) {
+                this.resetPosition();
+            }
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.rotateLeft = function () {
+        this.rotateValue -= 90;
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.rotateRight = function () {
+        this.rotateValue += 90;
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.getTransform = function () {
+        return this.sanitization.bypassSecurityTrustStyle('scale(' + this.zoomValue + ') rotate(' + this.rotateValue + 'deg)');
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.canZoomIn = function () {
+        return this.zoomValue < this.zoomMax ? true : false;
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.canZoomOut = function () {
+        return this.zoomValue > this.zoomMin ? true : false;
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.canDragOnZoom = function () {
+        return this.zoom && this.zoomValue > 1;
+    };
+    /**
+     * @param {?} e
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.mouseDownHandler = function (e) {
+        if (this.canDragOnZoom()) {
+            this.initialX = this.getClientX(e);
+            this.initialY = this.getClientY(e);
+            this.initialLeft = this.positionLeft;
+            this.initialTop = this.positionTop;
+            this.isMove = true;
+            e.preventDefault();
+        }
+    };
+    /**
+     * @param {?} e
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.mouseUpHandler = function (e) {
+        this.isMove = false;
+    };
+    /**
+     * @param {?} e
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.mouseMoveHandler = function (e) {
+        if (this.isMove) {
+            this.positionLeft = this.initialLeft + (this.getClientX(e) - this.initialX);
+            this.positionTop = this.initialTop + (this.getClientY(e) - this.initialY);
+        }
+    };
+    /**
+     * @param {?} e
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.getClientX = function (e) {
+        return e.touches && e.touches.length ? e.touches[0].clientX : e.clientX;
+    };
+    /**
+     * @param {?} e
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.getClientY = function (e) {
+        return e.touches && e.touches.length ? e.touches[0].clientY : e.clientY;
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.resetPosition = function () {
+        if (this.zoom) {
+            this.positionLeft = 0;
+            this.positionTop = 0;
+        }
+    };
+    /**
+     * @param {?} e
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.isKeyboardNext = function (e) {
+        return e.keyCode === 39 ? true : false;
+    };
+    /**
+     * @param {?} e
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.isKeyboardPrev = function (e) {
+        return e.keyCode === 37 ? true : false;
+    };
+    /**
+     * @param {?} e
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.isKeyboardEsc = function (e) {
+        return e.keyCode === 27 ? true : false;
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.openFullscreen = function () {
+        var /** @type {?} */ element = (document.documentElement);
+        if (element.requestFullscreen) {
+            element.requestFullscreen();
+        }
+        else if (element.msRequestFullscreen) {
+            element.msRequestFullscreen();
+        }
+        else if (element.mozRequestFullScreen) {
+            element.mozRequestFullScreen();
+        }
+        else if (element.webkitRequestFullscreen) {
+            element.webkitRequestFullscreen();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.closeFullscreen = function () {
+        if (this.isFullscreen()) {
+            var /** @type {?} */ doc = (document);
+            if (doc.exitFullscreen) {
+                doc.exitFullscreen();
+            }
+            else if (doc.msExitFullscreen) {
+                doc.msExitFullscreen();
+            }
+            else if (doc.mozCancelFullScreen) {
+                doc.mozCancelFullScreen();
+            }
+            else if (doc.webkitExitFullscreen) {
+                doc.webkitExitFullscreen();
+            }
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.isFullscreen = function () {
+        var /** @type {?} */ doc = (document);
+        return doc.fullscreenElement || doc.webkitFullscreenElement
+            || doc.mozFullScreenElement || doc.msFullscreenElement;
+    };
+    /**
+     * @param {?=} first
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.show = function (first) {
+        var _this = this;
+        if (first === void 0) { first = false; }
+        this.loading = true;
+        this.stopAutoPlay();
+        this.onActiveChange.emit(this.index);
+        if (first || !this.animation) {
+            this._show();
+        }
+        else {
+            setTimeout(function () { return _this._show(); }, 600);
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype._show = function () {
+        var _this = this;
+        this.zoomValue = 1;
+        this.rotateValue = 0;
+        this.resetPosition();
+        this.src = this.getSafeUrl(/** @type {?} */ (this.images[this.index]));
+        this.srcIndex = this.index;
+        this.description = this.descriptions[this.index];
+        this.changeDetectorRef.markForCheck();
+        setTimeout(function () {
+            if (_this.isLoaded(_this.previewImage.nativeElement)) {
+                _this.loading = false;
+                _this.startAutoPlay();
+                _this.changeDetectorRef.markForCheck();
+            }
+            else {
+                setTimeout(function () {
+                    if (_this.loading) {
+                        _this.showSpinner = true;
+                        _this.changeDetectorRef.markForCheck();
+                    }
+                });
+                _this.previewImage.nativeElement.onload = function () {
+                    _this.loading = false;
+                    _this.showSpinner = false;
+                    _this.previewImage.nativeElement.onload = null;
+                    _this.startAutoPlay();
+                    _this.changeDetectorRef.markForCheck();
+                };
+            }
+        });
+    };
+    /**
+     * @param {?} img
+     * @return {?}
+     */
+    NgxGalleryPreviewComponent.prototype.isLoaded = function (img) {
+        if (!img.complete) {
+            return false;
+        }
+        if (typeof img.naturalWidth !== 'undefined' && img.naturalWidth === 0) {
+            return false;
+        }
+        return true;
+    };
+    NgxGalleryPreviewComponent.decorators = [
+        { type: core.Component, args: [{
+                    selector: 'ngx-gallery-preview',
+                    template: "\n        <ngx-gallery-arrows *ngIf=\"arrows\" (onPrevClick)=\"showPrev()\" (onNextClick)=\"showNext()\" [prevDisabled]=\"!canShowPrev()\" [nextDisabled]=\"!canShowNext()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></ngx-gallery-arrows>\n        <div class=\"ngx-gallery-preview-top\">\n            <div class=\"ngx-gallery-preview-icons\">\n                <ngx-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, index)\"></ngx-gallery-action>\n                <a *ngIf=\"download && src\" [href]=\"src\" class=\"ngx-gallery-icon\" aria-hidden=\"true\" download>\n                    <i class=\"ngx-gallery-icon-content {{ downloadIcon }}\"></i>\n                </a>\n                <ngx-gallery-action *ngIf=\"zoom\" [icon]=\"zoomOutIcon\" [disabled]=\"!canZoomOut()\" (onClick)=\"zoomOut()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"zoom\" [icon]=\"zoomInIcon\" [disabled]=\"!canZoomIn()\" (onClick)=\"zoomIn()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"rotate\" [icon]=\"rotateLeftIcon\" (onClick)=\"rotateLeft()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"rotate\" [icon]=\"rotateRightIcon\" (onClick)=\"rotateRight()\"></ngx-gallery-action>\n                <ngx-gallery-action *ngIf=\"fullscreen\" [icon]=\"'ngx-gallery-fullscreen ' + fullscreenIcon\" (onClick)=\"manageFullscreen()\"></ngx-gallery-action>\n                <ngx-gallery-action [icon]=\"'ngx-gallery-close ' + closeIcon\" (onClick)=\"close()\"></ngx-gallery-action>\n            </div>\n        </div>\n        <div class=\"ngx-spinner-wrapper ngx-gallery-center\" [class.ngx-gallery-active]=\"showSpinner\">\n            <i class=\"ngx-gallery-icon ngx-gallery-spinner {{spinnerIcon}}\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"ngx-gallery-preview-wrapper\" (click)=\"closeOnClick && close()\" (mouseup)=\"mouseUpHandler($event)\" (mousemove)=\"mouseMoveHandler($event)\" (touchend)=\"mouseUpHandler($event)\" (touchmove)=\"mouseMoveHandler($event)\">\n            <div class=\"ngx-gallery-preview-img-wrapper\">\n                <img *ngIf=\"src\" #previewImage class=\"ngx-gallery-preview-img ngx-gallery-center\" [src]=\"src\" (click)=\"$event.stopPropagation()\" (mouseenter)=\"imageMouseEnter()\" (mouseleave)=\"imageMouseLeave()\" (mousedown)=\"mouseDownHandler($event)\" (touchstart)=\"mouseDownHandler($event)\" [class.ngx-gallery-active]=\"!loading\" [class.animation]=\"animation\" [class.ngx-gallery-grab]=\"canDragOnZoom()\" [style.transform]=\"getTransform()\" [style.left]=\"positionLeft + 'px'\" [style.top]=\"positionTop + 'px'\"/>\n                <ngx-gallery-bullets *ngIf=\"bullets\" [count]=\"images.length\" [active]=\"index\" (onChange)=\"showAtIndex($event)\"></ngx-gallery-bullets>\n            </div>\n            <div class=\"ngx-gallery-preview-text\" *ngIf=\"showDescription && description\" [innerHTML]=\"description\" (click)=\"$event.stopPropagation()\"></div>\n        </div>\n    ",
+                    styles: [":host(.ngx-gallery-active) { width: 100%; height: 100%; position: fixed; left: 0; top: 0; background: rgba(0, 0, 0, 0.7); z-index: 10000; display: inline-block; } :host { display: none; } :host /deep/ .ngx-gallery-arrow { font-size: 50px; } :host /deep/ ngx-gallery-bullets { height: 5%; align-items: center; padding: 0px; } .ngx-gallery-preview-img { opacity: 0; max-width: 90%; max-height: 90%; user-select: none; transition: transform .5s; } .ngx-gallery-preview-img.animation { transition: opacity 0.5s linear, transform .5s; } .ngx-gallery-preview-img.ngx-gallery-active { opacity: 1; } .ngx-gallery-preview-img.ngx-gallery-grab { cursor: grab; cursor: -webkit-grab; } .ngx-gallery-icon.ngx-gallery-spinner { font-size: 50px; left: 0; display: inline-block; } :host /deep/ .ngx-gallery-preview-top { position: absolute; width: 100%; user-select: none; } :host /deep/ .ngx-gallery-preview-icons { float: right; } :host /deep/ .ngx-gallery-preview-icons .ngx-gallery-icon { position: relative; margin-right: 10px; margin-top: 10px; font-size: 25px; cursor: pointer; text-decoration: none; } :host /deep/ .ngx-gallery-preview-icons .ngx-gallery-icon.ngx-gallery-icon-disabled { cursor: default; opacity: 0.4; } .ngx-spinner-wrapper { width: 50px; height: 50px; display: none; } .ngx-spinner-wrapper.ngx-gallery-active { display: inline-block; } .ngx-gallery-center { position: absolute; left: 0; right: 0; bottom: 0; margin: auto; top: 0; } .ngx-gallery-preview-text { width: 100%; background: rgba(0, 0, 0, 0.7); padding: 10px; text-align: center; color: white; font-size: 16px; flex: 0 1 auto; z-index: 10; } .ngx-gallery-preview-wrapper { width: 100%; height: 100%; display: flex; flex-flow: column; } .ngx-gallery-preview-img-wrapper { flex: 1 1 auto; position: relative; } "]
+                },] },
+    ];
+    /**
+     * @nocollapse
+     */
+    NgxGalleryPreviewComponent.ctorParameters = function () { return [
+        { type: platformBrowser.DomSanitizer, },
+        { type: core.ElementRef, },
+        { type: NgxGalleryHelperService, },
+        { type: core.Renderer, },
+        { type: core.ChangeDetectorRef, },
+    ]; };
+    NgxGalleryPreviewComponent.propDecorators = {
+        'images': [{ type: core.Input },],
+        'descriptions': [{ type: core.Input },],
+        'showDescription': [{ type: core.Input },],
+        'arrows': [{ type: core.Input },],
+        'arrowsAutoHide': [{ type: core.Input },],
+        'swipe': [{ type: core.Input },],
+        'fullscreen': [{ type: core.Input },],
+        'forceFullscreen': [{ type: core.Input },],
+        'closeOnClick': [{ type: core.Input },],
+        'closeOnEsc': [{ type: core.Input },],
+        'keyboardNavigation': [{ type: core.Input },],
+        'arrowPrevIcon': [{ type: core.Input },],
+        'arrowNextIcon': [{ type: core.Input },],
+        'closeIcon': [{ type: core.Input },],
+        'fullscreenIcon': [{ type: core.Input },],
+        'spinnerIcon': [{ type: core.Input },],
+        'autoPlay': [{ type: core.Input },],
+        'autoPlayInterval': [{ type: core.Input },],
+        'autoPlayPauseOnHover': [{ type: core.Input },],
+        'infinityMove': [{ type: core.Input },],
+        'zoom': [{ type: core.Input },],
+        'zoomStep': [{ type: core.Input },],
+        'zoomMax': [{ type: core.Input },],
+        'zoomMin': [{ type: core.Input },],
+        'zoomInIcon': [{ type: core.Input },],
+        'zoomOutIcon': [{ type: core.Input },],
+        'animation': [{ type: core.Input },],
+        'actions': [{ type: core.Input },],
+        'rotate': [{ type: core.Input },],
+        'rotateLeftIcon': [{ type: core.Input },],
+        'rotateRightIcon': [{ type: core.Input },],
+        'download': [{ type: core.Input },],
+        'downloadIcon': [{ type: core.Input },],
+        'bullets': [{ type: core.Input },],
+        'onOpen': [{ type: core.Output },],
+        'onClose': [{ type: core.Output },],
+        'onActiveChange': [{ type: core.Output },],
+        'previewImage': [{ type: core.ViewChild, args: ['previewImage',] },],
+        'onMouseEnter': [{ type: core.HostListener, args: ['mouseenter',] },],
+        'onMouseLeave': [{ type: core.HostListener, args: ['mouseleave',] },],
+    };
+    return NgxGalleryPreviewComponent;
+}());
+
+var NgxGalleryImageSize = /** @class */ (function () {
+    function NgxGalleryImageSize() {
+    }
+    NgxGalleryImageSize.Cover = 'cover';
+    NgxGalleryImageSize.Contain = 'contain';
+    return NgxGalleryImageSize;
+}());
+
+var NgxGalleryLayout = /** @class */ (function () {
+    function NgxGalleryLayout() {
+    }
+    NgxGalleryLayout.ThumbnailsTop = 'thumbnails-top';
+    NgxGalleryLayout.ThumbnailsBottom = 'thumbnails-bottom';
+    return NgxGalleryLayout;
+}());
+
+var NgxGalleryAction = /** @class */ (function () {
+    /**
+     * @param {?} action
+     */
+    function NgxGalleryAction(action) {
+        this.icon = action.icon;
+        this.disabled = action.disabled ? action.disabled : false;
+        this.titleText = action.titleText ? action.titleText : '';
+        this.onClick = action.onClick;
+    }
+    return NgxGalleryAction;
+}());
+
+var NgxGalleryOptions = /** @class */ (function () {
+    /**
+     * @param {?} obj
+     */
+    function NgxGalleryOptions(obj) {
+        var preventDefaults = obj.breakpoint === undefined ? false : true;
+        function use(source, defaultValue) {
+            return obj && (source !== undefined || preventDefaults) ? source : defaultValue;
+        }
+        this.breakpoint = use(obj.breakpoint, undefined);
+        this.width = use(obj.width, '500px');
+        this.height = use(obj.height, '400px');
+        this.fullWidth = use(obj.fullWidth, false);
+        this.layout = use(obj.layout, NgxGalleryLayout.ThumbnailsBottom);
+        this.startIndex = use(obj.startIndex, 0);
+        this.linkTarget = use(obj.linkTarget, '_blank');
+        this.lazyLoading = use(obj.lazyLoading, true);
+        this.image = use(obj.image, true);
+        this.imagePercent = use(obj.imagePercent, 75);
+        this.imageArrows = use(obj.imageArrows, true);
+        this.imageArrowsAutoHide = use(obj.imageArrowsAutoHide, false);
+        this.imageSwipe = use(obj.imageSwipe, false);
+        this.imageAnimation = use(obj.imageAnimation, NgxGalleryAnimation.Fade);
+        this.imageSize = use(obj.imageSize, NgxGalleryImageSize.Cover);
+        this.imageAutoPlay = use(obj.imageAutoPlay, false);
+        this.imageAutoPlayInterval = use(obj.imageAutoPlayInterval, 2000);
+        this.imageAutoPlayPauseOnHover = use(obj.imageAutoPlayPauseOnHover, false);
+        this.imageInfinityMove = use(obj.imageInfinityMove, false);
+        if (obj && obj.imageActions && obj.imageActions.length) {
+            obj.imageActions = obj.imageActions.map(function (action) { return new NgxGalleryAction(action); });
+        }
+        this.imageActions = use(obj.imageActions, []);
+        this.imageDescription = use(obj.imageDescription, false);
+        this.imageBullets = use(obj.imageBullets, false);
+        this.thumbnails = use(obj.thumbnails, true);
+        this.thumbnailsColumns = use(obj.thumbnailsColumns, 4);
+        this.thumbnailsRows = use(obj.thumbnailsRows, 1);
+        this.thumbnailsPercent = use(obj.thumbnailsPercent, 25);
+        this.thumbnailsMargin = use(obj.thumbnailsMargin, 10);
+        this.thumbnailsArrows = use(obj.thumbnailsArrows, true);
+        this.thumbnailsArrowsAutoHide = use(obj.thumbnailsArrowsAutoHide, false);
+        this.thumbnailsSwipe = use(obj.thumbnailsSwipe, false);
+        this.thumbnailsMoveSize = use(obj.thumbnailsMoveSize, 1);
+        this.thumbnailsOrder = use(obj.thumbnailsOrder, NgxGalleryOrder.Column);
+        this.thumbnailsRemainingCount = use(obj.thumbnailsRemainingCount, false);
+        this.thumbnailsAsLinks = use(obj.thumbnailsAsLinks, false);
+        this.thumbnailsAutoHide = use(obj.thumbnailsAutoHide, false);
+        this.thumbnailMargin = use(obj.thumbnailMargin, 10);
+        this.thumbnailSize = use(obj.thumbnailSize, NgxGalleryImageSize.Cover);
+        if (obj && obj.thumbnailActions && obj.thumbnailActions.length) {
+            obj.thumbnailActions = obj.thumbnailActions.map(function (action) { return new NgxGalleryAction(action); });
+        }
+        this.thumbnailActions = use(obj.thumbnailActions, []);
+        this.preview = use(obj.preview, true);
+        this.previewDescription = use(obj.previewDescription, true);
+        this.previewArrows = use(obj.previewArrows, true);
+        this.previewArrowsAutoHide = use(obj.previewArrowsAutoHide, false);
+        this.previewSwipe = use(obj.previewSwipe, false);
+        this.previewFullscreen = use(obj.previewFullscreen, false);
+        this.previewForceFullscreen = use(obj.previewForceFullscreen, false);
+        this.previewCloseOnClick = use(obj.previewCloseOnClick, false);
+        this.previewCloseOnEsc = use(obj.previewCloseOnEsc, false);
+        this.previewKeyboardNavigation = use(obj.previewKeyboardNavigation, false);
+        this.previewAnimation = use(obj.previewAnimation, true);
+        this.previewAutoPlay = use(obj.previewAutoPlay, false);
+        this.previewAutoPlayInterval = use(obj.previewAutoPlayInterval, 2000);
+        this.previewAutoPlayPauseOnHover = use(obj.previewAutoPlayPauseOnHover, false);
+        this.previewInfinityMove = use(obj.previewInfinityMove, false);
+        this.previewZoom = use(obj.previewZoom, false);
+        this.previewZoomStep = use(obj.previewZoomStep, 0.1);
+        this.previewZoomMax = use(obj.previewZoomMax, 2);
+        this.previewZoomMin = use(obj.previewZoomMin, 0.5);
+        this.previewRotate = use(obj.previewRotate, false);
+        this.previewDownload = use(obj.previewDownload, false);
+        this.previewCustom = use(obj.previewCustom, undefined);
+        this.previewBullets = use(obj.previewBullets, false);
+        this.arrowPrevIcon = use(obj.arrowPrevIcon, 'fa fa-arrow-circle-left');
+        this.arrowNextIcon = use(obj.arrowNextIcon, 'fa fa-arrow-circle-right');
+        this.closeIcon = use(obj.closeIcon, 'fa fa-times-circle');
+        this.fullscreenIcon = use(obj.fullscreenIcon, 'fa fa-arrows-alt');
+        this.spinnerIcon = use(obj.spinnerIcon, 'fa fa-spinner fa-pulse fa-3x fa-fw');
+        this.zoomInIcon = use(obj.zoomInIcon, 'fa fa-search-plus');
+        this.zoomOutIcon = use(obj.zoomOutIcon, 'fa fa-search-minus');
+        this.rotateLeftIcon = use(obj.rotateLeftIcon, 'fa fa-undo');
+        this.rotateRightIcon = use(obj.rotateRightIcon, 'fa fa-repeat');
+        this.downloadIcon = use(obj.downloadIcon, 'fa fa-arrow-circle-down');
+        if (obj && obj.actions && obj.actions.length) {
+            obj.actions = obj.actions.map(function (action) { return new NgxGalleryAction(action); });
+        }
+        this.actions = use(obj.actions, []);
+    }
+    return NgxGalleryOptions;
+}());
+
+var NgxGalleryOrderedImage = /** @class */ (function () {
+    /**
+     * @param {?} obj
+     */
+    function NgxGalleryOrderedImage(obj) {
+        this.src = obj.src;
+        this.index = obj.index;
+    }
+    return NgxGalleryOrderedImage;
+}());
+
+var NgxGalleryComponent = /** @class */ (function () {
+    /**
+     * @param {?} myElement
+     */
+    function NgxGalleryComponent(myElement) {
+        this.myElement = myElement;
+        this.imagesReady = new core.EventEmitter();
+        this.change = new core.EventEmitter();
+        this.previewOpen = new core.EventEmitter();
+        this.previewClose = new core.EventEmitter();
+        this.previewChange = new core.EventEmitter();
+        this.oldImagesLength = 0;
+        this.selectedIndex = 0;
+        this.breakpoint = undefined;
+        this.prevBreakpoint = undefined;
+    }
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.ngOnInit = function () {
+        this.options = this.options.map(function (opt) { return new NgxGalleryOptions(opt); });
+        this.sortOptions();
+        this.setBreakpoint();
+        this.setOptions();
+        this.checkFullWidth();
+        if (this.currentOptions) {
+            this.selectedIndex = /** @type {?} */ (this.currentOptions.startIndex);
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.ngDoCheck = function () {
+        if (this.images !== undefined && (this.images.length !== this.oldImagesLength)
+            || (this.images !== this.oldImages)) {
+            this.oldImagesLength = this.images.length;
+            this.oldImages = this.images;
+            this.setOptions();
+            this.setImages();
+            if (this.images && this.images.length) {
+                this.imagesReady.emit();
+            }
+            if (this.image) {
+                this.image.reset(/** @type {?} */ (this.currentOptions.startIndex));
+            }
+            if (this.currentOptions.thumbnailsAutoHide && this.currentOptions.thumbnails
+                && this.images.length <= 1) {
+                this.currentOptions.thumbnails = false;
+                this.currentOptions.imageArrows = false;
+            }
+            this.resetThumbnails();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.ngAfterViewInit = function () {
+        this.checkFullWidth();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.onResize = function () {
+        var _this = this;
+        this.setBreakpoint();
+        if (this.prevBreakpoint !== this.breakpoint) {
+            this.setOptions();
+            this.resetThumbnails();
+        }
+        if (this.currentOptions && this.currentOptions.fullWidth) {
+            if (this.fullWidthTimeout) {
+                clearTimeout(this.fullWidthTimeout);
+            }
+            this.fullWidthTimeout = setTimeout(function () {
+                _this.checkFullWidth();
+            }, 200);
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.getImageHeight = function () {
+        return (this.currentOptions && this.currentOptions.thumbnails) ?
+            this.currentOptions.imagePercent + '%' : '100%';
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.getThumbnailsHeight = function () {
+        if (this.currentOptions && this.currentOptions.image) {
+            return 'calc(' + this.currentOptions.thumbnailsPercent + '% - '
+                + this.currentOptions.thumbnailsMargin + 'px)';
+        }
+        else {
+            return '100%';
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.getThumbnailsMarginTop = function () {
+        if (this.currentOptions && this.currentOptions.layout === NgxGalleryLayout.ThumbnailsBottom) {
+            return this.currentOptions.thumbnailsMargin + 'px';
+        }
+        else {
+            return '0px';
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.getThumbnailsMarginBottom = function () {
+        if (this.currentOptions && this.currentOptions.layout === NgxGalleryLayout.ThumbnailsTop) {
+            return this.currentOptions.thumbnailsMargin + 'px';
+        }
+        else {
+            return '0px';
+        }
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.openPreview = function (index) {
+        if (this.currentOptions.previewCustom) {
+            this.currentOptions.previewCustom(index);
+        }
+        else {
+            this.previewEnabled = true;
+            this.preview.open(index);
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.onPreviewOpen = function () {
+        this.previewOpen.emit();
+        if (this.image && this.image.autoPlay) {
+            this.image.stopAutoPlay();
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.onPreviewClose = function () {
+        this.previewEnabled = false;
+        this.previewClose.emit();
+        if (this.image && this.image.autoPlay) {
+            this.image.startAutoPlay();
+        }
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.selectFromImage = function (index) {
+        this.select(index);
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.selectFromThumbnails = function (index) {
+        this.select(index);
+        if (this.currentOptions && this.currentOptions.thumbnails && this.currentOptions.preview
+            && (!this.currentOptions.image || this.currentOptions.thumbnailsRemainingCount)) {
+            this.openPreview(this.selectedIndex);
+        }
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.show = function (index) {
+        this.select(index);
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.showNext = function () {
+        this.image.showNext();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.showPrev = function () {
+        this.image.showPrev();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.canShowNext = function () {
+        if (this.images && this.currentOptions) {
+            return (this.currentOptions.imageInfinityMove || this.selectedIndex < this.images.length - 1)
+                ? true : false;
+        }
+        else {
+            return false;
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.canShowPrev = function () {
+        if (this.images && this.currentOptions) {
+            return (this.currentOptions.imageInfinityMove || this.selectedIndex > 0) ? true : false;
+        }
+        else {
+            return false;
+        }
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.previewSelect = function (index) {
+        this.previewChange.emit({ index: index, image: this.images[index] });
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.moveThumbnailsRight = function () {
+        this.thubmnails.moveRight();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.moveThumbnailsLeft = function () {
+        this.thubmnails.moveLeft();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.canMoveThumbnailsRight = function () {
+        return this.thubmnails.canMoveRight();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.canMoveThumbnailsLeft = function () {
+        return this.thubmnails.canMoveLeft();
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.resetThumbnails = function () {
+        if (this.thubmnails) {
+            this.thubmnails.reset(/** @type {?} */ (this.currentOptions.startIndex));
+        }
+    };
+    /**
+     * @param {?} index
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.select = function (index) {
+        this.selectedIndex = index;
+        this.change.emit({
+            index: index,
+            image: this.images[index]
+        });
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.checkFullWidth = function () {
+        if (this.currentOptions && this.currentOptions.fullWidth) {
+            this.width = document.body.clientWidth + 'px';
+            this.left = (-(document.body.clientWidth -
+                this.myElement.nativeElement.parentNode.innerWidth) / 2) + 'px';
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.setImages = function () {
+        this.smallImages = this.images.map(function (img) { /** @type {?} */ return (img.small); });
+        this.mediumImages = this.images.map(function (img, i) { return new NgxGalleryOrderedImage({
+            src: img.medium,
+            index: i
+        }); });
+        this.bigImages = this.images.map(function (img) { /** @type {?} */ return (img.big); });
+        this.descriptions = this.images.map(function (img) { /** @type {?} */ return (img.description); });
+        this.links = this.images.map(function (img) { /** @type {?} */ return (img.url); });
+        this.labels = this.images.map(function (img) { /** @type {?} */ return (img.label); });
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.setBreakpoint = function () {
+        this.prevBreakpoint = this.breakpoint;
+        var /** @type {?} */ breakpoints;
+        if (typeof window !== 'undefined') {
+            breakpoints = this.options.filter(function (opt) { return opt.breakpoint >= window.innerWidth; })
+                .map(function (opt) { return opt.breakpoint; });
+        }
+        if (breakpoints && breakpoints.length) {
+            this.breakpoint = breakpoints.pop();
+        }
+        else {
+            this.breakpoint = undefined;
+        }
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.sortOptions = function () {
+        this.options = this.options.filter(function (a) { return a.breakpoint === undefined; }).concat(this.options
+            .filter(function (a) { return a.breakpoint !== undefined; })
+            .sort(function (a, b) { return b.breakpoint - a.breakpoint; }));
+    };
+    /**
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.setOptions = function () {
+        var _this = this;
+        this.currentOptions = new NgxGalleryOptions({});
+        this.options
+            .filter(function (opt) { return opt.breakpoint === undefined || opt.breakpoint >= _this.breakpoint; })
+            .map(function (opt) { return _this.combineOptions(_this.currentOptions, opt); });
+        this.width = /** @type {?} */ (this.currentOptions.width);
+        this.height = /** @type {?} */ (this.currentOptions.height);
+    };
+    /**
+     * @param {?} first
+     * @param {?} second
+     * @return {?}
+     */
+    NgxGalleryComponent.prototype.combineOptions = function (first, second) {
+        Object.keys(second).map(function (val) { return first[val] = second[val] !== undefined ? second[val] : first[val]; });
+    };
+    NgxGalleryComponent.decorators = [
+        { type: core.Component, args: [{
+                    selector: 'ngx-gallery',
+                    template: "\n    <div class=\"ngx-gallery-layout {{currentOptions?.layout}}\">\n        <ngx-gallery-image *ngIf=\"currentOptions?.image\" [style.height]=\"getImageHeight()\" [images]=\"mediumImages\" [clickable]=\"currentOptions?.preview\" [selectedIndex]=\"selectedIndex\" [arrows]=\"currentOptions?.imageArrows\" [arrowsAutoHide]=\"currentOptions?.imageArrowsAutoHide\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [swipe]=\"currentOptions?.imageSwipe\" [animation]=\"currentOptions?.imageAnimation\" [size]=\"currentOptions?.imageSize\" [autoPlay]=\"currentOptions?.imageAutoPlay\" [autoPlayInterval]=\"currentOptions?.imageAutoPlayInterval\" [autoPlayPauseOnHover]=\"currentOptions?.imageAutoPlayPauseOnHover\" [infinityMove]=\"currentOptions?.imageInfinityMove\"  [lazyLoading]=\"currentOptions?.lazyLoading\" [actions]=\"currentOptions?.imageActions\" [descriptions]=\"descriptions\" [showDescription]=\"currentOptions?.imageDescription\" [bullets]=\"currentOptions?.imageBullets\" (onClick)=\"openPreview($event)\" (onActiveChange)=\"selectFromImage($event)\"></ngx-gallery-image>\n\n        <ngx-gallery-thumbnails *ngIf=\"currentOptions?.thumbnails\" [style.marginTop]=\"getThumbnailsMarginTop()\" [style.marginBottom]=\"getThumbnailsMarginBottom()\" [style.height]=\"getThumbnailsHeight()\" [images]=\"smallImages\" [links]=\"currentOptions?.thumbnailsAsLinks ? links : []\" [labels]=\"labels\" [linkTarget]=\"currentOptions?.linkTarget\" [selectedIndex]=\"selectedIndex\" [columns]=\"currentOptions?.thumbnailsColumns\" [rows]=\"currentOptions?.thumbnailsRows\" [margin]=\"currentOptions?.thumbnailMargin\" [arrows]=\"currentOptions?.thumbnailsArrows\" [arrowsAutoHide]=\"currentOptions?.thumbnailsArrowsAutoHide\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [clickable]=\"currentOptions?.image || currentOptions?.preview\" [swipe]=\"currentOptions?.thumbnailsSwipe\" [size]=\"currentOptions?.thumbnailSize\" [moveSize]=\"currentOptions?.thumbnailsMoveSize\" [order]=\"currentOptions?.thumbnailsOrder\" [remainingCount]=\"currentOptions?.thumbnailsRemainingCount\" [lazyLoading]=\"currentOptions?.lazyLoading\" [actions]=\"currentOptions?.thumbnailActions\"  (onActiveChange)=\"selectFromThumbnails($event)\"></ngx-gallery-thumbnails>\n\n        <ngx-gallery-preview [images]=\"bigImages\" [descriptions]=\"descriptions\" [showDescription]=\"currentOptions?.previewDescription\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [closeIcon]=\"currentOptions?.closeIcon\" [fullscreenIcon]=\"currentOptions?.fullscreenIcon\" [spinnerIcon]=\"currentOptions?.spinnerIcon\" [arrows]=\"currentOptions?.previewArrows\" [arrowsAutoHide]=\"currentOptions?.previewArrowsAutoHide\" [swipe]=\"currentOptions?.previewSwipe\" [fullscreen]=\"currentOptions?.previewFullscreen\" [forceFullscreen]=\"currentOptions?.previewForceFullscreen\" [closeOnClick]=\"currentOptions?.previewCloseOnClick\" [closeOnEsc]=\"currentOptions?.previewCloseOnEsc\" [keyboardNavigation]=\"currentOptions?.previewKeyboardNavigation\" [animation]=\"currentOptions?.previewAnimation\" [autoPlay]=\"currentOptions?.previewAutoPlay\" [autoPlayInterval]=\"currentOptions?.previewAutoPlayInterval\" [autoPlayPauseOnHover]=\"currentOptions?.previewAutoPlayPauseOnHover\" [infinityMove]=\"currentOptions?.previewInfinityMove\" [zoom]=\"currentOptions?.previewZoom\" [zoomStep]=\"currentOptions?.previewZoomStep\" [zoomMax]=\"currentOptions?.previewZoomMax\" [zoomMin]=\"currentOptions?.previewZoomMin\" [zoomInIcon]=\"currentOptions?.zoomInIcon\" [zoomOutIcon]=\"currentOptions?.zoomOutIcon\" [actions]=\"currentOptions?.actions\" [rotate]=\"currentOptions?.previewRotate\" [rotateLeftIcon]=\"currentOptions?.rotateLeftIcon\" [rotateRightIcon]=\"currentOptions?.rotateRightIcon\" [download]=\"currentOptions?.previewDownload\" [downloadIcon]=\"currentOptions?.downloadIcon\" [bullets]=\"currentOptions?.previewBullets\" (onClose)=\"onPreviewClose()\" (onOpen)=\"onPreviewOpen()\" (onActiveChange)=\"previewSelect($event)\" [class.ngx-gallery-active]=\"previewEnabled\"></ngx-gallery-preview>\n    </div>\n    ",
+                    styles: [":host { display: inline-block; } :host > * { float: left; } :host /deep/ * { box-sizing: border-box; } :host /deep/ .ngx-gallery-icon { color: white; font-size: 25px; position: absolute; z-index: 2000; display: inline-block; } :host /deep/ .ngx-gallery-icon .ngx-gallery-icon-content { display: block; } :host /deep/ .ngx-gallery-clickable { cursor: pointer; } :host /deep/ .ngx-gallery-icons-wrapper .ngx-gallery-icon { position: relative; margin-right: 5px; margin-top: 5px; font-size: 20px; cursor: pointer; } :host /deep/ .ngx-gallery-icons-wrapper { float: right; } :host .ngx-gallery-layout { width: 100%; height: 100%; display: flex; flex-direction: column; } :host .ngx-gallery-layout.thumbnails-top ngx-gallery-image { order: 2; } :host .ngx-gallery-layout.thumbnails-top ngx-gallery-thumbnails { order: 1; } :host .ngx-gallery-layout.thumbnails-bottom ngx-gallery-image { order: 1; } :host .ngx-gallery-layout.thumbnails-bottom ngx-gallery-thumbnails { order: 2; } "],
+                    providers: [NgxGalleryHelperService]
+                },] },
+    ];
+    /**
+     * @nocollapse
+     */
+    NgxGalleryComponent.ctorParameters = function () { return [
+        { type: core.ElementRef, },
+    ]; };
+    NgxGalleryComponent.propDecorators = {
+        'options': [{ type: core.Input },],
+        'images': [{ type: core.Input },],
+        'imagesReady': [{ type: core.Output },],
+        'change': [{ type: core.Output },],
+        'previewOpen': [{ type: core.Output },],
+        'previewClose': [{ type: core.Output },],
+        'previewChange': [{ type: core.Output },],
+        'preview': [{ type: core.ViewChild, args: [NgxGalleryPreviewComponent,] },],
+        'image': [{ type: core.ViewChild, args: [NgxGalleryImageComponent,] },],
+        'thubmnails': [{ type: core.ViewChild, args: [NgxGalleryThumbnailsComponent,] },],
+        'width': [{ type: core.HostBinding, args: ['style.width',] },],
+        'height': [{ type: core.HostBinding, args: ['style.height',] },],
+        'left': [{ type: core.HostBinding, args: ['style.left',] },],
+        'onResize': [{ type: core.HostListener, args: ['window:resize',] },],
+    };
+    return NgxGalleryComponent;
+}());
+
+var NgxGalleryImage = /** @class */ (function () {
+    /**
+     * @param {?} obj
+     */
+    function NgxGalleryImage(obj) {
+        this.small = obj.small;
+        this.medium = obj.medium;
+        this.big = obj.big;
+        this.description = obj.description;
+        this.url = obj.url;
+        this.label = obj.label;
+    }
+    return NgxGalleryImage;
+}());
+
+var __extends = (undefined && undefined.__extends) || (function () {
+    var extendStatics = Object.setPrototypeOf ||
+        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
+        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
+    return function (d, b) {
+        extendStatics(d, b);
+        function __() { this.constructor = d; }
+        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
+    };
+})();
+var CustomHammerConfig = /** @class */ (function (_super) {
+    __extends(CustomHammerConfig, _super);
+    function CustomHammerConfig() {
+        var _this = _super !== null && _super.apply(this, arguments) || this;
+        _this.overrides = ({
+            'pinch': { enable: false },
+            'rotate': { enable: false }
+        });
+        return _this;
+    }
+    return CustomHammerConfig;
+}(platformBrowser.HammerGestureConfig));
+var NgxGalleryModule = /** @class */ (function () {
+    function NgxGalleryModule() {
+    }
+    NgxGalleryModule.decorators = [
+        { type: core.NgModule, args: [{
+                    imports: [
+                        common.CommonModule
+                    ],
+                    declarations: [
+                        NgxGalleryActionComponent,
+                        NgxGalleryArrowsComponent,
+                        NgxGalleryBulletsComponent,
+                        NgxGalleryImageComponent,
+                        NgxGalleryThumbnailsComponent,
+                        NgxGalleryPreviewComponent,
+                        NgxGalleryComponent
+                    ],
+                    exports: [
+                        NgxGalleryComponent
+                    ],
+                    providers: [
+                        { provide: platformBrowser.HAMMER_GESTURE_CONFIG, useClass: CustomHammerConfig }
+                    ]
+                },] },
+    ];
+    /**
+     * @nocollapse
+     */
+    NgxGalleryModule.ctorParameters = function () { return []; };
+    return NgxGalleryModule;
+}());
+
+exports.CustomHammerConfig = CustomHammerConfig;
+exports.NgxGalleryModule = NgxGalleryModule;
+exports.NgxGalleryComponent = NgxGalleryComponent;
+exports.NgxGalleryActionComponent = NgxGalleryActionComponent;
+exports.NgxGalleryImageComponent = NgxGalleryImageComponent;
+exports.NgxGalleryThumbnailsComponent = NgxGalleryThumbnailsComponent;
+exports.NgxGalleryPreviewComponent = NgxGalleryPreviewComponent;
+exports.NgxGalleryArrowsComponent = NgxGalleryArrowsComponent;
+exports.NgxGalleryBulletsComponent = NgxGalleryBulletsComponent;
+exports.NgxGalleryOptions = NgxGalleryOptions;
+exports.NgxGalleryImage = NgxGalleryImage;
+exports.NgxGalleryAnimation = NgxGalleryAnimation;
+exports.NgxGalleryHelperService = NgxGalleryHelperService;
+exports.NgxGalleryImageSize = NgxGalleryImageSize;
+exports.NgxGalleryLayout = NgxGalleryLayout;
+exports.NgxGalleryOrder = NgxGalleryOrder;
+exports.NgxGalleryOrderedImage = NgxGalleryOrderedImage;
+exports.NgxGalleryAction = NgxGalleryAction;
+
+Object.defineProperty(exports, '__esModule', { value: true });
+
+})));
diff --git a/node_modules/ngx-gallery/ngx-gallery-helper.service.d.ts b/node_modules/ngx-gallery/ngx-gallery-helper.service.d.ts
index 65ff632..9c4e069 100644
--- a/node_modules/ngx-gallery/ngx-gallery-helper.service.d.ts
+++ b/node_modules/ngx-gallery/ngx-gallery-helper.service.d.ts
@@ -1,8 +1,8 @@
-import { ElementRef, Renderer } from '@angular/core';
+import { ElementRef, Renderer2 } from '@angular/core';
 export declare class NgxGalleryHelperService {
     private renderer;
     private swipeHandlers;
-    constructor(renderer: Renderer);
+    constructor(renderer: Renderer2);
     manageSwipe(status: boolean, element: ElementRef, id: string, nextHandler: Function, prevHandler: Function): void;
     validateUrl(url: string): string;
     getBackgroundUrl(image: string): string;
diff --git a/node_modules/ngx-gallery/ngx-gallery-preview.component.d.ts b/node_modules/ngx-gallery/ngx-gallery-preview.component.d.ts
index 055a67b..061e38c 100644
--- a/node_modules/ngx-gallery/ngx-gallery-preview.component.d.ts
+++ b/node_modules/ngx-gallery/ngx-gallery-preview.component.d.ts
@@ -1,5 +1,5 @@
-import { ChangeDetectorRef, EventEmitter, OnInit, OnChanges, SimpleChanges, ElementRef, Renderer } from '@angular/core';
-import { SafeResourceUrl, DomSanitizer, SafeUrl, SafeStyle } from '@angular/platform-browser';
+import { ChangeDetectorRef, ElementRef, EventEmitter, OnChanges, OnInit, Renderer2, SimpleChanges } from '@angular/core';
+import { DomSanitizer, SafeResourceUrl, SafeStyle, SafeUrl } from '@angular/platform-browser';
 import { NgxGalleryAction } from './ngx-gallery-action.model';
 import { NgxGalleryHelperService } from './ngx-gallery-helper.service';
 export declare class NgxGalleryPreviewComponent implements OnInit, OnChanges {
@@ -64,7 +64,7 @@ export declare class NgxGalleryPreviewComponent implements OnInit, OnChanges {
     private initialTop;
     private isMove;
     private keyDownListener;
-    constructor(sanitization: DomSanitizer, elementRef: ElementRef, helperService: NgxGalleryHelperService, renderer: Renderer, changeDetectorRef: ChangeDetectorRef);
+    constructor(sanitization: DomSanitizer, elementRef: ElementRef, helperService: NgxGalleryHelperService, renderer: Renderer2, changeDetectorRef: ChangeDetectorRef);
     ngOnInit(): void;
     ngOnChanges(changes: SimpleChanges): void;
     ngOnDestroy(): void;
diff --git a/node_modules/ngx-gallery/ngx-gallery.d.ts b/node_modules/ngx-gallery/ngx-gallery.d.ts
index 67ff29a..2eee1ea 100644
--- a/node_modules/ngx-gallery/ngx-gallery.d.ts
+++ b/node_modules/ngx-gallery/ngx-gallery.d.ts
@@ -2,3 +2,5 @@
  * Generated bundle index. Do not edit.
  */
 export * from './index';
+
+//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWdhbGxlcnkuZC50cyIsInNvdXJjZXMiOlsibmd4LWdhbGxlcnkuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBHZW5lcmF0ZWQgYnVuZGxlIGluZGV4LiBEbyBub3QgZWRpdC5cclxuICovXHJcbmV4cG9ydCAqIGZyb20gJy4vaW5kZXgnO1xyXG4iXX0=
\ No newline at end of file
diff --git a/node_modules/ngx-gallery/ngx-gallery.d.ts.__ivy_ngcc_bak b/node_modules/ngx-gallery/ngx-gallery.d.ts.__ivy_ngcc_bak
new file mode 100644
index 0000000..67ff29a
--- /dev/null
+++ b/node_modules/ngx-gallery/ngx-gallery.d.ts.__ivy_ngcc_bak
@@ -0,0 +1,4 @@
+/**
+ * Generated bundle index. Do not edit.
+ */
+export * from './index';
