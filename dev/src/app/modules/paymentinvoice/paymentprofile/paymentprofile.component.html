<div id="paymented" #pageScroll fxLayoutAlign="center">
<app-responseloader *ngIf="disableloader"></app-responseloader>

    <div fxFlex.gt-sm="100" fxFlex="100">
        <div class="infobtns" fxLayoutAlign="end end" fxLayout="row wrap" >
            <button mat-raised-button class="m-l-15 auditbtn m-t-10" *ngIf="projectmst_fk == 1" [routerLink]="['/centrecertification/auditlogpay', apptempPk, security.encrypt(projectmst_fk)]">{{'invoice.audilog' | translate}}</button>
            <button mat-raised-button class="m-l-15 auditbtn m-t-10" *ngIf="projectmst_fk == 2" [routerLink]="['/centrecertification/auditlogstandpay', apptempPk, security.encrypt(projectmst_fk)]">{{'invoice.audilog' | translate}}</button>
            <button mat-raised-button class="m-l-15 auditbtn m-t-10" *ngIf="projectmst_fk == 3" [routerLink]="['/centrecertification/auditlogstandpay', apptempPk, security.encrypt(projectmst_fk)]">{{'invoice.audilog' | translate}}</button>
            <button mat-raised-button class="m-l-15 auditbtn m-t-10" *ngIf="projectmst_fk == 4" [routerLink]="['/centrecertification/auditlograspay', apptempPk, security.encrypt(projectmst_fk)]">{{'invoice.audilog' | translate}}</button>
        </div>
        <div class="knowledgegrid m-t-10 m-b-20 p-10" fxLayout="column">
            <div class="details p-l-15 p-r-15" fxFlex="100" >
                <div class= "head" fxLayout="row wrap">
                    <h2 class="headcolor fs-18 m-0 lh-15">{{omrm_companyname_en}}</h2>
                   <div class="grade">
                    <p class="grade d-flex fs-16"*ngIf="appdt_grademst_fk == 1"><img src="assets\images\opalimages\BRONZE.svg" alt="Grade">{{'invoice.gradbron' | translate}} </p>
                    <p class="gold d-flex fs-16" *ngIf="appdt_grademst_fk == 3"><img src="assets\images\opalimages\GOLD.svg" alt="Grade">{{'invoice.gradgold' | translate}}
                    </p>
                    <p class="silver d-flex fs-16" *ngIf="appdt_grademst_fk == 2"><img src="assets\images\opalimages\SILVER.svg" alt="Grade">{{'invoice.gradsilv' | translate}} </p>
                   </div>
                </div>
               <div class="m-t-20" *ngIf="projectmst_fk == 1">
                <p class="text-gray m-0 fs-15 ">{{'invoice.traiprovname' | translate}}:<span class="text-default">{{omrm_tpname_en}}</span></p>
               </div>
               <div class="m-t-10"  *ngIf="projectmst_fk == 4">
                <p class="text-gray m-0 fs-15 ">{{'Centre Name' | translate}}:<span class="text-default"> {{omrm_branch_en}}</span></p>
               </div>
                <div class="fs-13 m-t-20 m-b-20" fxLayout="row wrap">
                    <p class="application-detais m-r-10 text-gray m-0">{{'invoice.applirefno' | translate}}:<span
                            class="text-default"> {{appdt_appreferno}}</span>
                    </p>
                    <p class="application-detais m-r-10 text-gray m-0">{{'invoice.offitype' | translate}}:<span
                            class="text-default"> {{ appiit_officetype}}</span></p>
                    <p class="application-detais m-r-10 text-gray m-0">{{'invoice.applytype' | translate}}:<span
                            class="text-default"> {{ appdt_apptype}}</span></p>
                    <p class="application-detais m-r-10 text-gray m-0">{{'invoice.applstat' | translate}}:
                          <span class="txt-gry3">
                                <span *ngIf="appdt_status == '1'" class="text-default">{{'table.yettosubmit'
                                        |translate}}</span>
                                    <span *ngIf="appdt_status == '2'" class="text-default">Desktop Review Pending</span>
                                    <span *ngIf="appdt_status == '3'" class="text-default">Missing Files</span>
                                    <span *ngIf="appdt_status == '4'" class="text-default">Desktop Review Pending</span>
                                    <span *ngIf="appdt_status == '5'" class="text-default">Payment Pending</span>
                                    <span *ngIf="appdt_status == '6'" class="text-default">Confirm Payment</span>
                                    <span *ngIf="appdt_status == '7'" class="text-default">Yet to schedule for Site Audit</span> 
                                    <span *ngIf="appdt_status == '8' && projectmst_fk == '1'" class="text-default">Audit Date Selection (Training Provider)</span>
                                    <span *ngIf="appdt_status == '8' && projectmst_fk == '4'" class="text-default">Audit Date Selection (Inspection Centre)</span>
                                    <span *ngIf="appdt_status == '9'" class="text-default">Ready for Audit</span>
                                    <span *ngIf="appdt_status == '10'" class="text-default">Quality Manager Approval Pending</span>
                                    <span *ngIf="appdt_status == '11'" class="text-default">Authority  Approval Pending</span>
                                    <span *ngIf="appdt_status == '12'" class="text-default">CEO Approval Pending</span>
                                    <span *ngIf="appdt_status == '13'" class="text-default">Site Audit Report Declined</span> 
                                    <span *ngIf="appdt_status == '14'" class="text-default">{{'table.resubmforqual'
                                    |translate}}</span> 
                                    <span *ngIf="appdt_status == '15'" class="text-default">{{'table.resubmforauth'
                                    |translate}}</span>
                                    <span *ngIf="appdt_status == '16'" class="text-default">{{'table.resubmforceoapp'
                                    |translate}}</span> 
                                    <span *ngIf="appdt_status == '17'" class="text-default">{{'table.approved'
                                    |translate}}</span>
                                    <span *ngIf="appdt_status == '18'" class="text-default">{{'table.fineteam'
                                            |translate}}</span>
                                    <span *ngIf="appdt_status == '19'" class="text-default">{{'table.susb'
                                    |translate}}</span>
                                    <span *ngIf="appdt_status == '20'" class="text-default">Certification Form Declined</span>
                          </span>
                        
                        </p>
                    <p class="application-detais m-r-10 text-gray m-0">{{'invoice.certstat' | translate}}:
                      
                            <span  *ngIf="!appdt_certificategenon" class="red">{{'validation.new'
                                |translate}}</span>
                            <span *ngIf="appdt_certificategenon && isexpired == '0'"  class="approved" class="green"> {{'validation.acti'
                                    |translate}}</span>
                            <span *ngIf="appdt_certificategenon && isexpired == '1'"  class="red">{{'validation.expi'
                                |translate}}</span>

                             
                        </p>
                        <p class="application-detais m-r-10 text-gray m-0">{{'Site Audit Scheduled on' | translate}}:
                            <span class="text-default">{{schdate?schdate:'-'}}</span>
                        </p>
                </div>
            </div>
            <mat-divider></mat-divider>
            <div class="address  p-l-15" fxLayout="row wrap" fxFlex.gt-sm="60"  fxFlex="100">
                <div class="add-details" fxFlex.gt-sm="20"  fxFlex="50" *ngIf="appiit_locmapurl">
                    <p class="text-gray fs-14">{{'invoice.siteloca' | translate}} <br>  <a matTooltip="View Location" href="https://{{appiit_locmapurl}}"  target="_blank"><mat-icon class="fa fa-map-marker mapicon text-gray fs-22" ></mat-icon></a></p>
                </div>
                <div class="add-details" fxFlex.gt-sm="20"  fxFlex="50" >
                    <p class="text-gray fs-14">{{'invoice.dateexoi' | translate}} <br>
                    <span class="text-default">{{appdt_certificateexpiry? appdt_certificateexpiry: '-'}}</span> </p>
                </div>
                <div class="add-details" fxFlex.gt-sm="20"  fxFlex="50" >
                    <p class="text-gray fs-14">{{'invoice.addon' | translate}} <br>
                    <span class="text-default">{{appdt_submittedon? appdt_submittedon: '-'}}</span></p>
                </div>
                <div class="add-details" fxFlex.gt-sm="20"  fxFlex="50" >
                    <p class="text-gray fs-14">{{'invoice.lastupdat' | translate}}<br>
                    <span class="text-default">{{appdt_updatedon? appdt_updatedon: '-'}}</span>
                    </p>
                </div>
            </div>
        </div>
        <div fxLayoutAlign="flex-start" fxLayout="row wrap" class="m-b-40">
            <div class="feedetails m-t-20" fxFlex.gt-md="40" fxFlex="100">
                <h4 class="headcolor fs-18 m-0">{{'invoice.certfeedeta' | translate}}</h4>
                <div class="view_dtl m-t-25" fxLayout="row">
                    <p class="m-0">{{'invoice.invonumb' | translate}}</p>
                    <span>{{apid_invoiceno}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row" *ngIf="appdt_status == 5">
                    <p class="m-0">{{'invoice.invorrais' | translate}}</p>
                    <span>{{apid_raisedon}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row" *ngIf="appdt_status == 5">
                    <p class="m-0">{{'invoice.invoage' | translate}}</p>
                    <span>{{age}} {{days}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row" *ngIf="(projectmst_fk == '1' || (projectmst_fk == '2' && appdt_apptype != 'Updated') || projectmst_fk == '4' && appdt_apptype != 'Updated')">
                    <p class="m-0">{{'invoice.certfee' | translate}}</p>
                    <span>{{'invoice.omr' | translate}} &nbsp; {{apppdt_amount}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row" *ngIf="projectmst_fk!=1 && noofstaff>0">
                    <p class="m-0">No. of Staff Evaluated</p>
                    <span>{{noofstaff}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row" *ngIf="projectmst_fk!=1 && staffval>0">
                    <p class="m-0">Staff Evaluation Fee</p>
                    <span>{{'invoice.omr' | translate}} &nbsp; {{staffval}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row">
                    <p class="m-0">{{'invoice.vat' | translate}}(5%) </p>
                    <span>{{'invoice.omr' | translate}} &nbsp;&nbsp;&nbsp; {{apppdt_vatchrgs}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row">
                    <p class="m-0">{{'invoice.totaamou' | translate}}</p>
                    <span>{{'invoice.omr' | translate}} &nbsp; {{total_amount}}</span>
                </div>
            </div>
            <div class="feedetails" ngClass="m-t-28" fxFlex.gt-md="35" 
                fxFlex="100"  *ngIf="appdt_status != 5">
                <h4 class="headcolor fs-18 m-0">{{'invoice.paymdeta' | translate}}</h4>
                <div class="view_dtl m-t-25" fxLayout="row">
                    <p class="m-0">{{'invoice.paymmode' | translate}}</p>
                    <span>{{apppdt_paymentmode}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row" *ngIf="apppdt_paymentmode == 'Bank Transfer'">
                    <p class="m-0">{{'invoice.tranid' | translate}}</p>
                    <span>{{apppdt_offlinerefno}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row" *ngIf="apppdt_paymentmode == 'Cheque'">
                    <p class="m-0">Cheque Number</p>
                    <span>{{apppdt_offlinerefno}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row">
                    <p class="m-0">{{'invoice.bankname' | translate}}</p>
                    <span>{{apppdt_bankname}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row">
                    <p class="m-0">{{'invoice.dateofpaym' | translate}}</p>
                    <span>{{apppdt_dateofpymt}}</span>
                </div>
                <div class="view_dtl m-t-25" fxLayout="row">
                    <p class="m-0">{{'invoice.paymproo' | translate}}</p>
                    <span class="document" fxLayout="row" fxLayoutAlign="center center" >
                    <a href="{{fileurl}}" fxLayoutAlign="center center"  class="txt-gry3 fs-16" target="_blank">
                            <img src="assets/images/opalimages/{{filetype}}_new.svg "  alt="document_new" class="p-r-5">View
                           
                          </a></span>
                </div>

            </div>
            <!-- *ngIf="notpayment && financebtn" -->
           <div class="m-t-20" *ngIf="notpayment">
                <!-- <div class="m-t-20"> -->
            <app-viewvalidation [hidebtn]="false"  [callbackFn]="onValidation"  [paymentcondition]="paymentcondition" [paymentbutton]="true" (dataEmitter)="receiveData($event)"></app-viewvalidation>
           </div>
        </div>
        <mat-divider *ngIf="apppdt_status == 3 || apppdt_status == 4"></mat-divider>
        <div class="comments m-t-20" *ngIf="apppdt_status == 3 || apppdt_status == 4">
            <div class="title m-b-20" fxLayout="row wrap" fxLayoutAlign="space-between center">
               <div class="title" fxLayout="row">
                <h4 class="m-r-10 m-0">{{'invoice.verification' | translate}}</h4>
                <span class="badge decl" *ngIf="apppdt_status == 4">{{'invoice.notrece' | translate}}</span>
                <span class="badge appr" *ngIf="apppdt_status == 3">{{'invoice.receive' | translate}}</span>
               </div>
               <!-- <app-viewvalidation [hidebtn]="true" [condition]="condition"></app-viewvalidation> -->
            </div>
            <div   [ngClass]="apppdt_status == 3 ? 'successcmd' : 'declinecmd'" class=" m-l-0 m-r-0 m-b-20">
                <p class="18 comment">{{'invoice.comm' | translate}}</p>
                <p class="16 m-b-30"  [innerHtml]='apppdt_appdeccomment'> </p>
                <mat-divider></mat-divider>
                <div class="validinfo" fxLayout="row wrap">
                    <p class="fs-16 txt-gry m-r-40">{{'invoice.lastvalion' | translate}} : <span
                            class="fs-16 txt-gry3">{{apppdt_appdecon?(apppdt_appdecon | date: 'dd-MM-yyyy'):'-'}} </span></p>
                    <p class="fs-16 txt-gry" ng>{{'invoice.lastvaliby' | translate}} : <span
                            class="fs-16 txt-gry3">{{oum_firstname}}</span></p>
                </div>
            </div>
        </div>
        <div class="btngroup m-t-15" fxLayout="row wrap" fxLayoutAlign="flex-end center" > 
            <button mat-raised-button class="auditbtn m-r-15 fs-16" type="button" (click)="goBack()">{{'Back' | translate}}</button>
            </div>
    </div>
</div>