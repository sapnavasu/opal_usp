<div fxLayoutAlign="center start" id="viewStatus">
    <app-responseloader *ngIf="loader"></app-responseloader>
    <div fxFlex="100" fxFlex.gt-sm="100">
        <!-------------- info ----------------->
        <app-infobox *ngIf="devicePk" [devicePk]="devicePk" [page]="view == true ? 'view' : 'approve'"></app-infobox>
        <div *ngIf="!view" fxLayoutAlign="end center" class="m-t-15">
            <app-valiation [addClass]="'validetbtn'" [buttonName]="'validation.vali' | translate"
                (approvedEmitter)="Approvalsubmit($event)" [submitbutton]="'validation.sumb' | translate"
                (declinedEmitter)="declinesubmit($event)"></app-valiation>
        </div>
        <!-------------- comment ----------------->
        <div class="viewstatus m-t-25" fxLayout="column">
            <div class="m-l-0 m-r-0 m-b-10" *ngIf="(status == 3 || status == 7) && inspcData"
                [ngClass]="approved == true ? 'successcmd' : 'declinecmd'">
                <h4 class="18 m-5 m-l-0">{{'Comments' | translate}}</h4>
                <p class="fs-16 txt-gry3 m-b-30"
                    [innerHTML]="inspcData?.apprvdComments ? inspcData?.apprvdComments :'Nil'"></p>
                <mat-divider></mat-divider>
                <div class="validinfo" fxLayout="row wrap">
                    <p class="fs-16 txt-gry m-r-40">{{'Validated on' | translate}} : <span
                            class="fs-16 txt-gry3">{{inspcData?.apprvdOn}}</span></p>
                    <p class="fs-16 txt-gry m-l-30">{{'Validated by' | translate}} : <span
                            class="fs-16 txt-gry3">{{inspcData?.approvedBy}}</span></p>
                </div>
            </div>
            <!-------------- info ----------------->
            <div class="viewDetailes" *ngIf="viewdtls" fxLayoutAlign="start start">
                <div fxLayout="row wrap" fxFlex="100" fxFlex.gt-md="90" fxLayoutAlign="space-between start">
                    <div class="company_dtlview">
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'CR Number' | translate}}</p>
                            <span>{{viewdtls.crnumber?viewdtls.crnumber:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Contact Person Email ID' | translate}}</p>
                            <span>{{viewdtls.contact_person?viewdtls.contact_person:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Contact Person Mobile Number' | translate}}</p>
                            <span>{{viewdtls.contact_person_mob?viewdtls.contact_person_mob:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Software Version' | translate}}</p>
                            <span>{{viewdtls.softVersion?viewdtls.softVersion:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Vehicle Manufacturer' | translate}}</p>
                            <span>{{viewdtls.manufac_name_en?viewdtls.manufac_name_en:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Odometer Reading (km)' | translate}}</p>
                            <span>{{viewdtls.odometer?viewdtls.odometer:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Device Serial Number' | translate}}</p>
                            <span>{{viewdtls.device_number?viewdtls.device_number:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'SIM Card Number' | translate}}</p>
                            <span>{{viewdtls.simnum?viewdtls.simnum:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'SIM Service Provider' | translate}}</p>
                            <span>{{viewdtls.simprovider_en?viewdtls.simprovider_en:'-'}}</span>
                        </div>
                    </div>
                    <div class="company_dtlview">
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Primary Speed Source (VSS/CANBUS) ' | translate}}</p>
                            <span>{{viewdtls.primary_spd?viewdtls.primary_spd:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Secondary Speed Source' | translate}}</p>
                            <span>{{viewdtls.secondary_spd?viewdtls.secondary_spd:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Speed Limiter Serial Number' | translate}}</p>
                            <span>{{viewdtls.spdlmtslnum?viewdtls.spdlmtslnum:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Vehicle Fleet Number' | translate}}</p>
                            <span>{{viewdtls.fleetnum?viewdtls.fleetnum:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'First ROP Registration Date' | translate}}</p>
                            <span>{{viewdtls.frstropdt?viewdtls.frstropdt:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'Model Year' | translate}}</p>
                            <span>{{viewdtls.modelyr?viewdtls.modelyr:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" fxLayout="row">
                            <p class="m-0">{{'First Registration Year' | translate}}</p>
                            <span>{{viewdtls.frstropyr?viewdtls.frstropyr:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" *ngIf="viewdtls.dateoffittin" fxLayout="row">
                            <p class="m-0">{{'Date of Fitting' | translate}}</p>
                            <span>{{viewdtls.dateoffittin?viewdtls.dateoffittin:'-'}}</span>
                        </div>
                        <div class="view_dtl m-t-25" *ngIf="viewdtls.dateofrepla" fxLayout="row">
                            <p class="m-0">{{'Date of Replacement' | translate}}</p>
                            <span>{{viewdtls.dateofrepla?viewdtls.dateofrepla:'-'}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-------------installation details --------------->
            <div *ngIf="inspcData" fxLayout="column">
                <div fxLayout="row wrap" fxLayoutAlign="space-between center" class="p-t-30 timeduration_contain">
                    <h5 class="trainingdurationtitle m-0 fs-18">{{'Installation Details' | translate}}
                    </h5>

                    <div class="company_dtlview info" fxLayout="row wrap" fxLayoutAlign="space-between start"
                        fxFlex="100" fxFlex.gt-md="90">
                        <div class="company_dtlview">
                            <div class="view_dtl m-t-15" fxLayout="row">
                                <p class="m-0 txt-gry fs-16">{{'Submitted On' | translate}}</p>
                                <span class="fs-16 txt-gry3">{{inspcData?.submittedOn}}</span>
                            </div>
                            <div class="view_dtl m-t-15" fxLayout="row">
                                <p class="m-0 txt-gry fs-16">{{'Submitted By' | translate}}</p>
                                <span class="fs-16 txt-gry3">{{inspcData?.submittedBy }}</span>
                            </div>
                        </div>
                        <div class="company_dtlview">
                            <div class="view_dtl m-t-15" fxLayout="row">
                                <p class="m-0 txt-gry fs-16">{{'Last Updated On' | translate}}</p>
                                <span class="fs-16 txt-gry3">{{inspcData?.lastupdatedOn ? inspcData?.lastupdatedOn :
                                    '-'}}</span>
                            </div>
                            <div class="view_dtl m-t-15" fxLayout="row">
                                <p class="m-0 txt-gry fs-16">{{'Last Updated by' | translate}}</p>
                                <span class="fs-16 txt-gry3">{{inspcData?.lastupdatedBy ? inspcData?.lastupdatedBy :
                                    '-'}}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <!----------------- installation report  ---------------->
                <div *ngIf="inspcData" [ngSwitch]="InspectionTemplate" class="m-t-40">
                    <!------------ offline -------------->
                    <ng-template [ngSwitchCase]="'Offline'">
                        <h5 class="trainingdurationtitle m-0 fs-18 blue">{{'Installation Report' | translate}}
                        </h5>
                        <div class="company_dtlview">
                            <div class="view_dtl m-t-25" fxLayout="row" fxLayoutAlign="start center">
                                <p class="m-0">{{'Proof of Document ' | translate}}</p>
                               <div fxLayout="row" fxLayoutGap="25px">
                                <div *ngFor="let file of inspcData?.prooflink">
                                    <div fxLayout="row wrap" fxLayoutAlign="start center" class="m-t-15"
                                        *ngIf="file.filetype=='pdf' || file.filetype=='PDF'">
                                        <a target="_blank" fxLayoutAlign="start center" href="{{file.link}}"
                                            class="fs-14 txt-gry3">
                                            <img src="assets/images/opalimages/pdf_new.svg" class="documents m-r-10"
                                                alt="pdf">{{'View' | translate}}
                                        </a>
                                    </div>
                                    <div fxLayout="row wrap" fxLayoutAlign="start center" class="m-t-15"
                                        *ngIf="file.filetype=='jpeg' || file.filetype=='JPEG'">
                                        <a target="_blank" fxLayoutAlign="start center" href="{{file.link}}"
                                            class="imgsize fs-14 txt-gry3">
                                            <img src="assets/images/opalimages/jpeg_new.svg" class="documents m-r-10"
                                                alt="jpeg">{{'View' | translate}}
                                        </a>
                                    </div>
                                    <div fxLayout="row wrap" fxLayoutAlign="start center" class="m-t-15"
                                        *ngIf="file.filetype=='jpg' || file.filetype=='JPG'">
                                        <a target="_blank" fxLayoutAlign="start center" href="{{file.link}}"
                                            class="imgsize fs-14 txt-gry3">
                                            <img src="assets/images/opalimages/jpg_new.svg" class="documents m-r-10"
                                                alt="jpg">{{'View' | translate}}
                                        </a>
                                    </div>
                                    <div fxLayout="row wrap" fxLayoutAlign="start center" class="m-t-15"
                                        *ngIf="file.filetype=='PNG' || file.filetype=='png'">
                                        <a target="_blank" fxLayoutAlign="start center" href="{{file.link}}"
                                            class="imgsize fs-14 txt-gry3">
                                            <img src="assets/images/opalimages/png_new.svg" class="documents m-r-10"
                                                alt="png">{{'View' | translate}}
                                        </a>
                                    </div>
                                </div>
                               </div>
                            </div>
                            <div class="view_dtl m-t-20" fxLayout="row" fxLayoutAlign="start start">
                                <p class="m-0">{{'Comments ' | translate}}</p>
                                <div class="contenthere txt-gry3 fs-15"
                                    [innerHTML]="inspcData?.inspComments ? inspcData?.inspComments :'-'">
                                </div>
                            </div>
                        </div>
                    </ng-template>
                    <!--------------- online  ------------->
                    <ng-template [ngSwitchCase]="'Online'">
                        <div class="online">
                            <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <h4 class="fs-18 blue m-0 p-b-10">{{ 'Installation Report'| translate}}</h4>
                            </div>
                            <mat-divider class="m-b-10"></mat-divider>
                            <div class="maincontent m-t-20" *ngFor="let list of onlinechklistresponse; let i = index">
                                <div fxLayout="column">
                                    <div fxLayout="row" class="questions"><span class="fs-18 blue">{{i +
                                            1}}</span>.&nbsp;<h4 class="fs-18 txy-gry3 m-0 blue">
                                            {{list.categoryname_en}}</h4>
                                    </div>
                                    <div class=" m-l-20" *ngFor="let secdlist of list.ques;let j = index;">
                                        <div fxLayout="row" class="questions m-t-30"><span class="fs-16 txt-gry3">{{i +
                                                1}}.{{j + 1}}</span>.&nbsp;<span
                                                class="fs-16 txy-gry3 m-0 txt-gry3">{{secdlist.iiqd_question_en}}
                                                <span class="passfailcount m-l-12">
                                                    <span *ngIf="secdlist.aqm_questiontype == 1">
                                                        <span *ngIf="secdlist.colourcode == 1"
                                                            class="indication pass fs-14">{{secdlist.iiad_answer_en ? secdlist.iiad_answer_en : '-'}}</span>
                                                        <span *ngIf="secdlist.colourcode == 2"
                                                            class="indication notcheck fs-14">{{secdlist.iiad_answer_en ? secdlist.iiad_answer_en : '-'}}</span>
                                                        <span *ngIf="secdlist.colourcode != 2 && secdlist.colourcode != 1"
                                                            class="indication na fs-14">{{secdlist.iiad_answer_en ? secdlist.iiad_answer_en : '-'}}</span>
                                                    </span>
                                                   
                                                </span>
                                            </span>
                                           
                                        </div>
                                        <div class="inputValues m-t-15">
                                            <div *ngIf="secdlist.aqm_questiontype == 3" fxLayout="row wrap" fxLayoutGap.gt-sm="10px">
                                                <div *ngFor="let anslist of secdlist.answerlist.data" class="m-t-10" fxFlex="100" fxFlex.gt-sm="48">
                                                    <p class="m-0 txt-gry fs-16" fxFlex="270px">
                                                        {{anslist.iiad_answer_en}}</p>
                                                    <p class="m-0 txt-gry3 fs-16" >
                                                        {{anslist.iiad_details ? anslist.iiad_details : '-' }}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="m-t-16 m-b-10">
                                            <div *ngIf="secdlist.aqm_questiontype == 1">
                                                <div *ngIf="secdlist.comments">
                                                    <p class="editortitle importantfield txt-gry m-t-2 m-b-5 fs-16">
                                                        {{'validation.comm' | translate}}
                                                    </p>
                                                    <div class="contenthere txt-gry3 fs-15"
                                                        [innerHTML]="secdlist.comments ? secdlist.comments :'-'">
                                                    </div>
                                                </div>
                                                <div *ngIf="secdlist.prooflink" class="m-t-10">
                                                    <p class="m-0 txt-gry fs-16" fxFlex="200px">{{'Proof of Document' | translate}}</p>
                                                    <div *ngFor="let file of secdlist.prooflink" >
                                                        <div class="m-t-25" fxLayout="row" fxLayoutAlign="start center">
                                                            
                                                            <span><a target="_blank" href="{{file.link}}" class="txt-gry3 fs-14"
                                                                    fxLayout="row" fxLayoutAlign="start center"><img
                                                                        class="m-r-5" fxFlex="22"
                                                                        src="assets/images/opalimages/{{file.filetype}}_new.svg"
                                                                        alt="proofdoc">{{'View' | translate
                                                                    }}</a></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="secdlist.aqm_questiontype == 3">
                                                
                                                <div *ngIf="secdlist.answerlist.comments">
                                                    <p class="editortitle importantfield txt-gry m-t-2 m-b-5 fs-16">
                                                        {{'validation.comm' | translate}}
                                                    </p>
                                                    <div class="contenthere txt-gry3 fs-15"
                                                        [innerHTML]="secdlist.answerlist.comments ? secdlist.answerlist.comments :'-'">
                                                    </div>
                                                </div>
                                                <div *ngIf="secdlist.answerlist.prooflink">
                                                    <div  class="m-t-10">
                                                        <div class="m-t-25" fxLayout="row" fxLayoutAlign="start center">
                                                            <p class="m-0 txt-gry fs-16" fxFlex="200px">{{'Proof of Document' | translate}}</p>
                                                            <div>
                                                                <span *ngFor="let file of secdlist.answerlist.prooflink"><a target="_blank" href="{{file.link}}"
                                                                   class="txt-gry3 fs-14" fxLayout="row"
                                                                fxLayoutAlign="start center"><img class="m-r-5"
                                                                    fxFlex="22"
                                                                    src="assets/images/opalimages/{{file.filetype}}_new.svg"
                                                                    alt="proofdoc">{{'View' | translate}}</a>
                                                            </span>
                                                           </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>
        <!-- back button -->
        <div class="btns m-t-20" fxLayoutAlign="end center">
            <button mat-raised-button class="cancelbtn fs-16" (click)="Vehiclelist()">{{ 'Back' | translate }}</button>
        </div>
    </div>
</div>