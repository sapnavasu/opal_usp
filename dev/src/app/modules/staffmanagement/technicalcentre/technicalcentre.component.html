<div id="trainingcentre" fxLayoutAlign="center start">
    <!-- pageloader -->
    <app-responseloader *ngIf="PageLoaders"></app-responseloader>
    <div class="vehicleinspection" fxFlex="100" fxFlex.gt-sm="100">
        <div class="paginationwithfilter masterPageTop ">
            <!-- paginator -->
            <mat-paginator #paginator class="masterPage masterPageTop" [length]="resultsLength" [pageSize]="10"
                [pageSizeOptions]="[5, 10, 25, 100] " (page)="syncPrimaryPaginator($event);"></mat-paginator>
            <div fxLayout="row wrap" fxLayoutAlign="end" class="available date_exp">
                    <button mat-raised-button type="button"  class="transformbtn m-r-15 m-l-15">{{'Export' | translate}}</button>
                    <button mat-raised-button type="button" color="primary" (click)="clickEvent();"
                        class="filter">{{filtername}}<i class="opalicon opal-filter fs-15 m-l-7"
                            aria-hidden="true"></i></button>
            </div>
        </div>
      <!-- table -->
        <div fxLayout="row wrap">
            <div fxFlex.gt-sm="100" fxFlex="100" class="tabforclientelenew">
                <div #TABLE class="awaredtable">
                    <!-- show and hide button -->
                    <button mat-button [matMenuTriggerFor]="editcolumn" class="editcolumn">
                        <mat-icon aria-hidden="false" aria-label="Example home icon">more_horiz</mat-icon>
                        <mat-menu #editcolumn="matMenu" class="master-menu edit-column-menu">
                            <div class="table-config-menu-options" fxLayout="column">
                                <mat-checkbox #editchkbox [(ngModel)]="selectAllVisible"
                                    (change)="selectAllFun($event)"> {{ 'All' | translate}}
                                </mat-checkbox>
                                <ng-container *ngFor="let cd of displayedColumns; let i = index">
                                    <mat-checkbox (click)="$event.stopPropagation()" [(ngModel)]="cd.visible"
                                        #columnchkbox (change)="updateAllVisible(cd)">
                                        {{cd.label | translate}}
                                    </mat-checkbox>
                                </ng-container>
                            </div>
                        </mat-menu>
                    </button>
                    <mat-table id="ExampleMaterialTable" #table class="scrolldata" [dataSource]="dataSource" matSort
                        matSortDisableClear>
                          <!--Project Name -->
                          <ng-container matColumnDef="project_name">
                            <mat-header-cell fxFlex="320px" mat-header-cell *matHeaderCellDef mat-sort-header>{{'Project Name' | translate}}</mat-header-cell>
                            <mat-cell data-label="project_name" fxFlex="320px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">{{element.project_name}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!--Training Centre -->
                        <ng-container matColumnDef="office_type">
                            <mat-header-cell fxFlex="280px" mat-header-cell *matHeaderCellDef mat-sort-header>{{'Office Type' | translate}}</mat-header-cell>
                            <mat-cell data-label="office_type" fxFlex="280px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">{{element.office_type}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- Branch name -->
                        <ng-container matColumnDef="branch_name">
                            <mat-header-cell fxFlex="280px" mat-header-cell *matHeaderCellDef mat-sort-header>{{'Branch name' | translate}}</mat-header-cell>
                            <mat-cell data-label="branch_name" fxFlex="280px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">{{element.branch_name}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- Site Location -->
                        <ng-container matColumnDef="site_locaton">
                            <mat-header-cell fxFlex="230px" mat-header-cell *matHeaderCellDef mat-sort-header>{{'Site Location' | translate}}</mat-header-cell>
                            <mat-cell data-label="site_locaton" fxFlex="230px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">{{element.site_locaton}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- Civil Number -->
                        <ng-container matColumnDef="civil_number">
                            <mat-header-cell fxFlex="200px" mat-header-cell *matHeaderCellDef mat-sort-header>{{'Civil Number' | translate}}</mat-header-cell>
                            <mat-cell data-label="civil_number" fxFlex="200px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">
                                  {{element.civil_number}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- Staff Name -->
                        <ng-container matColumnDef="staff_name">
                            <mat-header-cell fxFlex="240px" mat-header-cell *matHeaderCellDef mat-sort-header>{{'Staff Name' | translate}}</mat-header-cell>
                            <mat-cell data-label="staff_name" fxFlex="240px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">{{element.staff_name}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- Email ID -->
                        <ng-container matColumnDef="email_id">
                            <mat-header-cell fxFlex="260px" mat-header-cell *matHeaderCellDef mat-sort-header>{{'Email ID' | translate}}</mat-header-cell>
                            <mat-cell data-label="email_id" fxFlex="260px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">{{element.email_id}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- Roles -->
                        <ng-container matColumnDef="roles">
                            <mat-header-cell fxFlex="230px" mat-header-cell *matHeaderCellDef mat-sort-header>{{'Roles' | translate}}</mat-header-cell>
                            <mat-cell data-label="roles" fxFlex="230px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">{{ifarbic == true ? (element.vehtype_ar):
                                    (element.roles)}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!--categories -->
                        <ng-container matColumnDef="categories">
                            <mat-header-cell fxFlex="240px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'Categories' | translate}}</mat-header-cell>
                            <mat-cell data-label="categories" fxFlex="240px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">{{element.categories}}
                               </div>
                            </mat-cell>
                        </ng-container>
                        <!-- Competency Card Status -->
                        <ng-container matColumnDef="competency_card">
                            <mat-header-cell fxFlex="250px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'Competency Card Status' | translate}}</mat-header-cell>
                            <mat-cell data-label="competency_card" fxFlex="250px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">
                                    <span *ngIf="element.competency_card == 1">{{'Active' | translate}}</span>
                                    <span *ngIf="element.competency_card == 2">{{'Renewal' | translate}}</span>
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- Date of Expiry -->
                        <ng-container matColumnDef="dateofexp">
                            <mat-header-cell fxFlex="263px" mat-header-cell *matHeaderCellDef mat-sort-header>{{'Date of Expiry' | translate}}</mat-header-cell>
                            <mat-cell data-label="dateofexp" fxFlex="263px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">{{element.dateofexp?element.dateofexp:'-'}}
                                </div>
                            </mat-cell>
                        </ng-container>
                          <!-- Last Approved On -->
                          <ng-container matColumnDef="last_approved">
                            <mat-header-cell fxFlex="263px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'Last Approved On' | translate}}</mat-header-cell>
                            <mat-cell data-label="last_approved" fxFlex="263px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">
                                    {{element.last_approved?element.last_approved:'-'}}
                                </div>
                            </mat-cell>
                        </ng-container>
                          <!-- Account Status -->
                          <ng-container matColumnDef="account_status">
                            <mat-header-cell fxFlex="200px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'Account Status' | translate}}</mat-header-cell>
                            <mat-cell data-label="account_status" fxFlex="200px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">
                                    <span *ngIf="element.account_status == 1">{{'Active' | translate}}</span>
                                    <span *ngIf="element.account_status == 2">{{'Yet to Create' | translate}}</span>
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- Action -->
                        <ng-container matColumnDef="action" stickyEnd>
                            <mat-header-cell fxFlex="120px" mat-header-cell *matHeaderCellDef>{{'Action'
                                | translate}}
                            </mat-header-cell>
                            <mat-cell data-label="action" fxFlex="120px" *matCellDef="let element">
                                <div *ngIf="tableplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tableplaceholder">
                                    <div class="manageoptions">
                                        <button class="menubutton" mat-icon-button [matMenuTriggerFor]="actionmenu"
                                            aria-label="Example icon-button with a menu">
                                            <mat-icon class="moremenucolor">more_horiz</mat-icon>
                                        </button>
                                        <mat-menu #actionmenu="matMenu"
                                            class="master-menu whentootltipadded table_menu">
                                            <button type="button" mat-menu-item (click)="viewtechButton('viewStaff')"><span>{{'View Staff Details' |translate}}</span></button>
                                            <button type="button" mat-menu-item (click)="viewtechButton('viewSchedule')"><span>{{'View Schedule' |translate}}</span></button>
                                            <button type="button" mat-menu-item><span>{{'Print Competency Card' |translate}}</span></button>
                                            <button type="button" mat-menu-item><span>{{'View Competency Card' |translate}}</span></button>
                                        </mat-menu>
                                    </div>
                                </div>
                            </mat-cell>
                        </ng-container>
                         <!--Project Name -->
                         <ng-container matColumnDef="row-project">
                            <mat-header-cell fxFlex="320px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |translate}}</mat-label>
                                    <input matInput [formControl]="projectName">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!--training centre -->
                        <ng-container matColumnDef="row-training">
                            <mat-header-cell fxFlex="280px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |translate}}</mat-label>
                                    <input matInput [formControl]="traimigCentre">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- branch Name -->
                        <ng-container matColumnDef="row-branch">
                            <mat-header-cell fxFlex="280px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |translate}}</mat-label>
                                    <input matInput [formControl]="branchName">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- site location -->
                        <ng-container matColumnDef="row-location">
                            <mat-header-cell fxFlex="230px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |translate}}</mat-label>
                                    <input matInput [formControl]="siteLocation">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- civil -->
                        <ng-container matColumnDef="row-civil">
                            <mat-header-cell fxFlex="200px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |translate}}</mat-label>
                                    <input matInput [formControl]="civilNumber">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- staffname -->
                        <ng-container matColumnDef="row-staffname">
                            <mat-header-cell fxFlex="240px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |
                                        translate}}</mat-label>
                                    <input matInput [formControl]="staffName">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- email -->
                        <ng-container matColumnDef="row-email">
                            <mat-header-cell fxFlex="260px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |
                                        translate}}</mat-label>
                                    <input matInput [formControl]="email_id">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- roles -->
                        <ng-container matColumnDef="row-roles">
                            <mat-header-cell fxFlex="230px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.sele' |
                                        translate}}</mat-label>
                                    <mat-select [formControl]="roLes" multiple>
                                        <mat-option value="1">{{'Initial' |translate}}</mat-option>
                                        <mat-option value="2">{{'Renewal' |translate}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- categories -->
                        <ng-container matColumnDef="row-subcategories">
                            <mat-header-cell fxFlex="240px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.sele' |
                                        translate}}</mat-label>
                                    <mat-select [formControl]="subCategories" multiple>
                                        <mat-option value="1">{{'Initial' |translate}}</mat-option>
                                        <mat-option value="2">{{'Renewal' |translate}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- compcard -->
                        <ng-container matColumnDef="row-compcard">
                            <mat-header-cell fxFlex="250px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.sele' |
                                        translate}}</mat-label>
                                    <mat-select [formControl]="compCard" multiple
                                        (selectionChange)="applyFilter($event.value,'appl_type_filter')">
                                        <mat-option value="1">{{'Initial' |translate}}</mat-option>
                                        <mat-option value="2">{{'Renewal' |translate}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- expiry -->
                        <ng-container matColumnDef="row-expiry">
                            <mat-header-cell fxFlex="263px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <!-- <mat-label>{{'table.search' |translate}}</mat-label> -->
                                    <div class="drpicker" id="regapp">
                                        <input id="login_session" [formControl]="expiryDate"
                                            (datesUpdated)="changeDateInsp($event,'expiryDate')" #pickers
                                            matInput type="text" autocomplete="off" ngxDaterangepickerMd
                                            [showCustomRangeLabel]="true" [alwaysShowCalendars]="true" [ranges]="ranges"
                                            [locale]="locale" [linkedCalendars]="true" [showClearButton]="true"
                                            [maxDate]='selected2' readonly class="form-control" />
                                        <div class="closeanddateicon">
                                            <mat-datepicker-toggle matSuffix>
                                            </mat-datepicker-toggle>
                                        </div>
                                    </div>
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- approvedon -->
                        <ng-container matColumnDef="row-approvedon">
                            <mat-header-cell fxFlex="263px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <div class="drpicker" id="regapp">
                                        <input id="login_session" [formControl]="approvedOn"
                                            (datesUpdated)="changeDateInsp($event,'approvedOn')" #pickers
                                            matInput type="text" autocomplete="off" ngxDaterangepickerMd
                                            [showCustomRangeLabel]="true" [alwaysShowCalendars]="true" [ranges]="ranges"
                                            [locale]="locale" [linkedCalendars]="true" [showClearButton]="true"
                                            [maxDate]='selected2' readonly class="form-control" />
                                        <div class="closeanddateicon">
                                            <mat-datepicker-toggle matSuffix>
                                            </mat-datepicker-toggle>
                                        </div>
                                    </div>
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- accountstatus -->
                    
                        <ng-container matColumnDef="row-accountstatus">
                            <mat-header-cell fxFlex="200px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.sele' |
                                        translate}}</mat-label>
                                    <mat-select [formControl]="accountstatus" multiple>
                                        <mat-option value="1">{{'Initial' |translate}}</mat-option>
                                        <mat-option value="2">{{'Renewal' |translate}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- action -->
                        <ng-container matColumnDef="row-action" stickyEnd>
                            <mat-header-cell fxFlex="120px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <i class="fa fa-refresh m-l-15 cursorview" (click)="clearFilter();filtersts=false;"
                                    aria-hidden="true" matTooltip="{{'table.refresh'|translate}}"></i>
                            </mat-header-cell>
                        </ng-container>

                        <mat-header-row id="headerrowcells" *matHeaderRowDef="getdisplayedColumn()">
                        </mat-header-row>

                        <mat-header-row id="searchrow" *matHeaderRowDef="getdisplayedsearch()">
                        </mat-header-row>
                        <mat-row mat-row *matRowDef="let row; columns: getdisplayedColumn();"></mat-row>
                        <ng-container matColumnDef="disclaimer">
                            <td mat-footer-cell *matFooterCellDef colspan="11">
                                <div class="nofound" fxLayoutAlign="center" fxFlex.gt-sm="100" fxFlex="100">
                                    <div fxFlex="100" fxLayout="column" fxLayoutAlign="center center">
                                        <div fxLayout="row wrap" fxLayoutAlign="center center" *ngIf="tableplaceholder"
                                            class="NorecordLoader"></div>
                                        <img src="assets/images/opalimages/norecord.svg" alt="norecord"
                                            *ngIf="!tableplaceholder">
                                        <p class="m-t-10 txt-gry3 fs-16" *ngIf="!tableplaceholder">{{'No Records' |
                                            translate}}</p>
                                    </div>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container>
                            <mat-footer-row [class.stickyclass]="(resultsLength > 0) ? 'none' : 'block'"
                                [style.display]="(resultsLength > 0) ? 'none' : 'block' "
                                *matFooterRowDef="['disclaimer']" style="justify-content: center">
                            </mat-footer-row>
                        </ng-container>
                    </mat-table>
                </div>
                <!-- footer paginator -->
                <div fxLayout="row" fxLayoutAlign="end" class="m-b-15 m-t-30">
                    <div fxFlex.gt-sm="100" fxFlex="100" class="footerpaginator">
                        <mat-paginator class="p-r-10" ngClass.xs="block" ngClass.sm="block"
                            class="masterPage masterbottom " showFirstLastButtons [pageSize]="paginator?.pageSize"
                            (page)="syncPrimaryPaginator($event);" [pageIndex]="paginator?.pageIndex"
                            [length]="paginator?.length" [pageSizeOptions]="paginator?.pageSizeOptions">
                        </mat-paginator>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>