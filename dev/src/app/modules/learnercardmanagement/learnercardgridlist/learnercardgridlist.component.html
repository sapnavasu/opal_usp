<div id="learnercard" *ngIf="viewacess" fxLayoutAlign="center start">
    <app-responseloader *ngIf="fullPageLoaders"></app-responseloader>
    <div class="vehicleinspection" fxFlex="100" fxFlex.gt-sm="100">
        <div class="paginationwithfilter masterPageTop ">
            <mat-paginator class="masterPage masterPageTop" #paginator [length]="learnercard_length" [pageSize]="10" 
                    [pageSizeOptions]="[5, 10, 25, 100]" (page)="syncPrimaryPaginator($event);" ></mat-paginator>
            <div fxLayout="row wrap" fxLayoutAlign="end">
                <div fxFlex.gt-sm="100" fxFlex="100">
                    <button mat-raised-button type="button" *ngIf="createaccess" (click)="registerNow();"
                    class="submit_btn m-r-15">{{'Add' | translate}}</button>
                    <button mat-raised-button type="button" color="primary" (click)="clickEvent();"
                        class="filter">{{filtername}}<i class="opalicon opal-filter fs-15 m-l-7"
                            aria-hidden="true"></i></button>
                </div>
            </div>
        </div>
        <div fxLayout="row wrap">
            <div fxFlex.gt-sm="100" fxFlex="100" class="tabforclientelenew">
                <div #TABLE class="awaredtable">
                    <mat-table id="ExampleMaterialTable" #table class="scrolldata" [dataSource]="dataSource"
                        matSort matSortDisableClear>
                         <!-- new 1 -->
                         <ng-container matColumnDef="lcd_verificationno">
                            <mat-header-cell fxFlex="200px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'Verification No.' | translate}}</mat-header-cell>
                            <mat-cell data-label="Verificationno" fxFlex="200px" *matCellDef="let element">
                                <div *ngIf="tblplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tblplaceholder">{{element.lcd_verificationno ? element.lcd_verificationno : '-'}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- new 3 -->
                         <ng-container matColumnDef="sld_ROPlicense">
                            <mat-header-cell fxFlex="200px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'ROP License No.' | translate}}</mat-header-cell>
                            <mat-cell data-label="roplicense" fxFlex="200px" *matCellDef="let element">
                                <div *ngIf="tblplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tblplaceholder">{{element.sld_ROPlicense ? element.sld_ROPlicense : '-'}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- new 2 -->
                        <ng-container matColumnDef="sir_idnumber">
                            <mat-header-cell fxFlex="280px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'Civil Number' | translate}}</mat-header-cell>
                            <mat-cell data-label="civilnumber" fxFlex="280px" *matCellDef="let element">
                                <div *ngIf="tblplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tblplaceholder">{{element.sir_idnumber ? element.sir_idnumber : '-'}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- 1 -->
                        <ng-container matColumnDef="sir_name_en">
                            <mat-header-cell fxFlex="250px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'Learner Name' | translate}}</mat-header-cell>
                            <mat-cell data-label="learnername" fxFlex="250px" *matCellDef="let element">
                                <div *ngIf="tblplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tblplaceholder">{{ifarbic == true ? (element.sir_name_ar):
                                    (element.sir_name_en)}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- 2 -->
                        <ng-container matColumnDef="pm_projectname_en">
                            <mat-header-cell fxFlex="280px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'Course Type' | translate}}</mat-header-cell>
                            <mat-cell data-label="courtype" fxFlex="280px" *matCellDef="let element">
                                <div *ngIf="tblplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tblplaceholder">{{ifarbic == true ? element.pm_projectname_ar:
                                    element.pm_projectname_en}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- 3 -->
                        <ng-container matColumnDef="scm_coursename_en">
                            <mat-header-cell fxFlex="280px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'Category' | translate}}</mat-header-cell>
                            <mat-cell data-label="category" fxFlex="280px" *matCellDef="let element">
                                <div *ngIf="tblplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tblplaceholder">{{ifarbic == true ? (element.scm_coursename_ar):
                                    (element.scm_coursename_en)}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- 4 -->
                        <ng-container matColumnDef="cat_count">
                            <mat-header-cell fxFlex="180px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'No. of Sub Categories' | translate}}</mat-header-cell>
                            <mat-cell data-label="subcate" fxFlex="180px" *matCellDef="let element">
                                <div *ngIf="tblplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tblplaceholder">{{element.cat_count}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- 5 -->
                        <ng-container matColumnDef="exp_count">
                            <mat-header-cell fxFlex="150px" mat-header-cell *matHeaderCellDef
                                mat-sort-header>{{'No. of Expiries' | translate}}</mat-header-cell>
                            <mat-cell data-label="noofexpir" fxFlex="150px" *matCellDef="let element">
                                <div *ngIf="tblplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tblplaceholder">{{element.exp_count}}</div>
                            </mat-cell>
                        </ng-container>
                        <!-- 6 -->
                        <ng-container matColumnDef="lcd_createdon">
                            <mat-header-cell fxFlex="263px" mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{'Last Issued On' | translate}}</mat-header-cell>
                            <mat-cell data-label="lastissue" fxFlex="263px" *matCellDef="let element">
                                <div *ngIf="tblplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tblplaceholder">{{seperatedata(element.plaincard,'date') ? (seperatedata(element.plaincard,'date') | date : 'dd-MM-yyyy')  : '-'}}
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- new 6 -->
                        <ng-container matColumnDef="action" stickyEnd>
                            <mat-header-cell fxFlex="100px" mat-header-cell *matHeaderCellDef>{{'Action'
                                | translate}}
                            </mat-header-cell>
                            <mat-cell data-label="action" fxFlex="100px" *matCellDef="let element">
                                <div *ngIf="tblplaceholder" class="w-100">
                                    <div class="tabledataloader"></div>
                                </div>
                                <div *ngIf="!tblplaceholder">{{element.irm_intlrecogname_en}}
                                    <div class="manageoptions">
                                        <button class="menubutton" mat-icon-button [matMenuTriggerFor]="actionmenu"
                                            aria-label="Example icon-button with a menu">
                                            <mat-icon class="moremenucolor">more_horiz</mat-icon>
                                        </button>
                                        <mat-menu #actionmenu="matMenu"
                                            class="master-menu whentootltipadded table_menu">     
                                            <button type="button" *ngIf="viewacess" mat-menu-item (click)="view(element.lcd_staffinforepo_fk, element.lcd_standardcoursemst_fk)"><span>{{'View Details' |translate}}</span></button>
                                            <button type="button" *ngIf="updateaccess" mat-menu-item (click)="edit(element.lcd_staffinforepo_fk, element.lcd_standardcoursemst_fk)" ><span>{{'Edit Details' |translate}}</span></button>
                                            <button type="button" *ngIf="downloadaccess && element.viewfileexist && seperatedata(element.plaincard,'view') " mat-menu-item (click)="viewcard(seperatedata(element.plaincard,'learnerid'))" >{{'View Card' |translate}}</button>
                                            <button type="button" *ngIf="downloadaccess && element.printfileexist && seperatedata(element.plaincard,'print') " mat-menu-item (click)="opendialogprintsetup(seperatedata(element.plaincard,'learnerid'))" >{{'Print Card' |translate}}</button>
                                        </mat-menu>
                                    </div>
                                </div>
                            </mat-cell>
                        </ng-container>
                        <!-- new 1 -->
                        <ng-container matColumnDef="row-firstnew">
                            <mat-header-cell fxFlex="200px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |translate}}</mat-label>
                                    <input matInput [formControl]="verificateno" (keyup)="searchbatchgrid($event.target.value,'verficationno')">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- new 3 -->
                        <ng-container matColumnDef="row-new">
                            <mat-header-cell fxFlex="200px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |translate}}</mat-label>
                                    <input matInput [formControl]="license_no" (keyup)="searchbatchgrid($event.target.value,'roplicenseno')">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- new 2 -->
                        <ng-container matColumnDef="row-newone">
                            <mat-header-cell fxFlex="280px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |translate}}</mat-label>
                                    <input matInput [formControl]="civil_number" (keyup)="searchbatchgrid($event.target.value,'idnumber')">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- 1 -->
                        <ng-container matColumnDef="row-first">
                            <mat-header-cell fxFlex="250px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.search' |translate}}</mat-label>
                                    <input matInput [formControl]="lear_name" (keyup)="searchbatchgrid($event.target.value,'name')">
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- 2 -->
                        <ng-container matColumnDef="row-second">
                            <mat-header-cell fxFlex="280px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.select' |
                                        translate}}</mat-label>
                                        <mat-select [formControl]="cate_filter" multiple (selectionChange)="searchbatchgrid($event.value,'course')">
                                            <div class="option-listing countryselectwithimage">
                                            <!-- <mat-option *ngFor="let list of project" [value]="list.projectmst_pk">
                                                {{list.pm_projectname_en}}
                                            </mat-option> -->
                                            <mat-option [value]="2">{{'Standard Course Certification' | translate }}</mat-option>
                                        </div>
                                        </mat-select>
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <ng-container matColumnDef="row-type">
                            <mat-header-cell fxFlex="280px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <mat-label>{{'table.select' |
                                        translate}}</mat-label>
                                        <mat-select [formControl]="course_type" multiple (selectionChange)="searchbatchgrid($event.value,'category')">
                                            <div class="option-listing countryselectwithimage">
                                            <mat-option *ngFor="let list of standcourse" [value]="list.standardcoursemst_pk">
                                                {{list.scm_coursename_en}}
                                            </mat-option>
                                            </div>
                                        </mat-select>
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- 3 -->
                        <ng-container matColumnDef="row-three">
                            <mat-header-cell fxFlex="180px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">

                            </mat-header-cell>
                        </ng-container>
                        <!-- 4 -->
                        <ng-container matColumnDef="row-four">
                            <mat-header-cell fxFlex="150px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                            </mat-header-cell>
                        </ng-container>
                        <!-- 5 -->
                        <ng-container matColumnDef="row-newsix">
                            <mat-header-cell fxFlex="263px" class="serachrow" *matHeaderCellDef
                                style="text-align:center">
                                <mat-form-field class="filter" appearance="outline">
                                    <div class="drpicker" id="regapp">
                                                <input id="login_session" [formControl]="lastUpdated" #pickers matInput type="text" (datesUpdated)="serachdate($event,'date')" autocomplete="off" ngxDaterangepickerMd  [showCustomRangeLabel]="true"  [alwaysShowCalendars]="true" [ranges]="ranges"  [locale]="locale" [linkedCalendars]="true"  [showClearButton]="true"  [maxDate]='selected2'  readonly class="form-control" [max]="today"/>
                                                <div class="closeanddateicon">
                                                    <mat-datepicker-toggle matSuffix >
                                                    </mat-datepicker-toggle>
                                                </div>
                                            </div>
                                </mat-form-field>
                            </mat-header-cell>
                        </ng-container>
                        <!-- 12 -->
                        <ng-container matColumnDef="row-twelve" stickyEnd>
                            <mat-header-cell fxFlex="100px" class="serachrow" *matHeaderCellDef
                            style="text-align:center">
                            <i class="fa fa-refresh m-l-15 cursorview" (click)="clearFilter();filtersts=false;"
                                aria-hidden="true" matTooltip="{{'Refresh'|translate}}"></i>
                        </mat-header-cell>
                        </ng-container>
                       
                        <mat-header-row id="headerrowcells" *matHeaderRowDef="displayedColumns;">
                        </mat-header-row>
                        <mat-header-row id="searchrow"
                            *matHeaderRowDef="['row-firstnew','row-new' ,'row-newone', 'row-first' , 'row-second' , 'row-type', 'row-three' , 'row-four' ,'row-newsix', 'row-twelve' ]">
                        </mat-header-row>
                        <mat-row mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                        <ng-container matColumnDef="disclaimer">
                            <td mat-footer-cell *matFooterCellDef colspan="11">
                                <div fxFlex="100" fxLayout="column" [ngClass]="tblplaceholder?'':'nofound'" fxLayoutAlign="center center">
                                    <div fxLayout="row wrap" fxLayoutAlign="center center"  *ngIf="tblplaceholder"
                                    class="NorecordLoader m-t-20"></div>
                                    <img src="assets/images/opalimages/norecord.svg" alt="norecord" *ngIf="!tblplaceholder" />
                                    <p class="m-t-10 txt-gry3 fs-16" *ngIf="!tblplaceholder && !start">{{'No Records' | translate}} </p>
                                        <p class="m-t-10 txt-gry3 fs-16" *ngIf="!tblplaceholder && start">{{'To view a specific Learner information, use the Search option on the Information required.' | translate}} </p>
                                    
                                </div>
                            </td>
                        </ng-container>
                        <ng-container >
                            <mat-footer-row [class.stickyclass]="(learnercard_length > 0) ? 'none' : 'block'"
                                [style.display]="(learnercard_length > 0) ? 'none' : 'block' "
                                *matFooterRowDef="['disclaimer']" style="justify-content: center">
                            </mat-footer-row>
                        </ng-container>
                    </mat-table>
                </div>
                <div fxLayout="row" fxLayoutAlign="end" class="m-b-15 m-t-30">
                    <div fxFlex.gt-sm="100" fxFlex="100" class="footerpaginator">
                        <mat-paginator class="p-r-10" ngClass.xs="block" ngClass.sm="block"
                            class="masterPage masterbottom " showFirstLastButtons [pageSize]="paginator?.pageSize"
                            (page)="syncPrimaryPaginator($event);" [pageIndex]="paginator?.pageIndex"
                            [length]="learnercard_length" [pageSizeOptions]="paginator?.pageSizeOptions">
                        </mat-paginator>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
