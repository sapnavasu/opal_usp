<mat-drawer-container>
  <mat-drawer-content class="setpassdrawer">
    <app-registrationheader></app-registrationheader>
    <div dir="{{dir}}" class="{{dir}}" id="setpassword">
      <div fxLayout="row wrap" class="scrollerdata container setpass single-blog-bg"
      style="background-image: url(assets/images/opalimages/bg-bg.svg)">

      <div fxFlex.gt-sm="100" fxFlex="100" class="bottominfo pophoverlisted">

        <div *ngIf="(template !== 'expired' && template!== 'already_reset' )" [ngSwitch]="template"
          class="rightsideinfo spaceforleftright m-t-50 m-b-50">
          <ng-template [ngSwitchCase]="'setpassword'">
            <div>
              <form [formGroup]="setpasswordForm" autocomplete="off" (ngSubmit)="onSubmit()">
                <div class="lypislogoimage">

                  <h2 *ngIf="setorreset == 'reset'" class="fs-22 p-t-0 m-t-0 log-bold p-b-5">{{pageHeading}}</h2>
                  <h2 *ngIf="setorreset == 'set'" class="fs-22 p-t-0  m-t-0 log-bold p-b-5">{{'commonsetpassword.setyoupass' | translate}}</h2>
                </div>
                <div class="easycolormail">
                  <p class="fs-14 m-t-5 m-b-10 lh-26 text-center">
                    {{'commonsetpassword.yourpassmustcontaamin' | translate}} </p>

                </div>
                <div class="pos-relative keyboardpassword m-t-20 ">
                  <mat-form-field appearance="outline" class="flexalign ">
                    <mat-label class="fs-14"> {{'commonsetpassword.newpass' | translate}}</mat-label>
                    <input [popover]="usersviewlits" popoverPlacement="left" [popoverOnHover]="false"
                      [popoverCloseOnClickOutside]="setpasswordForm.controls['password'].valid"
                      [popoverCloseOnMouseOutside]="setpasswordForm.controls['password'].valid"
                      [popoverAnimation]="false" type="password" 
                       autocomplete="off"
                      [type]="isInputTextTypefirst ? 'text' : 'password'" maxlength="20" formControlName="password"
                      class="inputcolor" matInput appAlphanumsymb app-restrict-input="firstspace"
                       required>
                    <span matSuffix class="spaceinfo">
                      <i class="fa fa-eye-slash" aria-hidden="true" *ngIf="!isInputTextTypefirst"
                        (click)="isInputTextTypefirst = !isInputTextTypefirst" matTooltip="Show"></i>
                      <i class="fa fa-eye" aria-hidden="true" *ngIf="isInputTextTypefirst"
                        (click)="isInputTextTypefirst = !isInputTextTypefirst" matTooltip="Hide"></i>
                    </span>
                    <mat-error
                      *ngIf="setpasswordForm.controls['password'].hasError('required') && setpasswordForm.controls['password'].touched"
                      class="text-danger font-14">{{'commonsetpassword.entenewpass' | translate}}</mat-error>
                    <mat-error
                      *ngIf="setpasswordForm.controls['password'].hasError('minlength') && setpasswordForm.controls['password'].touched"
                      class="text-danger font-14">{{'commonsetpassword.passmustcontaimin' | translate}}</mat-error>

                  </mat-form-field>

                  <app-virtual-keyboard class="newpasswordkey" #vk [inputControl]="newPasswordControl">
                  </app-virtual-keyboard>
                  <popover-content #usersviewlits placement="bottom" [animation]="true"
                    [closeOnClickOutside]="setpasswordForm.controls['password'].valid">
                    <div class="popovermaincontent">
                      <div class="passwordheadcolor">
                        <p id="changethesize">{{'commonsetpassword.passmustcon' | translate}}</p>
                        <ul class="containcolor">
                          <li
                            [class.unmatched]="passwordFieldCtrl.errors?.minlength || !setpasswordForm.controls['password'].value"
                            [class.matched]="!passwordFieldCtrl.errors?.minlength && setpasswordForm.controls['password'].value">
                            {{'commonsetpassword.mini8char' | translate}}</li>
                          <li [class.unmatched]="!setpasswordForm.controls['password'].value || !isuppercase"
                            [class.matched]="setpasswordForm.controls['password'].value || isuppercase">
                            {{'commonsetpassword.oneupper' | translate}}</li>
                          <li [class.unmatched]="!setpasswordForm.controls['password'].value || !isnumber"
                            [class.matched]="setpasswordForm.controls['password'].value || isnumber">
                            {{'commonsetpassword.onenum' | translate}}</li>
                          <li [class.unmatched]="!setpasswordForm.controls['password'].value || !issymbol"
                            [class.matched]="setpasswordForm.controls['password'].value || issymbol">
                            {{'commonsetpassword.onespecichar' | translate}}</li>
                          <li [class.unmatched]="!setpasswordForm.controls['password'].value || !issmallcase"
                            [class.matched]="setpasswordForm.controls['password'].value || issmallcase">
                            {{'commonsetpassword.onelowe' | translate}}</li>
                        </ul>
                      </div>
                    </div>
                  </popover-content>
                </div>
                <div class="pos-relative keyboardpassword">

                  <mat-form-field appearance="outline" class="flexalign">
                    <mat-label class="fs-14"> {{'commonsetpassword.confipass' | translate}}</mat-label>
                    <input [type]="isInputTextTypefirstconfirm ? 'text' : 'password'" maxlength="20"
                      formControlName="confirmpassword" class="inputcolor" matInput blockCopyPaste required>
                    <span matSuffix class="spaceinfo">
                      <i class="fa fa-eye-slash" aria-hidden="true" *ngIf="!isInputTextTypefirstconfirm"
                        (click)="isInputTextTypefirstconfirm = !isInputTextTypefirstconfirm" matTooltip="Show"></i>
                      <i class="fa fa-eye" aria-hidden="true" *ngIf="isInputTextTypefirstconfirm"
                        (click)="isInputTextTypefirstconfirm = !isInputTextTypefirstconfirm" matTooltip="Hide"></i>
                    </span>
                    <mat-error
                      *ngIf="setpasswordForm.controls['confirmpassword'].hasError('required') && setpasswordForm.controls['confirmpassword'].touched"
                      class="text-danger font-14">{{'commonsetpassword.enteconfirpass' | translate}}</mat-error>
                    <mat-error
                      *ngIf="setpasswordForm.controls['confirmpassword'].hasError('mustMatch') && setpasswordForm.controls['confirmpassword'].touched"
                      class="text-danger font-14">{{'commonsetpassword.passdonotmatch' | translate}}</mat-error>
                    <mat-error *ngIf="setpasswordForm.controls['confirmpassword'].errors?.usernameSame"
                      class="text-danger font-14">{{'commonsetpassword.usernamecantbepass' | translate}}

                    </mat-error>
                    <mat-error *ngIf="setpasswordForm.controls['confirmpassword'].errors?.oldPassword"
                      class="text-danger font-14">{{'commonsetpassword.yournewpasscantlast3pass' |
                      translate}}</mat-error>
                  </mat-form-field>

                  <app-virtual-keyboard class="renterpasswordkey" #vk1 [inputControl]="confirmPasswordControl">
                  </app-virtual-keyboard>
                </div>
                <div class="setbtn d-flex spinnercircle">
                  <mat-spinner-button type="submit" [options]="spinnerButtonOptions" class="fs-14 submitbtn"
                    [class.previousdisabled]="setpasswordForm.invalid || validationCount <= 3"
                    [disabled]="setpasswordForm.invalid || validationCount <= 3">
                  </mat-spinner-button>
                </div>
                <div *ngIf="setorreset == 'reset'" class="havecolor registerfromhere p-t-5">
                  <p class="fs-13"> <span>{{'commonsetpassword.donthavanacc' | translate}}</span>
                    <a routerLink="/registration/index" class="cursor fs-13">{{'commonsetpassword.regis' |
                      translate}}</a>
                  </p>
                </div>
                <!-- reset------------- -->
                <p *ngIf="setorreset == 'reset'" class="m-0 fs-14 backtohometxt fs-14 lypisfont-regular text-left p-t-15">
                  <a href="admin/login" class="p-l-5 d-flex"><mat-icon class="m-r-5 arrow">keyboard_backspace</mat-icon> {{'commonsetpassword.backto' |
                    translate}}</a>
                </p>
                <!-- setpassword------------------ -->
                <p  *ngIf="setorreset == 'set'" class="m-0 fs-14 backtohometxt fs-14 lypisfont-regular text-left p-t-35">
                  <a href="admin/login" class="p-l-5 d-flex"><mat-icon class="m-r-5 arrow">keyboard_backspace</mat-icon> {{'commonsetpassword.home' | translate}}</a>
                </p>
              </form>
            </div>
          </ng-template>
          <ng-template [ngSwitchCase]="'success'">
            <div class="easycolormail text-center">
              <h2 class="fs-22 p-t-12 lypisfont-bold">{{'commonsetpassword.passsetsuccss' | translate}}</h2>
            </div>
            <div class="successtick">
              <span>
                <i class="bgi bgi-tick"></i>
              </span>
            </div>
            <div class="p-t-50 succbtn d-flex spinnercircle">
              <button type="button" (click)="checkfactor()" class="fs-16 submitbtn"[options]="spinnerButtonOptions">{{'commonsetpassword.log' |
                translate}}</button>
            </div>
          </ng-template>
          <ng-template [ngSwitchCase]="'successnew'">
            <div class="successtick p-b-20">
              <span>
                <mat-icon>done</mat-icon>
              </span>
            </div>
            <div class="easycolormail">
              <h2 *ngIf="setorreset == 'set'" class="fs-22 p-t-10 log-bold text-center m-t-0 m-b-5">{{'commonsetpassword.passsetsuccss' | translate}}</h2>
              <h2 *ngIf="setorreset == 'reset'" class="fs-22 p-t-10 log-bold text-center m-t-0 m-b-5">{{'commonsetpassword.passressuc' | translate}}</h2>
            </div>
            <div class="easycolormail">
              <p class="fs-15 p-t-12 text-center m-t-5">{{'commonsetpassword.youcannowlog' | translate}}</p>
            </div>
            <div class="p-t-18 spinnercircle m-b-20">
              <button type="button" (click)="checkfactor()" class="fs-16 submitbtn" [options]="spinnerButtonOptions">{{'commonsetpassword.log' |
                translate}}</button>
            </div>
          </ng-template>
        </div>
        <div *ngIf="template == 'expired'" fxLayout="row wrap" class="shadow heightregistertop showontop">
          <div fxFlex.gt-sm="100" fxFlex="100" class="headerimage">
            <img src="assets/images/forgot%20mail%20link%20expired.svg" class="icon-size" alt="Invite Expired!">
            <h4 class="fs-24 p-t-0"> {{'commonsetpassword.linkexpi' | translate}}</h4>
            <p class="fs-14 p-t-0">{{'commonsetpassword.thislinksentresetyoupass' | translate}}
              <b>{{'commonsetpassword.subdiscription' | translate}}
              </b>
              {{'commonsetpassword.butttorequanothlink' | translate}}
            </p>
            <button type="button" class="fs-14 request m-t-25 m-b-15" (click)="routeTo()">{{'commonsetpassword.forgpass' |
              translate}}</button>
          </div>
        </div>
        <div *ngIf="template == 'cancelreg'" fxLayout="row wrap" class="shadow heightregistertop showontop">
          <div fxFlex.gt-sm="100" fxFlex="100" class="headerimage">
            <h4 class="fs-24 p-t-0"> Registration Cancelled Successfully !</h4>
            <p class="fs-14 p-t-0">
            </p>
          </div>
        </div>
        <div *ngIf="template == 'already_reset'" fxLayout="row wrap" class="shadow heightregistertop showontop">
          <div fxFlex.gt-sm="100" fxFlex="100" class="headerimage">
            <img src="assets/images/opalimages/Tick.svg" class="icon-size" alt="Already Registered">
            <h4 class="fs-24 p-t-0"> {{'commonsetpassword.passalreset' | translate}}</h4>
            <p class="fs-14 p-t-0">{{'commonsetpassword.youhavealresetpassusinthislink' | translate}}
              <b>{{'commonsetpassword.forgpass' | translate}}
              </b>
              {{'commonsetpassword.butttorequanothlinkagai' | translate}}
            </p>
            <button type="button" class="fs-14 request m-t-25 m-b-15" (click)="routeTo()"> {{'commonsetpassword.forgpass' |
              translate}}</button>
          </div>
        </div>
      </div>
    <app-registrationfooter class="w-100"></app-registrationfooter>
    </div>
    </div>
  </mat-drawer-content>
</mat-drawer-container>